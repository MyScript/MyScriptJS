{"version":3,"file":"myscript.esm.js","sources":["../src/configuration/Constants.js","../node_modules/loglevel/lib/loglevel.js","../src/configuration/LoggerConfig.js","../node_modules/is-primitive/index.js","../node_modules/assign-symbols/index.js","../node_modules/assign-deep/node_modules/kind-of/index.js","../node_modules/assign-deep/index.js","../src/configuration/DefaultConfiguration.js","../node_modules/json-css/lib/jsoncss.min.js","../src/configuration/DefaultPenStyle.js","../src/configuration/DefaultTheme.js","../src/grabber/PointerEventGrabber.js","../src/renderer/canvas/symbols/StrokeSymbolCanvasRenderer.js","../src/renderer/canvas/symbols/ShapeSymbolCanvasRenderer.js","../src/renderer/canvas/symbols/TextSymbolCanvasRenderer.js","../src/renderer/canvas/symbols/MusicSymbolCanvasRenderer.js","../src/model/StrokeComponent.js","../src/model/Symbol.js","../src/model/InkModel.js","../src/renderer/canvas/CanvasRenderer.js","../src/renderer/QuadraticUtils.js","../src/renderer/canvas/stroker/QuadraticCanvasStroker.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/select.js","../src/renderer/svg/symbols/StrokeSymbolSVGRenderer.js","../src/renderer/svg/SVGRenderer.js","../src/renderer/svg/stroker/QuadraticSVGStroker.js","../node_modules/crypto-js/core.js","../node_modules/crypto-js/enc-hex.js","../node_modules/crypto-js/x64-core.js","../node_modules/crypto-js/sha512.js","../node_modules/crypto-js/hmac.js","../node_modules/crypto-js/hmac-sha512.js","../src/recognizer/CryptoHelper.js","../src/recognizer/rest/networkInterface.js","../src/model/RecognizerContext.js","../src/recognizer/rest/v3/Cdkv3RestRecognizerUtil.js","../src/recognizer/common/v3/Cdkv3CommonTextRecognizer.js","../src/recognizer/DefaultRecognizer.js","../src/recognizer/rest/v3/Cdkv3RestTextRecognizer.js","../src/recognizer/common/CdkCommonUtil.js","../src/recognizer/common/v3/Cdkv3CommonMathRecognizer.js","../src/recognizer/rest/v3/Cdkv3RestMathRecognizer.js","../src/recognizer/common/v3/Cdkv3CommonShapeRecognizer.js","../src/recognizer/rest/v3/Cdkv3RestAnalyzerRecognizer.js","../src/recognizer/rest/v3/Cdkv3RestShapeRecognizer.js","../src/recognizer/rest/v3/Cdkv3RestMusicRecognizer.js","../src/recognizer/rest/v4/iinkRestRecognizer.js","../src/recognizer/websocket/networkWSInterface.js","../src/recognizer/websocket/v3/Cdkv3WSBuilder.js","../src/util/PromiseHelper.js","../src/recognizer/websocket/CdkWSRecognizerUtil.js","../src/recognizer/websocket/v3/Cdkv3WSMathRecognizer.js","../src/recognizer/websocket/v3/Cdkv3WSTextRecognizer.js","../node_modules/uuid-js/lib/uuid.js","../src/recognizer/websocket/v4/Cdkv4WSBuilder.js","../src/recognizer/websocket/v4/Cdkv4WSIInkRecognizer.js","../src/callback/EventCallback.js","../src/configuration/DefaultBehaviors.js","../src/model/UndoRedoContext.js","../src/model/UndoRedoManager.js","../src/util/ModelStats.js","../src/renderer/canvas/ImageRenderer.js","../node_modules/perfect-scrollbar/dist/perfect-scrollbar.esm.js","../node_modules/select/src/select.js","../node_modules/clipboard/lib/clipboard-action.js","../node_modules/tiny-emitter/index.js","../node_modules/good-listener/src/is.js","../node_modules/delegate/src/closest.js","../node_modules/delegate/src/delegate.js","../node_modules/good-listener/src/listen.js","../node_modules/clipboard/lib/clipboard.js","../src/smartguide/SmartGuide.js","../src/eastereggs/InkImporter.js","../src/Editor.js","../src/EditorFacade.js","../src/myscript.js"],"sourcesContent":["/**\n * @typedef {Object} Constants\n */\n\nconst Constants = {\n  EventType: {\n    IDLE: 'idle',\n    CHANGED: 'changed',\n    IMPORTED: 'imported',\n    EXPORTED: 'exported',\n    CONVERTED: 'converted',\n    RENDERED: 'rendered', // Internal use only\n    LOADED: 'loaded',\n    UNDO: 'undo',\n    REDO: 'redo',\n    CLEAR: 'clear',\n    IMPORT: 'import',\n    SUPPORTED_IMPORT_MIMETYPES: 'supportedImportMimeTypes',\n    EXPORT: 'export',\n    CONVERT: 'convert',\n    ERROR: 'error'\n  },\n  RecognitionType: {\n    TEXT: 'TEXT',\n    MATH: 'MATH',\n    SHAPE: 'SHAPE',\n    MUSIC: 'MUSIC',\n    ANALYZER: 'ANALYZER',\n    DIAGRAM: 'DIAGRAM',\n    NEBO: 'NEBO',\n    RAWCONTENT: 'Raw Content'\n  },\n  Protocol: {\n    WEBSOCKET: 'WEBSOCKET',\n    REST: 'REST'\n  },\n  ModelState: {\n    INITIALIZING: 'INITIALIZING',\n    INITIALIZED: 'INITIALIZED',\n    EXPORTING: 'EXPORTING',\n    EXPORTED: 'EXPORTED',\n    PENDING: 'PENDING',\n    MODIFIED: 'MODIFIED',\n    ERROR: 'ERROR'\n  },\n  Trigger: {\n    QUIET_PERIOD: 'QUIET_PERIOD',\n    POINTER_UP: 'POINTER_UP',\n    DEMAND: 'DEMAND'\n  },\n  Logger: {\n    EDITOR: 'editor',\n    MODEL: 'model',\n    GRABBER: 'grabber',\n    RENDERER: 'renderer',\n    RECOGNIZER: 'recognizer',\n    CALLBACK: 'callback',\n    UTIL: 'util',\n    SMARTGUIDE: 'smartguide'\n  },\n  LogLevel: {\n    TRACE: 'TRACE',\n    DEBUG: 'DEBUG',\n    INFO: 'INFO',\n    WARN: 'WARN',\n    ERROR: 'ERROR'\n  },\n  Languages: {\n    zh_CN: 'Noto Sans CJK tc',\n    zh_HK: 'Noto Sans CJK tc',\n    zh_TW: 'Noto Sans CJK tc',\n    ko_KR: 'Noto Sans CJK kr',\n    ja_JP: 'Noto Sans CJK jp',\n    hy_AM: 'Noto Sans Armenian',\n    default: 'Open Sans'\n  },\n  Error: {\n    NOT_REACHABLE: 'MyScript recognition server is not reachable. Please reload once you are connected.',\n    WRONG_CREDENTIALS: 'Application credentials are invalid. Please check or regenerate your application key and hmackey.',\n    TOO_OLD: 'Session is too old. Max Session Duration Reached.'\n  },\n  Exports: {\n    JIIX: 'application/vnd.myscript.jiix'\n  }\n};\nexport default Constants;\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    return defaultLogger;\n}));\n","import * as loglevel from 'loglevel';\nimport Constants from './Constants';\n\n/**\n * Main log instance\n * @type {Object}\n */\nconst log = loglevel.noConflict();\nexport default log;\n\n/**\n * Log editor events\n * @type {Object}\n */\nexport const editorLogger = log.getLogger(Constants.Logger.EDITOR);\neditorLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log editor events\n * @type {Object}\n */\nexport const smartGuideLogger = log.getLogger(Constants.Logger.SMARTGUIDE);\neditorLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log model events\n * @type {Object}\n */\nexport const modelLogger = log.getLogger(Constants.Logger.MODEL);\nmodelLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log grabber events\n * @type {Object}\n */\nexport const grabberLogger = log.getLogger(Constants.Logger.GRABBER);\ngrabberLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log grabber events\n * @type {Object}\n */\nexport const rendererLogger = log.getLogger(Constants.Logger.RENDERER);\nrendererLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log recognizer events\n * @type {Object}\n */\nexport const recognizerLogger = log.getLogger(Constants.Logger.RECOGNIZER);\nrecognizerLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log callback events\n * @type {Object}\n */\nexport const callbackLogger = log.getLogger(Constants.Logger.CALLBACK);\ncallbackLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log util events\n * @type {Object}\n */\nexport const utilLogger = log.getLogger(Constants.Logger.UTIL);\nutilLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log tests events\n * @type {Object}\n */\nexport const testLogger = log.getLogger('test');\ntestLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n","/*!\n * is-primitive <https://github.com/jonschlinkert/is-primitive>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\n// see http://jsperf.com/testing-value-is-primitive/7\nmodule.exports = function isPrimitive(value) {\n  return value == null || (typeof value !== 'function' && typeof value !== 'object');\n};\n","/*!\n * assign-symbols <https://github.com/jonschlinkert/assign-symbols>\n *\n * Copyright (c) 2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(receiver, objects) {\n  if (receiver === null || typeof receiver === 'undefined') {\n    throw new TypeError('expected first argument to be an object.');\n  }\n\n  if (typeof objects === 'undefined' || typeof Symbol === 'undefined') {\n    return receiver;\n  }\n\n  if (typeof Object.getOwnPropertySymbols !== 'function') {\n    return receiver;\n  }\n\n  var isEnumerable = Object.prototype.propertyIsEnumerable;\n  var target = Object(receiver);\n  var len = arguments.length, i = 0;\n\n  while (++i < len) {\n    var provider = Object(arguments[i]);\n    var names = Object.getOwnPropertySymbols(provider);\n\n    for (var j = 0; j < names.length; j++) {\n      var key = names[j];\n\n      if (isEnumerable.call(provider, key)) {\n        target[key] = provider[key];\n      }\n    }\n  }\n  return target;\n};\n","var toString = Object.prototype.toString;\n\n/**\n * Get the native `typeof` a value.\n *\n * @param  {*} `val`\n * @return {*} Native javascript type\n */\n\nmodule.exports = function kindOf(val) {\n  var type = typeof val;\n\n  // primitivies\n  if (type === 'undefined') {\n    return 'undefined';\n  }\n  if (val === null) {\n    return 'null';\n  }\n  if (val === true || val === false || val instanceof Boolean) {\n    return 'boolean';\n  }\n  if (type === 'string' || val instanceof String) {\n    return 'string';\n  }\n  if (type === 'number' || val instanceof Number) {\n    return 'number';\n  }\n\n  // functions\n  if (type === 'function' || val instanceof Function) {\n    if (typeof val.constructor.name !== 'undefined' && val.constructor.name.slice(0, 9) === 'Generator') {\n      return 'generatorfunction';\n    }\n    return 'function';\n  }\n\n  // array\n  if (typeof Array.isArray !== 'undefined' && Array.isArray(val)) {\n    return 'array';\n  }\n\n  // check for instances of RegExp and Date before calling `toString`\n  if (val instanceof RegExp) {\n    return 'regexp';\n  }\n  if (val instanceof Date) {\n    return 'date';\n  }\n\n  // other objects\n  type = toString.call(val);\n\n  if (type === '[object RegExp]') {\n    return 'regexp';\n  }\n  if (type === '[object Date]') {\n    return 'date';\n  }\n  if (type === '[object Arguments]') {\n    return 'arguments';\n  }\n  if (type === '[object Error]') {\n    return 'error';\n  }\n  if (type === '[object Promise]') {\n    return 'promise';\n  }\n\n  // buffer\n  if (isBuffer(val)) {\n    return 'buffer';\n  }\n\n  // es6: Map, WeakMap, Set, WeakSet\n  if (type === '[object Set]') {\n    return 'set';\n  }\n  if (type === '[object WeakSet]') {\n    return 'weakset';\n  }\n  if (type === '[object Map]') {\n    return 'map';\n  }\n  if (type === '[object WeakMap]') {\n    return 'weakmap';\n  }\n  if (type === '[object Symbol]') {\n    return 'symbol';\n  }\n  \n  if (type === '[object Map Iterator]') {\n    return 'mapiterator';\n  }\n  if (type === '[object Set Iterator]') {\n    return 'setiterator';\n  }\n  if (type === '[object String Iterator]') {\n    return 'stringiterator';\n  }\n  if (type === '[object Array Iterator]') {\n    return 'arrayiterator';\n  }\n  \n  // typed arrays\n  if (type === '[object Int8Array]') {\n    return 'int8array';\n  }\n  if (type === '[object Uint8Array]') {\n    return 'uint8array';\n  }\n  if (type === '[object Uint8ClampedArray]') {\n    return 'uint8clampedarray';\n  }\n  if (type === '[object Int16Array]') {\n    return 'int16array';\n  }\n  if (type === '[object Uint16Array]') {\n    return 'uint16array';\n  }\n  if (type === '[object Int32Array]') {\n    return 'int32array';\n  }\n  if (type === '[object Uint32Array]') {\n    return 'uint32array';\n  }\n  if (type === '[object Float32Array]') {\n    return 'float32array';\n  }\n  if (type === '[object Float64Array]') {\n    return 'float64array';\n  }\n\n  // must be a plain object\n  return 'object';\n};\n\n/**\n * If you need to support Safari 5-7 (8-10 yr-old browser),\n * take a look at https://github.com/feross/is-buffer\n */\n\nfunction isBuffer(val) {\n  return val.constructor\n    && typeof val.constructor.isBuffer === 'function'\n    && val.constructor.isBuffer(val);\n}\n","/*!\n * assign-deep <https://github.com/jonschlinkert/assign-deep>\n *\n * Copyright (c) 2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isPrimitive = require('is-primitive');\nvar assignSymbols = require('assign-symbols');\nvar typeOf = require('kind-of');\n\nfunction assign(target/*, objects*/) {\n  target = target || {};\n  var len = arguments.length, i = 0;\n  if (len === 1) {\n    return target;\n  }\n  while (++i < len) {\n    var val = arguments[i];\n    if (isPrimitive(target)) {\n      target = val;\n    }\n    if (isObject(val)) {\n      extend(target, val);\n    }\n  }\n  return target;\n}\n\n/**\n * Shallow extend\n */\n\nfunction extend(target, obj) {\n  assignSymbols(target, obj);\n\n  for (var key in obj) {\n    if (key !== '__proto__' && hasOwn(obj, key)) {\n      var val = obj[key];\n      if (isObject(val)) {\n        if (typeOf(target[key]) === 'undefined' && typeOf(val) === 'function') {\n          target[key] = val;\n        }\n        target[key] = assign(target[key] || {}, val);\n      } else {\n        target[key] = val;\n      }\n    }\n  }\n  return target;\n}\n\n/**\n * Returns true if the object is a plain object or a function.\n */\n\nfunction isObject(obj) {\n  return typeOf(obj) === 'object' || typeOf(obj) === 'function';\n}\n\n/**\n * Returns true if the given `key` is an own property of `obj`.\n */\n\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n/**\n * Expose `assign`\n */\n\nmodule.exports = assign;\n","import assign from 'assign-deep';\nimport { editorLogger as logger } from './LoggerConfig';\n\n\n/**\n * Default configuration\n * @type {Configuration}\n * See https://developer.myscript.com/docs/interactive-ink/latest/reference/web/configuration/ for a full documentation of parameters.\n */\nconst defaultConfiguration = {\n  recognitionParams: {\n    type: 'TEXT',\n    protocol: 'WEBSOCKET',\n    apiVersion: 'V4',\n    server: {\n      scheme: 'https',\n      host: 'cloud.myscript.com',\n      applicationKey: undefined,\n      hmacKey: undefined,\n      useWindowLocation: false,\n      websocket: {\n        pingEnabled: true,\n        pingDelay: 30000,\n        maxPingLostCount: 10,\n        autoReconnect: true,\n        maxRetryCount: 2,\n        fileChunkSize: 300000\n      }\n    },\n    v4: {\n      alwaysConnected: true,\n      lang: 'en_US',\n      export: {\n        'image-resolution': 300,\n        jiix: {\n          'bounding-box': false,\n          strokes: false,\n          text: {\n            chars: false,\n            words: true\n          }\n        }\n      },\n      renderer: {\n        debug: {\n          'draw-text-boxes': false,\n          'draw-image-boxes': false\n        }\n      },\n      math: {\n        mimeTypes: ['application/x-latex', 'application/mathml+xml'],\n        solver: {\n          enable: true,\n          'fractional-part-digits': 3,\n          'decimal-separator': '.',\n          'rounding-mode': 'half up',\n          'angle-unit': 'deg'\n        },\n        margin: {\n          bottom: 10,\n          left: 15,\n          right: 15,\n          top: 10\n        }\n      },\n      text: {\n        guides: {\n          enable: true\n        },\n        smartGuide: true,\n        smartGuideFadeOut: {\n          enable: false,\n          duration: 10000\n        },\n        mimeTypes: ['text/plain', 'application/vnd.myscript.jiix'],\n        margin: {\n          top: 20,\n          left: 10,\n          right: 10\n        }\n      },\n      diagram: {\n        mimeTypes: ['application/vnd.myscript.jiix'],\n        margin: {\n          bottom: 10,\n          left: 15,\n          right: 15,\n          top: 10\n        }\n      },\n      'raw-content': {\n        recognition: {\n          text: false,\n          shape: false\n        }\n      }\n    },\n    v3: {\n      mathParameter: {\n        resultTypes: ['LATEX', 'MATHML'],\n        columnarOperation: false,\n        userResources: [],\n        scratchOutDetectionSensitivity: 1,\n      },\n      textParameter: {\n        language: 'en_US',\n        textInputMode: 'CURSIVE',\n        resultDetail: 'TEXT',\n        contentTypes: [],\n        subsetKnowledges: [],\n        userLkWords: [],\n        userResources: [],\n        textProperties: {\n          textCandidateListSize: 1,\n          wordCandidateListSize: undefined,\n          wordPredictionListSize: 0,\n          wordCompletionListSize: 0,\n          characterCandidateListSize: undefined,\n          enableOutOfLexicon: false,\n          discardCaseVariations: false,\n          discardAccentuationVariations: false,\n          glyphDistortion: undefined,\n          enableTagger: false,\n          spellingDistortion: undefined\n        }\n      },\n      shapeParameter: {\n        userResources: undefined,\n        rejectDetectionSensitivity: 1,\n        doBeautification: true\n      },\n      musicParameter: {\n        divisions: 480,\n        resultTypes: ['MUSICXML', 'SCORETREE'],\n        userResources: [],\n        staff: {\n          top: 100,\n          count: 5,\n          gap: 20\n        },\n        clef: {\n          symbol: 'G',\n          octave: 0,\n          line: 2\n        },\n        scratchOutDetectionSensitivity: 1\n      },\n      analyzerParameter: {\n        textParameter: {\n          textProperties: {},\n          language: 'en_US',\n          textInputMode: 'CURSIVE'\n        },\n        coordinateResolution: undefined\n      }\n    }\n  },\n  // @see generated documentation on top\n  listenerOptions: {\n    capture: false,\n    passive: true\n  },\n  undoRedoMaxStackSize: 20,\n  xyFloatPrecision: 0,\n  timestampFloatPrecision: 0,\n  triggerDelay: 2000,\n  processDelay: 0,\n  resizeTriggerDelay: 200,\n  // Configure when the action is triggered.\n  // POINTER_UP : Action is triggered on every PenUP. This is the recommended mode for CDK V3 WebSocket recognitions.\n  // QUIET_PERIOD : Action is triggered after a quiet period in milli-seconds on every pointer up. I value is set to 2000 for example the recognition will be fired  when user stop writing 2 seconds. This is the recommended mode for all REST recognitions.\n  triggers: {\n    exportContent: 'POINTER_UP',\n    addStrokes: 'POINTER_UP'\n  },\n  restConversionState: '',\n  renderingParams: {\n    stroker: 'quadratic',\n    minHeight: 100,\n    minWidth: 100\n  }\n};\n\n/**\n * Generate parameters\n * @param {Configuration} configuration Configuration to be used\n * @return {Configuration} Overridden configuration\n */\nexport function overrideDefaultConfiguration(configuration) {\n  const confRef = configuration;\n  let currentConfiguration;\n  if (confRef && confRef.recognitionParams.server && confRef.recognitionParams.server.useWindowLocation) {\n    confRef.recognitionParams.server.scheme = window.location.protocol.slice(0, -1);\n    confRef.recognitionParams.server.host = window.location.host;\n    currentConfiguration = assign({}, defaultConfiguration, confRef === undefined ? {} : confRef);\n  } else {\n    currentConfiguration = assign({}, defaultConfiguration, configuration === undefined ? {} : configuration);\n  }\n  logger.debug('Override default configuration', currentConfiguration);\n  return currentConfiguration;\n}\n\nexport default defaultConfiguration;\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.JsonCSS=e():t.JsonCSS=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=1)}([function(t,e,n){\"use strict\";function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=function t(e){var n=this;o(this,t),this.toJSON=function(t){if(\"string\"!=typeof t)return console.error(\"Need a CSS string but given \",void 0===t?\"undefined\":r(t),t),\"Not a valid CSS..!\";var e={},o=void 0,i=void 0,u=void 0;try{t.split(\"{\").forEach(function(t){if(i=t.trim())if(-1===i.indexOf(\"}\"))e[i]={},o=i;else{i.substring(0,i.indexOf(\"}\")).split(\";\").forEach(function(t){(u=t.split(\":\"))&&2===u.length&&(e[o][u[0].trim().replace(/^\\\"|\\\"$/g,\"\")]=n._trimSemiColon(u[1].trim().replace(/^\\\"|\\\"$/g,\"\")))});try{o=i.split(\"}\")[1].trim(),o&&(e[o]={})}catch(t){}}})}catch(t){return\"Not a valid CSS..!\"}return e},this.toCSS=function(t){if(\"object\"!==(void 0===t?\"undefined\":r(t)))return console.error(\"Need a JSON object but given \",void 0===t?\"undefined\":r(t),t),\"Not a valid JSON..!\";var e=\"\";try{for(var n in t)if(t.hasOwnProperty(n)){e+=n+\" {\\n\";for(var o in t[n])t[n].hasOwnProperty(o)&&(e+=o+\": \"+t[n][o]+\";\\n\");e+=\"}\\n\"}}catch(t){return\"Not a valid JSON..!\"}return e},this._trimSemiColon=function(t){return\";\"===t.slice(-1)?t.slice(0,n.length-1):t}};e.default=i},function(t,e,n){\"use strict\";t.exports=n(0).default}])});","import JsonCSS from 'json-css';\nimport assign from 'assign-deep';\nimport { editorLogger as logger } from './LoggerConfig';\n\n/**\n * @typedef {Object} PenStyle\n * @property {String} color=#000000 Color (supported formats rgb() rgba() hsl() hsla() #rgb #rgba #rrggbb #rrggbbaa)\n * @property {String} -myscript-pen-width=1 Width of strokes and primitives in mm (no other unit is supported yet)\n * @property {String} -myscript-pen-fill-style=none\n * @property {String} -myscript-pen-fill-color=#FFFFFF00 Color filled inside the area delimited by strokes and primitives\n */\n\n/**\n * Default style\n * @type {PenStyle}\n */\nconst defaultPenStyle = undefined;\nconst parser = new JsonCSS();\n\n/**\n * Generate style\n * @param {PenStyle} style Custom style to be applied\n * @return {PenStyle} Overridden style\n */\nexport function overrideDefaultPenStyle(style) {\n  const currentStyle = assign({}, defaultPenStyle, style === undefined ? {} : style);\n  logger.debug('Override default pen style', currentStyle);\n  return currentStyle;\n}\n\nexport function toCSS(penStyle) { // FIXME Ugly hack to parse JSON to CSS inline\n  const css = parser.toCSS({ css: penStyle });\n  return css.substring(6, css.length - 3);\n}\n\nexport function toJSON(penStyle) { // FIXME Ugly hack to parse CSS inline to JSON\n  return parser.toJSON(`css {${penStyle}}`).css;\n}\n\nexport default defaultPenStyle;\n","import JsonCSS from 'json-css';\nimport assign from 'assign-deep';\nimport { editorLogger as logger } from './LoggerConfig';\n\n/**\n * @typedef {PenStyle} InkTheme\n */\n/**\n * @typedef {Object} MathTheme\n * @property {String} font-family=STIXGeneral Font-family to be used\n */\n/**\n * @typedef {Object} GeneratedTheme\n * @property {String} font-family=STIXGeneral Font-family to be used\n * @property {String} color=#A8A8A8FF Color to be used\n */\n/**\n * @typedef {Object} TextTheme\n * @property {String} font-family=OpenSans Font-family to be used\n * @property {Number} font-size=10 Font-size to be used\n */\n/**\n * @typedef {Object} Theme\n * @property {InkTheme} ink General settings\n * @property {MathTheme} .math Math theme\n * @property {GeneratedTheme} .math-solver Theme to be used for generated items\n * @property {TextTheme} .text Text theme\n */\n\n/**\n * Default theme\n * @type {Theme}\n */\nconst defaultTheme = {\n  ink: {\n    color: '#000000',\n    '-myscript-pen-width': 1,\n    '-myscript-pen-fill-style': 'none',\n    '-myscript-pen-fill-color': '#FFFFFF00'\n  },\n  '.math': {\n    'font-family': 'STIXGeneral'\n  },\n  '.math-solved': {\n    'font-family': 'STIXGeneral',\n    color: '#A8A8A8FF'\n  },\n  '.text': {\n    'font-family': 'Open Sans',\n    'font-size': 10\n  }\n};\nconst parser = new JsonCSS();\n\n/**\n * Generate theme\n * @param {Theme} theme Custom theme to be applied\n * @return {Theme} Overridden theme\n */\nexport function overrideDefaultTheme(theme) {\n  const currentTheme = assign({}, defaultTheme, theme === undefined ? {} : theme);\n  logger.debug('Override default theme', currentTheme);\n  return currentTheme;\n}\n\nexport function toCSS(theme) {\n  return parser.toCSS(theme);\n}\n\nexport function toJSON(theme) {\n  return parser.toJSON(theme);\n}\n\nexport default defaultTheme;\n","import { grabberLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Grab pointerDown, pointerMove and pointerUp events\n * @typedef {Object} Grabber\n * @property {function(element: Element, editor: Editor): GrabberContext} attach Attach events and decide when to call editor pointerDown/Move/Up methods\n * @property {function(element: Element, context: GrabberContext)} detach Detach the grabber\n */\n\n/**\n * Grabber listener\n * @typedef {Object} GrabberListener\n * @property {Array<String>} types Event types to listen\n * @property {function(event: Event)} listener Event listener for these events\n */\n\n/**\n * Grabber context\n * @typedef {Object} GrabberContext\n * @property {Boolean|Object} options Options object that specifies characteristics about the event listener. (@see addEventListener.options for detail)\n * @property {Array<GrabberListener>} listeners Registered listeners\n */\n\nconst floatPrecisionArray = [1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000];\n\nfunction roundFloat(oneFloat, requestedFloatPrecision) {\n  if (requestedFloatPrecision || requestedFloatPrecision === 0) {\n    let floatPrecision;\n    if (requestedFloatPrecision > 10) {\n      floatPrecision = floatPrecisionArray[10];\n    } else {\n      floatPrecision = floatPrecisionArray[requestedFloatPrecision];\n    }\n    return Math.round(oneFloat * floatPrecision) / floatPrecision;\n  }\n  return oneFloat;\n}\n\nfunction extractPoint(event, domElement, configuration, offsetTop = 0, offsetLeft = 0) {\n  let eventRef = event;\n  if (eventRef.changedTouches) {\n    eventRef = eventRef.changedTouches[0];\n  }\n  const rect = domElement.getBoundingClientRect();\n  return {\n    x: roundFloat(eventRef.clientX - rect.left - domElement.clientLeft - offsetLeft, configuration.xyFloatPrecision),\n    y: roundFloat(eventRef.clientY - rect.top - domElement.clientTop - offsetTop, configuration.xyFloatPrecision),\n    t: roundFloat(Date.now(), configuration.timestampFloatPrecision)\n  };\n}\n\n/**\n * Listen for the desired events\n * @param {Element} element DOM element to attach events listeners\n * @param {Editor} editor Editor to received down/move/up events\n * @param {Number} [offsetTop=0]\n * @param {Number} [offsetLeft=0]\n * @return {GrabberContext} Grabber context\n * @listens {Event} pointermove: a pointer moves, similar to touchmove or mousemove.\n * @listens {Event} pointerdown: a pointer is activated, or a device button held.\n * @listens {Event} pointerup: a pointer is deactivated, or a device button released.\n * @listens {Event} pointerover: a pointer has moved onto an element.\n * @listens {Event} pointerout: a pointer is no longer on an element it once was.\n * @listens {Event} pointerenter: a pointer enters the bounding box of an element.\n * @listens {Event} pointerleave: a pointer leaves the bounding box of an element.\n * @listens {Event} pointercancel: a pointer will no longer generate events.\n */\nexport function attach(element, editor, offsetTop = 0, offsetLeft = 0) {\n  let mMaxDiffX = 0;\n\n  function unfocus() {\n    if (window.getSelection().type !== 'None') {\n      window.getSelection().removeAllRanges();\n    }\n  }\n\n  function hideMenu(evt) {\n    const moreMenuInDocument = document.querySelector('.more-menu');\n    if (!evt.target.classList.contains('ellipsis') && !evt.target.classList.contains('more-menu') && !evt.target.classList.contains('options-label-button') && moreMenuInDocument && moreMenuInDocument.style.display !== 'none') {\n      moreMenuInDocument.style.display = 'none';\n      return true;\n    }\n    return false;\n  }\n\n  function hideCandidates(evt) {\n    const candidatesInDocument = document.querySelector('.candidates');\n    if (!evt.target.classList.contains('candidates') && !(evt.target.tagName === 'SPAN') && candidatesInDocument && candidatesInDocument.style.display !== 'none') {\n      candidatesInDocument.style.display = 'none';\n      return true;\n    }\n    return false;\n  }\n\n  function pointerDownHandler(evt) { // Trigger a pointerDown\n    const pointerDownOnEditor = evt.target.id === editor.domElement.id || evt.target.classList.contains('ms-canvas');\n    if (this.activePointerId !== undefined) {\n      if (this.activePointerId === evt.pointerId) {\n        logger.trace(`${evt.type} event with the same id without any pointer up`, evt.pointerId);\n      }\n    } else if ((evt.button !== 2) && (evt.buttons !== 2) && pointerDownOnEditor) { // Ignore right click\n      if (!hideMenu(evt) && !hideCandidates(evt)) {\n        this.activePointerId = evt.pointerId;\n        // Hack for iOS 9 Safari : pointerId has to be int so -1 if > max value\n        const pointerId = evt.pointerId > 2147483647 ? -1 : evt.pointerId;\n        unfocus();\n        evt.stopPropagation();\n        editor.pointerDown(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft), evt.pointerType, pointerId);\n      }\n    } else if (evt.target.classList.contains('ellipsis') || evt.target.classList.contains('tag-icon')) {\n      hideMenu(evt);\n      hideCandidates(evt);\n    } else { // FIXME add more complete verification to pointer down on smartguide\n      hideMenu(evt);\n      hideCandidates(evt);\n      this.smartGuidePointerDown = true;\n      this.downSmartGuidePoint = extractPoint(evt, element, editor.configuration);\n    }\n  }\n\n  function pointerMoveHandler(evt) { // Trigger a pointerMove\n    // Only considering the active pointer\n    if (this.activePointerId !== undefined && this.activePointerId === evt.pointerId) {\n      unfocus();\n      editor.pointerMove(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft));\n    } else if (this.smartGuidePointerDown) {\n      const point = extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft);\n      const diffX = Math.abs(this.downSmartGuidePoint.x - point.x);\n      const diffY = Math.abs(this.downSmartGuidePoint.y - point.y);\n      mMaxDiffX = Math.max(diffX, mMaxDiffX);\n      const cond1 = diffX < 5 && diffY > 5 && mMaxDiffX < 15;\n      const cond2 = diffX > 5 && diffY > 5 && mMaxDiffX < 15;\n      if (cond1 || cond2) {\n        this.activePointerId = evt.pointerId;\n        // Hack for iOS 9 Safari : pointerId has to be int so -1 if > max value\n        const pointerId = evt.pointerId > 2147483647 ? -1 : evt.pointerId;\n        unfocus();\n        editor.pointerDown(this.downSmartGuidePoint, evt.pointerType, pointerId);\n      }\n    } else {\n      logger.trace(`${evt.type} event from another pointerid (${evt.pointerId})`, this.activePointerId);\n    }\n  }\n\n  function pointerUpHandler(evt) { // Trigger a pointerUp\n    mMaxDiffX = 0;\n    this.smartGuidePointerDown = false;\n    const smartGuideIds = ['smartguide', 'prompter-text-container', 'prompter-text', 'tag-icon', 'ellipsis'];\n    const scrollbarClasses = ['ps__rail-x', 'ps__thumb-x'];\n    // Check if pointer entered into any smartguide elements or scrollbar\n    // Use case : when the pointer is entering the smartguide or scrollbar, a pointerout (or leave) is fired.\n    // The related target is then the DOM element that was left.\n    // We don't want this to cause editor.pointerUp because the stroke isn't finished.\n    const pointerEnteredSmartGuide = evt.relatedTarget && (smartGuideIds.includes(evt.relatedTarget.className) || scrollbarClasses.includes(evt.relatedTarget.className));\n    // Check if pointer didn't stay in the smartguide and pointer exited the smartguide or scrollbar\n    // Use case : when the pointer is leaving the smartguide or scrollbar, a pointerout (or leave) is fired.\n    // The related target is then the DOM element that was left (the smart guide)\n    // We are entering again the editor\n    // We don't want this to cause editor.pointerUp because the stroke isn't finished.\n    const pointerExitedSmartGuide = evt.relatedTarget && evt.target && (smartGuideIds.includes(evt.target.className) || scrollbarClasses.includes(evt.target.className));\n    // Check if pointer moved between words in smartguide\n    // Same use case as pointerEnteredSmartGuide but for the words in the smartguide (each word is a span).\n    const pointerMovedWords = evt.relatedTarget && evt.target && (evt.target.tagName === 'SPAN' || evt.relatedTarget.tagName === 'SPAN');\n    if (pointerEnteredSmartGuide || pointerExitedSmartGuide || pointerMovedWords) {\n      evt.stopPropagation();\n    } else if (this.activePointerId !== undefined && this.activePointerId === evt.pointerId) { // Only considering the active pointer\n      this.activePointerId = undefined; // Managing the active pointer\n      evt.stopPropagation();\n      editor.pointerUp(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft));\n    } else {\n      logger.trace(`${evt.type} event from another pointerid (${evt.pointerId})`, this.activePointerId);\n    }\n  }\n\n  const context = {\n    options: editor.configuration.listenerOptions,\n    listeners: [{\n      types: ['pointerdown'],\n      listener: pointerDownHandler\n    }, {\n      types: ['pointermove'],\n      listener: pointerMoveHandler\n    }, {\n      types: ['pointerup', 'pointerout', 'pointerleave', 'pointercancel'],\n      listener: pointerUpHandler\n    }]\n  };\n\n  logger.debug('attaching listeners', context);\n  context.listeners.forEach((item) => {\n    item.types.forEach(type => element.addEventListener(type, item.listener, context.options));\n  });\n  return context;\n}\n\nexport function detach(element, context) {\n  logger.debug('detaching listeners', context);\n  context.listeners.forEach((item) => {\n    item.types.forEach(type => element.removeEventListener(type, item.listener, context.options));\n  });\n}\n","/**\n * Draw a stroke symbol\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Stroke to be drawn\n * @param {Stroker} stroker Stroker to use to render a stroke\n */\nexport function drawStroke(context, stroke, stroker) {\n  if (stroker) {\n    stroker.drawStroke(context, stroke);\n  }\n}\n","import { rendererLogger as logger } from '../../../configuration/LoggerConfig';\n\n/**\n * @type {{table: String, shape: String, recognizedShape: String, ellipse: String, line: String}}\n */\nexport const ShapeSymbols = {\n  table: 'table',\n  shape: 'shape',\n  recognizedShape: 'recognizedShape',\n  ellipse: 'ellipse',\n  line: 'line'\n};\n\nfunction phi(angle) {\n  let returnedAngle = ((angle + Math.PI) % (Math.PI * 2)) - Math.PI;\n  if (returnedAngle < -Math.PI) {\n    returnedAngle += Math.PI * 2;\n  }\n  return returnedAngle;\n}\n\nfunction drawEllipseArc(context, centerPoint, maxRadius, minRadius, orientation, startAngle, sweepAngle) {\n  const angleStep = 0.02; // angle delta between interpolated\n\n  let z1 = Math.cos(orientation);\n  let z3 = Math.sin(orientation);\n  let z2 = z1;\n  let z4 = z3;\n  z1 *= maxRadius;\n  z2 *= minRadius;\n  z3 *= maxRadius;\n  z4 *= minRadius;\n\n  const n = Math.floor(Math.abs(sweepAngle) / angleStep);\n\n  const boundariesPoints = [];\n\n  context.save();\n  try {\n    context.beginPath();\n\n    for (let i = 0; i <= n; i++) {\n      const angle = startAngle + ((i / n) * sweepAngle); // points on the arc, in radian\n      const alpha = Math.atan2(Math.sin(angle) / minRadius, Math.cos(angle) / maxRadius);\n\n      const cosAlpha = Math.cos(alpha);\n      const sinAlpha = Math.sin(alpha);\n\n      // current point\n      const x = (centerPoint.x + (z1 * cosAlpha)) - (z4 * sinAlpha);\n      const y = (centerPoint.y + (z2 * sinAlpha)) + (z3 * cosAlpha);\n      if (i === 0) {\n        context.moveTo(x, y);\n      } else {\n        context.lineTo(x, y);\n      }\n\n      if (i === 0 || i === n) {\n        boundariesPoints.push({ x, y });\n      }\n    }\n\n    context.stroke();\n  } finally {\n    context.restore();\n  }\n\n  return boundariesPoints;\n}\n\nfunction drawArrowHead(context, headPoint, angle, length) {\n  const alpha = phi(angle + (Math.PI * (7 / 8)));\n  const beta = phi(angle - (Math.PI * (7 / 8)));\n\n  const contextReference = context;\n  contextReference.save();\n  try {\n    contextReference.fillStyle = contextReference.strokeStyle;\n\n    contextReference.moveTo(headPoint.x, headPoint.y);\n    contextReference.beginPath();\n    contextReference.lineTo(headPoint.x + (length * Math.cos(alpha)), headPoint.y + (length * Math.sin(alpha)));\n    contextReference.lineTo(headPoint.x + (length * Math.cos(beta)), headPoint.y + (length * Math.sin(beta)));\n    contextReference.lineTo(headPoint.x, headPoint.y);\n    contextReference.fill();\n  } finally {\n    contextReference.restore();\n  }\n}\n\nfunction drawShapeEllipse(context, shapeEllipse) {\n  const points = drawEllipseArc(\n    context,\n    shapeEllipse.center,\n    shapeEllipse.maxRadius,\n    shapeEllipse.minRadius,\n    shapeEllipse.orientation,\n    shapeEllipse.startAngle,\n    shapeEllipse.sweepAngle);\n\n  if (shapeEllipse.beginDecoration && shapeEllipse.beginDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, points[0], shapeEllipse.beginTangentAngle, 12.0);\n  }\n  if (shapeEllipse.endDecoration && shapeEllipse.endDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, points[1], shapeEllipse.endTangentAngle, 12.0);\n  }\n}\n\n/**\n * Draw a line\n * @param {Object} context Current rendering context\n * @param {{x: Number, y: Number}} p1 Origin point\n * @param {{x: Number, y: Number}} p2 Destination point\n */\nexport function drawLine(context, p1, p2) {\n  context.save();\n  try {\n    context.beginPath();\n    context.moveTo(p1.x, p1.y);\n    context.lineTo(p2.x, p2.y);\n    context.stroke();\n  } finally {\n    context.restore();\n  }\n}\n\nfunction drawShapeLine(context, shapeLine) {\n  drawLine(context, shapeLine.firstPoint, shapeLine.lastPoint);\n  if (shapeLine.beginDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, shapeLine.firstPoint, shapeLine.beginTangentAngle, 12.0);\n  }\n  if (shapeLine.endDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, shapeLine.lastPoint, shapeLine.endTangentAngle, 12.0);\n  }\n}\n\n/**\n * Draw a shape symbol\n * @param {Object} context Current rendering context\n * @param {Object} symbol Symbol to draw\n */\nexport function drawShapeSymbol(context, symbol) {\n  logger.debug(`draw ${symbol.type} symbol`);\n  const contextReference = context;\n  contextReference.save();\n  try {\n    contextReference.lineWidth = symbol.width;\n    contextReference.strokeStyle = symbol.color;\n\n    if (symbol.elementType) {\n      switch (symbol.elementType) {\n        case ShapeSymbols.shape:\n          drawShapeSymbol(contextReference, symbol.candidates[symbol.selectedCandidateIndex]);\n          break;\n        case ShapeSymbols.table:\n          symbol.lines.forEach(line => drawShapeSymbol(contextReference, line));\n          break;\n        case ShapeSymbols.line:\n          drawLine(contextReference, symbol.data.p1, symbol.data.p2);\n          break;\n        default:\n          logger.error(`${symbol.elementType} not implemented`);\n          break;\n      }\n    } else {\n      switch (symbol.type) {\n        case ShapeSymbols.ellipse:\n          drawShapeEllipse(contextReference, symbol);\n          break;\n        case ShapeSymbols.line:\n          drawShapeLine(contextReference, symbol);\n          break;\n        case ShapeSymbols.recognizedShape:\n          symbol.primitives.forEach(primitive => drawShapeSymbol(contextReference, primitive));\n          break;\n        default:\n          logger.error(`${symbol.type} not implemented`);\n          break;\n      }\n    }\n  } finally {\n    contextReference.restore();\n  }\n}\n","import { rendererLogger as logger } from '../../../configuration/LoggerConfig';\nimport { drawLine } from './ShapeSymbolCanvasRenderer';\n\n/**\n * @type {{inputCharacter: String, char: String, string: String, textLine: String}}\n */\nexport const TextSymbols = {\n  inputCharacter: 'inputCharacter',\n  char: 'char',\n  string: 'string',\n  textLine: 'textLine'\n};\n\nfunction drawUnderline(context, underline, label, data) {\n  const delta = data.width / label.length;\n  const p1 = {\n    x: data.topLeftPoint.x + (underline.data.firstCharacter * delta),\n    y: data.topLeftPoint.y + data.height\n  };\n  const p2 = {\n    x: data.topLeftPoint.x + (underline.data.lastCharacter * delta),\n    y: data.topLeftPoint.y + data.height\n  };\n  drawLine(context, p1, p2);\n}\n\nfunction drawText(context, label, data) {\n  const contextReference = context;\n  contextReference.save();\n  try {\n    contextReference.font = `${data.textHeight}px serif`;\n    contextReference.textAlign = (data.justificationType === 'CENTER') ? 'center' : 'left';\n    contextReference.textBaseline = 'bottom';\n    contextReference.fillStyle = contextReference.strokeStyle;\n    contextReference.fillText(label, data.topLeftPoint.x, (data.topLeftPoint.y + data.height));\n  } finally {\n    contextReference.restore();\n  }\n}\n\nfunction drawTextLine(context, textLine) {\n  drawText(context, textLine.label, textLine.data);\n  textLine.underlineList.forEach((underline) => {\n    drawUnderline(context, underline, textLine.label, textLine.data);\n  });\n}\n\n/**\n * Draw a text symbol\n * @param {Object} context Current rendering context\n * @param {Object} symbol Symbol to draw\n */\nexport function drawTextSymbol(context, symbol) {\n  logger.debug(`draw ${symbol.type} symbol`);\n  const contextReference = context;\n  contextReference.save();\n  try {\n    contextReference.lineWidth = symbol.width;\n    contextReference.strokeStyle = symbol.color;\n\n    if (symbol.elementType) {\n      switch (symbol.elementType) {\n        case TextSymbols.textLine:\n          drawTextLine(contextReference, symbol);\n          break;\n        default:\n          logger.error(`${symbol.elementType} not implemented`);\n          break;\n      }\n    } else {\n      switch (symbol.type) {\n        case TextSymbols.textLine:\n          drawTextLine(contextReference, symbol);\n          break;\n        default:\n          logger.error(`${symbol.type} not implemented`);\n      }\n    }\n  } finally {\n    contextReference.restore();\n  }\n}\n","import { rendererLogger as logger } from '../../../configuration/LoggerConfig';\nimport { drawLine } from './ShapeSymbolCanvasRenderer';\n\n/**\n * @type {{F: {svg: String, getBoundingBox: function}, C: {svg: String, getBoundingBox: function}, G: {svg: String, getBoundingBox: function}}}\n */\nexport const MusicClefs = { // constants was calculated from the svg image, so it should remains together\n  F: {\n    svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.0\" width=\"18\" height=\"20\"><g transform=\"translate(6.600000e-3,3.125356e-3)\"><path d=\"M17.3 3.1 C17.3 3.5 17.1 3.8 16.8 4.1 C16.5 4.4 15.9 4.5 15.5 4.3 C15 4.1 14.7 3.7 14.7 3.2 C14.6 2.8 14.8 2.5 15 2.2 C15.3 1.9 15.7 1.8 16 1.8 C16.4 1.8 16.8 2 17 2.3 C17.2 2.5 17.3 2.8 17.3 3.1 z\"/><path d=\"M17.3 8.9 C17.3 9.3 17.1 9.7 16.8 9.9 C16.5 10.3 15.9 10.3 15.5 10.2 C15 10 14.7 9.5 14.7 9.1 C14.6 8.7 14.8 8.3 15 8 C15.3 7.8 15.7 7.6 16 7.6 C16.5 7.7 17 8 17.2 8.4 C17.2 8.6 17.3 8.8 17.3 8.9 z\"/><path d=\"M13 7.2 C13 10 11.8 12.7 9.8 14.7 C7.3 17.2 4 18.8 0.7 19.8 C0.3 20.1 -0.4 19.8 0.3 19.4 C1.6 18.8 3 18.3 4.2 17.5 C7 15.8 9.3 13.1 9.8 9.9 C10.1 8 10.1 5.9 9.6 4 C9.2 2.6 8.2 1.1 6.7 0.9 C5.3 0.7 3.7 1.2 2.7 2.2 C2.5 2.4 2 3.2 2 4 C2.6 3.6 2.6 3.6 3.1 3.4 C4.2 2.9 5.7 3.6 6 4.9 C6.3 6 6.1 7.5 5 8.1 C3.8 8.7 2 8.5 1.4 7.2 C0.3 5.3 0.9 2.6 2.6 1.2 C4.4 -0.3 7.1 -0.3 9.2 0.4 C11.4 1.3 12.7 3.5 12.9 5.8 C13 6.2 13 6.7 13 7.2 z\"/></g></svg>',\n    getBoundingBox: (gap, xAnchor, yAnchor) => ({\n      height: gap * 3,\n      width: (gap * 3) * (18 / 20),\n      x: xAnchor,\n      y: yAnchor - gap\n    })\n  },\n  C: {\n    svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.0\" width=\"18\" height=\"25\"><g transform=\"matrix(1,0,0,1.030698,-309.364,-543.8647)\"><path d=\"M 325.9 546.8 C 325.8 548.7 324.7 550.7 322.8 551.5 C 321.1 552.1 319.1 552.2 317.6 551 C 316.6 550.2 316.2 548.4 317.3 547.5 C 318.3 546.5 320.4 547.4 320.3 548.9 C 320.7 549.9 318.5 550.5 319.7 551.3 C 321 551.6 322.3 550.5 322.6 549.3 C 323.1 547.5 323.1 545.6 322.7 543.8 C 322.4 542.9 321.9 541.5 320.7 541.9 C 319.2 542.2 318.3 543.8 317.9 545.1 C 317.6 543.2 316.4 541.5 315 540.2 C 315 544.1 315 548 315 551.9 L 314.1 551.9 C 314.1 543.9 314.1 535.7 314.1 527.7 L 315 527.7 C 315 531.5 315 535.5 315 539.4 C 316.4 538.1 317.6 536.4 317.8 534.5 C 318.3 535.9 319.3 537.5 321 537.8 C 322.2 537.8 322.5 536.3 322.8 535.4 C 323.1 533.7 323.1 531.8 322.6 530.1 C 322.2 529 320.9 528 319.6 528.3 C 318.6 529 320.6 529.6 320.3 530.6 C 320.5 532 318.8 533 317.6 532.3 C 316.3 531.6 316.4 529.7 317.4 528.8 C 318 528.1 319.3 527.7 320.3 527.7 C 321.2 527.7 321.8 527.7 322.6 528 C 324.6 528.7 325.7 530.7 325.9 532.7 C 326.2 534.9 324.9 537.3 322.8 538.2 C 321.5 538.7 319.9 538.3 318.8 537.3 C 318.7 538.3 318.2 539.2 317.7 539.9 C 318.1 540.6 318.6 541.8 318.8 542.1 C 320.1 540.9 322.5 540.8 323.8 542 C 325.2 543.1 326.1 545 325.9 546.8 z \"/></g><g transform=\"matrix(1,0,0,1.030928,-309.364,-543.9805)\"><path d=\"M 312.2 551.9 L 309.4 551.9 L 309.4 527.7 L 312.2 527.7 L 312.2 551.9 z \"/></g></svg>',\n    getBoundingBox: (gap, xAnchor, yAnchor) => ({\n      height: gap * 3,\n      width: (gap * 3) * (18 / 25),\n      x: xAnchor,\n      y: yAnchor - (gap * (3 / 2))\n    })\n  },\n  G: {\n    svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.0\" width=\"15\" height=\"40\"><g><path d=\"m 12 3.4 c 0.3 3.1 -2 5.6 -4.1 7.6 -0.9 0.9 -0.2 0.1 -0.6 0.6 -0.1 -0.5 -0.3 -1.7 -0.3 -2.1 0.1 -2.6 2.3 -6.5 4.2 -7.9 0.3 0.6 0.6 0.6 0.8 1.8 z m 0.7 15.9 c -1.2 -0.9 -2.8 -1.1 -4.3 -0.9 -0.2 -1.2 -0.4 -2.5 -0.6 -3.7 2.4 -2.3 4.9 -4.9 5 -8.4 0.1 -2.2 -0.3 -4.6 -1.7 -6.4 C 9.5 0.1 8.3 2.1 7.4 3.3 c -1.5 2.6 -1.1 5.8 -0.6 8.6 -0.8 0.9 -1.9 1.7 -2.7 2.7 -2.4 2.3 -4.4 5.3 -4 8.7 0.2 3.3 2.6 6.3 5.9 7.1 1.2 0.3 2.6 0.3 3.8 0.1 0.2 2.2 1 4.5 0.1 6.7 -0.7 1.6 -2.8 2.9 -4.3 2.2 -0.6 -0.3 -0.1 -0.1 -0.5 -0.2 1.1 -0.3 2 -1 2.3 -1.5 0.8 -1.4 -0.4 -3.6 -2.2 -3.3 -2.3 0 -3.2 3.1 -1.7 4.6 1.3 1.5 3.8 1.3 5.4 0.3 1.8 -1.2 2 -3.5 1.8 -5.5 -0.1 -0.7 -0.4 -2.6 -0.4 -3.3 0.7 -0.2 0.2 -0.1 1.2 -0.4 2.7 -1 4.4 -4.2 3.6 -7 -0.3 -1.4 -1 -2.9 -2.3 -3.7 z m 0.6 5.7 c 0.2 2 -1.1 4.2 -3.1 4.9 -0.1 -0.8 -0.2 -1 -0.3 -1.4 -0.5 -2.4 -0.7 -4.9 -1.1 -7.3 1.6 -0.2 3.5 0.5 4 2.1 0.2 0.6 0.3 1.2 0.4 1.8 z m -5.1 5.1 c -2.5 0.1 -5 -1.6 -5.6 -4 -0.7 -2.1 -0.5 -4.5 0.8 -6.4 1.1 -1.7 2.6 -3 4 -4.5 0.2 1.1 0.4 2.2 0.5 3.3 -3 0.8 -5 4.6 -3.2 7.3 0.5 0.8 2 2.2 2.8 1.6 -1.1 -0.7 -2 -1.8 -1.8 -3.2 -0.1 -1.3 1.4 -2.9 2.7 -3.1 0.4 2.8 0.9 6 1.4 8.8 -0.5 0.1 -1 0.1 -1.5 0.1 z\"/></g></svg>',\n    getBoundingBox: (gap, xAnchor, yAnchor) => ({\n      height: gap * (15 / 2),\n      width: (gap * (15 / 2)) * (15 / 40),\n      x: xAnchor,\n      y: yAnchor - (gap * (9 / 2))\n    })\n  }\n};\n\n/**\n * @type {{accidental: String, arpeggiate: String, bar: String, beam: String, clef: String, decoration: String, dots: String, head: String, ledgerLine: String, rest: String, staff: String, stem: String, tieOrSlur: String, timeSignature: String}}\n */\nexport const MusicSymbols = {\n  accidental: 'accidental',\n  arpeggiate: 'arpeggiate',\n  bar: 'bar',\n  beam: 'beam',\n  clef: 'clef',\n  decoration: 'decoration',\n  dots: 'dots',\n  head: 'head',\n  ledgerLine: 'ledgerLine',\n  rest: 'rest',\n  staff: 'staff',\n  stem: 'stem',\n  tieOrSlur: 'tieOrSlur',\n  timeSignature: 'timeSignature',\n};\n\nfunction createImage(clef, src) {\n  // eslint-disable-next-line no-undef\n  const browserDocument = document;\n  const img = browserDocument.createElement('img');\n  img.dataset.clef = clef;\n  img.src = src;\n  img.style.display = 'none';\n  return img;\n}\n\n/**\n * Retrieve music symbols elements\n * @return {Array<Element>} music symbols elements to attach\n */\nexport function getMusicClefElements() {\n  return Object.keys(MusicClefs)\n    .map(key => createImage(key, `data:image/svg+xml,${MusicClefs[key].svg}`));\n}\n\nfunction drawStaff(context, staff) {\n  for (let i = 0; i < staff.count; i++) {\n    const p1 = { x: 0, y: staff.top + (i * staff.gap) };\n    const p2 = { x: context.canvas.width, y: staff.top + (i * staff.gap) };\n    drawLine(context, p1, p2);\n  }\n}\n\nfunction drawClef(context, clef) {\n  // eslint-disable-next-line no-undef\n  context.drawImage(context.canvas.parentElement.querySelector(`img[data-clef=${clef.value.symbol}]`), clef.boundingBox.x, clef.boundingBox.y, clef.boundingBox.width, clef.boundingBox.height);\n}\n\n/**\n * Draw a music symbol\n * @param {Object} context Current rendering context\n * @param {Object} symbol Symbol to draw\n */\nexport function drawMusicSymbol(context, symbol) {\n  logger.debug(`draw ${symbol.type} symbol`);\n  switch (symbol.type) {\n    case MusicSymbols.clef:\n      drawClef(context, symbol);\n      break;\n    case MusicSymbols.staff:\n      drawStaff(context, symbol);\n      break;\n    default:\n      logger.error(`${symbol.type} not implemented`);\n  }\n}\n","import { modelLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Stroke symbol\n * @typedef {Object} Stroke\n * @property {String} type=stroke Symbol type, 'stroke' for stroke\n * @property {String} pointerType=undefined Pointer type\n * @property {Number} pointerId=undefined Pointer id\n * @property {Array<Number>} x=[] X coordinates\n * @property {Array<Number>} y=[] Y coordinates\n * @property {Array<Number>} t=[] Timestamps matching x,y coordinates\n * @property {Array<Number>} p=[] Pressure\n * @property {Array<Number>} l=[] Length from origin\n * @property {Number} width=0 (for rendering) Pen/brush width\n * @property {String} color=undefined (for rendering) Pen/brush color\n */\n\n/**\n * pointerEvents symbol\n * @typedef {Object} pointerEvents\n * @property {String} type=pointerEvents Symbol type, 'pointerEvents' for pointerEvents\n * @property {Boolean} processGestures=False indicates if the gestures have to be processed\n * @property {Array<Stroke>} events=[] the events to process\n */\n\nfunction computeDistance(x, y, xArray, yArray, lastIndexPoint) {\n  const distance = Math.sqrt(Math.pow((y - yArray[lastIndexPoint - 1]), 2) + Math.pow((x - xArray[lastIndexPoint - 1]), 2));\n  return isNaN(distance) ? 0 : distance;\n}\n\nfunction computeLength(x, y, xArray, yArray, lArray, lastIndexPoint) {\n  const length = lArray[lastIndexPoint - 1] + computeDistance(x, y, xArray, yArray, lastIndexPoint);\n  return isNaN(length) ? 0 : length;\n}\n\nfunction computePressure(x, y, xArray, yArray, lArray, lastIndexPoint) {\n  let ratio = 1.0;\n  const distance = computeDistance(x, y, xArray, yArray, lastIndexPoint);\n  const length = computeLength(x, y, xArray, yArray, lArray, lastIndexPoint);\n\n  if (length === 0) {\n    ratio = 0.5;\n  } else if (distance === length) {\n    ratio = 1.0;\n  } else if (distance < 10) {\n    ratio = 0.2 + Math.pow(0.1 * distance, 0.4);\n  } else if (distance > length - 10) {\n    ratio = 0.2 + Math.pow(0.1 * (length - distance), 0.4);\n  }\n  const pressure = ratio * Math.max(0.1, 1.0 - (0.1 * Math.sqrt(distance)));\n  return isNaN(parseFloat(pressure)) ? 0.5 : pressure;\n}\n\nfunction filterPointByAcquisitionDelta(x, y, xArray, yArray, width) {\n  const delta = (2 + (width / 4));\n  let ret = false;\n  if (xArray.length === 0 || yArray.length === 0 || Math.abs(xArray[xArray.length - 1] - x) >= delta || Math.abs(yArray[yArray.length - 1] - y) >= delta) {\n    ret = true;\n  }\n  return ret;\n}\n\n/**\n * Create a new stroke\n * @param {Object} properties Properties to be applied to the stroke.\n * @return {Stroke} New stroke with properties for quadratics draw\n */\nexport function createStrokeComponent(properties) {\n  const defaultStroke = {\n    type: 'stroke',\n    x: [],\n    y: [],\n    t: [],\n    p: [],\n    l: [],\n    width: 0\n  };\n  return Object.assign({}, defaultStroke, properties);\n}\n\n/**\n * Get a JSON copy of a stroke by filtering its properties\n * @param {Stroke} stroke Current stroke\n * @return {{type: String, x: Array<Number>, y: Array<Number>, t: Array<Number>}} Simplified stroke object\n */\nexport function toJSON(stroke) {\n  return { type: stroke.type, x: stroke.x, y: stroke.y, t: stroke.t };\n}\n\n/**\n * Get a JSON copy of a stroke by filtering its properties\n * @param {Stroke} stroke Current stroke\n * @return {{x: Array<Number>, y: Array<Number>, t: Array<Number>}} Simplified stroke object\n */\nexport function toJSONV4(stroke) {\n  return { x: stroke.x, y: stroke.y, t: stroke.t };\n}\n\n/**\n * Mutate a stroke by adding a point to it.\n * @param {Stroke} stroke Current stroke\n * @param {{x: Number, y: Number, t: Number}} point Point to add\n * @return {Stroke} Updated stroke\n */\nexport function addPoint(stroke, point) {\n  const strokeReference = stroke;\n  if (filterPointByAcquisitionDelta(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.width)) {\n    strokeReference.x.push(point.x);\n    strokeReference.y.push(point.y);\n    strokeReference.t.push(point.t);\n    strokeReference.p.push(computePressure(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.l, strokeReference.x.length - 1));\n    strokeReference.l.push(computeLength(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.l, strokeReference.x.length - 1));\n  } else {\n    logger.trace('ignore filtered point', point);\n  }\n  return strokeReference;\n}\n\n/**\n * Slice a stroke and return the sliced part of it\n * @param {Stroke} stroke Current stroke\n * @param {Number} [start=0] Zero-based index at which to begin extraction\n * @param {Number} [end=length] Zero-based index at which to end extraction\n * @return {Stroke} Sliced stroke\n */\nexport function slice(stroke, start = 0, end = stroke.x.length) {\n  const slicedStroke = createStrokeComponent({ color: stroke.color, width: stroke.width });\n  for (let i = start; i < end; i++) {\n    addPoint(slicedStroke, {\n      x: stroke.x[i],\n      y: stroke.y[i],\n      t: stroke.t[i]\n    });\n  }\n  return slicedStroke;\n}\n\n/**\n * Extract point by index\n * @param {Stroke} stroke Current stroke\n * @param {Number} index Zero-based index\n * @return {{x: Number, y: Number, t: Number, p: Number, l: Number}} Point with properties for quadratics draw\n */\nexport function getPointByIndex(stroke, index) {\n  let point;\n  if (index !== undefined && index >= 0 && index < stroke.x.length) {\n    point = {\n      x: stroke.x[index],\n      y: stroke.y[index],\n      t: stroke.t[index],\n      p: stroke.p[index],\n      l: stroke.l[index]\n    };\n  }\n  return point;\n}\n","import { MusicClefs } from '../renderer/canvas/symbols/MusicSymbolCanvasRenderer';\nimport Constants from '../configuration/Constants';\n\nfunction mergeBounds(boundsA, boundsB) {\n  return {\n    minX: Math.min(boundsA.minX, boundsB.minX),\n    maxX: Math.max(boundsA.maxX, boundsB.maxX),\n    minY: Math.min(boundsA.minY, boundsB.minY),\n    maxY: Math.max(boundsA.maxY, boundsB.maxY)\n  };\n}\n\nfunction getLineBounds(line) {\n  return {\n    minX: Math.min(line.firstPoint.x, line.lastPoint.x),\n    maxX: Math.max(line.firstPoint.x, line.lastPoint.x),\n    minY: Math.min(line.firstPoint.y, line.lastPoint.y),\n    maxY: Math.max(line.firstPoint.y, line.lastPoint.y)\n  };\n}\n\nfunction getEllipseBounds(ellipse) {\n  const angleStep = 0.02; // angle delta between interpolated points on the arc, in radian\n\n  let z1 = Math.cos(ellipse.orientation);\n  let z3 = Math.sin(ellipse.orientation);\n  let z2 = z1;\n  let z4 = z3;\n  z1 *= ellipse.maxRadius;\n  z2 *= ellipse.minRadius;\n  z3 *= ellipse.maxRadius;\n  z4 *= ellipse.minRadius;\n\n  const n = Math.abs(ellipse.sweepAngle) / angleStep;\n\n  const x = [];\n  const y = [];\n\n  for (let i = 0; i <= n; i++) {\n    const angle = ellipse.startAngle + ((i / n) * ellipse.sweepAngle);\n    const alpha = Math.atan2(Math.sin(angle) / ellipse.minRadius, Math.cos(angle) / ellipse.maxRadius);\n\n    const cosAlpha = Math.cos(alpha);\n    const sinAlpha = Math.sin(alpha);\n\n    x.push(ellipse.center.x + ((z1 * cosAlpha) - (z4 * sinAlpha)));\n    y.push(ellipse.center.y + ((z2 * sinAlpha) + (z3 * cosAlpha)));\n  }\n\n  return {\n    minX: Math.min(...x),\n    maxX: Math.max(...x),\n    minY: Math.min(...y),\n    maxY: Math.max(...y)\n  };\n}\n\nfunction getTextLineBounds(textLine) {\n  return {\n    minX: textLine.data.topLeftPoint.x,\n    maxX: textLine.data.topLeftPoint.x + textLine.data.width,\n    minY: textLine.data.topLeftPoint.y,\n    maxY: textLine.data.topLeftPoint.y + textLine.data.height\n  };\n}\n\nfunction getClefBounds(clef) {\n  return {\n    minX: clef.boundingBox.x,\n    maxX: clef.boundingBox.x + clef.boundingBox.width,\n    minY: clef.boundingBox.y,\n    maxY: clef.boundingBox.y + clef.boundingBox.height\n  };\n}\n\nfunction getStrokeBounds(stroke) {\n  return {\n    minX: Math.min(...stroke.x),\n    maxX: Math.max(...stroke.x),\n    minY: Math.min(...stroke.y),\n    maxY: Math.max(...stroke.y)\n  };\n}\n\n/**\n * Get the box enclosing the given symbols\n * @param {Array} symbols Symbols to extract bounds from\n * @param {Bounds} [bounds] Starting bounds for recursion\n * @return {Bounds} Bounding box enclosing symbols\n */\nexport function getSymbolsBounds(symbols, bounds = { minX: Number.MAX_VALUE, maxX: Number.MIN_VALUE, minY: Number.MAX_VALUE, maxY: Number.MIN_VALUE }) {\n  let boundsRef = bounds;\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'stroke')\n    .map(getStrokeBounds)\n    .reduce(mergeBounds, boundsRef);\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'clef')\n    .map(getClefBounds)\n    .reduce(mergeBounds, boundsRef);\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'line')\n    .map(getLineBounds)\n    .reduce(mergeBounds, boundsRef);\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'ellipse')\n    .map(getEllipseBounds)\n    .reduce(mergeBounds, boundsRef);\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'textLine')\n    .map(getTextLineBounds)\n    .reduce(mergeBounds, boundsRef);\n  return boundsRef;\n}\n\nfunction getDefaultMusicSymbols(configuration) {\n  const defaultStaff = Object.assign({}, { type: 'staff' }, configuration.recognitionParams.v3.musicParameter.staff);\n  const defaultClef = {\n    type: 'clef',\n    value: Object.assign({}, configuration.recognitionParams.v3.musicParameter.clef)\n  };\n  defaultClef.value.yAnchor = defaultStaff.top + (defaultStaff.gap * (defaultStaff.count - defaultClef.value.line));\n  delete defaultClef.value.line;\n  defaultClef.boundingBox = MusicClefs[defaultClef.value.symbol].getBoundingBox(defaultStaff.gap, 0, defaultClef.value.yAnchor);\n  return [defaultStaff, defaultClef];\n}\n\n/**\n * Get the default symbols for the current recognition type\n * @param {Configuration} configuration Current recognition parameters from which extract default symbols\n * @return {Array} Symbols matching configuration\n */\nexport function getDefaultSymbols(configuration) {\n  switch (configuration.recognitionParams.type) {\n    case Constants.RecognitionType.MUSIC:\n      return getDefaultMusicSymbols(configuration);\n    default:\n      return [];\n  }\n}\n","import { modelLogger as logger } from '../configuration/LoggerConfig';\nimport * as StrokeComponent from './StrokeComponent';\nimport { getSymbolsBounds, getDefaultSymbols } from './Symbol';\n\n/**\n * Recognition positions\n * @typedef {Object} RecognitionPositions\n * @property {Number} [lastSentPosition=-1] Index of the last sent stroke.\n * @property {Number} [lastReceivedPosition=-1] Index of the last received stroke.\n * @property {Number} [lastRenderedPosition=-1] Last rendered recognized symbol position\n */\n\n/**\n * Raw results\n * @typedef {Object} RawResults\n * @property {Object} convert=undefined The convert result\n * @property {Object} exports=undefined The exports output as return by the recognition service.\n */\n\n/**\n * Editor model\n * @typedef {Object} Model\n * @property {Stroke} currentStroke=undefined Stroke in building process.\n * @property {Array<Stroke>} rawStrokes=[] List of captured strokes.\n * @property {Array} strokeGroups=[] Group of strokes with same pen style.\n * @property {RecognitionPositions} lastPositions Last recognition sent/received stroke indexes.\n * @property {Array<Object>} defaultSymbols=[] Default symbols, relative to the current recognition type.\n * @property {Array<Object>} recognizedSymbols=undefined Symbols to render (e.g. stroke, shape primitives, string, characters...).\n * @property {Object} exports=undefined Result of the export (e.g. mathml, latex, text...).\n * @property {RawResults} rawResults The recognition output as return by the recognition service.\n * @property {Number} creationTime Date of creation timestamp.\n * @property {Number} modificationTime=undefined Date of lastModification.\n */\n\n/**\n * Bounding box\n * @typedef {Object} Bounds\n * @property {Number} minX Minimal x coordinate\n * @property {Number} maxX Maximal x coordinate\n * @property {Number} minY Minimal y coordinate\n * @property {Number} maxY Maximal y coordinate\n */\n\n/**\n * Create a new model\n * @param {Configuration} [configuration] Parameters to use to populate default recognition symbols\n * @return {Model} New model\n */\nexport function createModel(configuration) {\n  // see @typedef documentation on top\n  return {\n    currentStroke: undefined,\n    rawStrokes: [],\n    strokeGroups: [],\n    lastPositions: {\n      lastSentPosition: -1,\n      lastReceivedPosition: -1,\n      lastRenderedPosition: -1\n    },\n    defaultSymbols: configuration ? getDefaultSymbols(configuration) : [],\n    recognizedSymbols: undefined,\n    exports: undefined,\n    rawResults: {\n      convert: undefined,\n      exports: undefined\n    },\n    creationTime: new Date().getTime(),\n    modificationTime: undefined\n  };\n}\n\n/**\n * Clear the model.\n * @param {Model} model Current model\n * @return {Model} Cleared model\n */\nexport function clearModel(model) {\n  const modelReference = model;\n  modelReference.currentStroke = undefined;\n  modelReference.rawStrokes = [];\n  modelReference.strokeGroups = [];\n  modelReference.lastPositions.lastSentPosition = -1;\n  modelReference.lastPositions.lastReceivedPosition = -1;\n  modelReference.lastPositions.lastRenderedPosition = -1;\n  modelReference.recognizedSymbols = undefined;\n  modelReference.exports = undefined;\n  modelReference.rawResults.convert = undefined;\n  modelReference.rawResults.exports = undefined;\n  return modelReference;\n}\n\n/**\n * Check if the model needs to be redrawn.\n * @param {Model} model Current model\n * @return {Boolean} True if the model needs to be redrawn, false otherwise\n */\nexport function needRedraw(model) {\n  return model.recognizedSymbols ? (model.rawStrokes.length !== model.recognizedSymbols.filter(symbol => symbol.type === 'stroke').length) : false;\n}\n\n/**\n * Mutate the model given in parameter by adding the new strokeToAdd.\n * @param {Model} model Current model\n * @param {Stroke} stroke Stroke to be added to pending ones\n * @return {Model} Updated model\n */\nexport function addStroke(model, stroke) {\n  // We use a reference to the model. The purpose here is to update the pending stroke only.\n  const modelReference = model;\n  logger.debug('addStroke', stroke);\n  modelReference.rawStrokes.push(stroke);\n  return modelReference;\n}\n\n/**\n * Mutate the model given in parameter by adding the new strokeToAdd and the penstyle. Used for iink REST.\n * @param {Model} model Current model\n * @param {Stroke} stroke Stroke to be added to pending ones\n * @param {PenStyle} strokePenStyle\n * @return {Model} Updated model\n */\nexport function addStrokeToGroup(model, stroke, strokePenStyle) {\n  // We use a reference to the model. The purpose here is to update the pending stroke only.\n  const modelReference = model;\n  logger.debug('addStroke', stroke);\n  const lastGroup = modelReference.strokeGroups.length - 1;\n  if (modelReference.strokeGroups[lastGroup] && modelReference.strokeGroups[lastGroup].penStyle === strokePenStyle) {\n    modelReference.strokeGroups[lastGroup].strokes.push(stroke);\n  } else {\n    const newStrokeGroup = {\n      penStyle: strokePenStyle,\n      strokes: []\n    };\n    const strokeCopy = {};\n    Object.assign(strokeCopy, stroke);\n    newStrokeGroup.strokes.push(strokeCopy);\n    modelReference.strokeGroups.push(newStrokeGroup);\n  }\n  return modelReference;\n}\n\n/**\n * Get the strokes that needs to be recognized\n * @param {Model} model Current model\n * @param {Number} [position=lastReceived] Index from where to extract strokes\n * @return {Array<Stroke>} Pending strokes\n */\nexport function extractPendingStrokes(model, position = model.lastPositions.lastReceivedPosition + 1) {\n  return model.rawStrokes.slice(position);\n}\n\n/**\n * Mutate the model by adding a point and close the current stroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to create current stroke\n * @param {Object} properties Properties to be applied to the current stroke\n * @param {Number} [dpi=96] The screen dpi resolution\n * @return {Model} Updated model\n */\nexport function initPendingStroke(model, point, properties, dpi = 96) {\n  if (properties && properties['-myscript-pen-width']) {\n    const pxWidth = (properties['-myscript-pen-width'] * dpi) / 25.4;\n    Object.assign(properties, { width: pxWidth / 2 }); // FIXME hack to get better render\n  }\n  const modelReference = model;\n  logger.trace('initPendingStroke', point);\n  // Setting the current stroke to an empty one\n  modelReference.currentStroke = StrokeComponent.createStrokeComponent(properties);\n  modelReference.currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point);\n  return modelReference;\n}\n\n/**\n * Mutate the model by adding a point to the current pending stroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to be append to the current stroke\n * @return {Model} Updated model\n */\nexport function appendToPendingStroke(model, point) {\n  const modelReference = model;\n  if (modelReference.currentStroke) {\n    logger.trace('appendToPendingStroke', point);\n    modelReference.currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point);\n  }\n  return modelReference;\n}\n\n/**\n * Mutate the model by adding the new point on a initPendingStroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to be append to the current stroke\n * @param {PenStyle} penStyle\n * @return {Model} Updated model\n */\nexport function endPendingStroke(model, point, penStyle) {\n  const modelReference = model;\n  if (modelReference.currentStroke) {\n    logger.trace('endPendingStroke', point);\n    const currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point);\n    // Mutating pending strokes\n    addStroke(modelReference, currentStroke);\n    addStrokeToGroup(modelReference, currentStroke, penStyle);\n    // Resetting the current stroke to an undefined one\n    delete modelReference.currentStroke;\n  }\n  return modelReference;\n}\n\n/**\n * Get the bounds of the current model.\n * @param {Model} model Current model\n * @return {Bounds} Bounding box enclosing the current drawn model\n */\nexport function getBorderCoordinates(model) {\n  let modelBounds = { minX: Number.MAX_VALUE, maxX: Number.MIN_VALUE, minY: Number.MAX_VALUE, maxY: Number.MIN_VALUE };\n\n  // Default symbols\n  if (model.defaultSymbols && model.defaultSymbols.length > 0) {\n    modelBounds = getSymbolsBounds(model.defaultSymbols, modelBounds);\n  }\n  // Recognized symbols\n  if (model.recognizedSymbols && model.recognizedSymbols.length > 0) {\n    modelBounds = getSymbolsBounds(model.recognizedSymbols, modelBounds);\n    // Pending strokes\n    modelBounds = getSymbolsBounds(extractPendingStrokes(model), modelBounds);\n  } else {\n    modelBounds = getSymbolsBounds(model.rawStrokes, modelBounds);\n  }\n  return modelBounds;\n}\n\n/**\n * Extract strokes from an ink range\n * @param {Model} model Current model\n * @param {Number} firstStroke First stroke index to extract\n * @param {Number} lastStroke Last stroke index to extract\n * @param {Number} firstPoint First point index to extract\n * @param {Number} lastPoint Last point index to extract\n * @return {Array<Stroke>} The extracted strokes\n */\nexport function extractStrokesFromInkRange(model, firstStroke, lastStroke, firstPoint, lastPoint) {\n  return model.rawStrokes.slice(firstStroke, lastStroke + 1).map((stroke, index, slicedStrokes) => {\n    if (slicedStrokes.length < 2) {\n      return StrokeComponent.slice(stroke, firstPoint, lastPoint + 1);\n    }\n    if (index === 0) {\n      return StrokeComponent.slice(stroke, firstPoint);\n    }\n    if (index === (slicedStrokes.length - 1)) {\n      return StrokeComponent.slice(stroke, 0, lastPoint + 1);\n    }\n    return stroke;\n  });\n}\n\n/**\n * Update model lastSentPosition\n * @param {Model} model\n * @param {Number} [position]\n * @return {Model}\n */\nexport function updateModelSentPosition(model, position = model.rawStrokes.length - 1) {\n  const modelReference = model;\n  modelReference.lastPositions.lastSentPosition = position;\n  return modelReference;\n}\n\n/**\n * Update model lastReceivedPosition regarding to lastSentPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function updateModelReceivedPosition(model) {\n  const modelReference = model;\n  modelReference.lastPositions.lastReceivedPosition = modelReference.lastPositions.lastSentPosition;\n  return modelReference;\n}\n\n/**\n * Reset model lastReceivedPosition and lastSentPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function resetModelPositions(model) {\n  const modelReference = model;\n  modelReference.lastPositions.lastSentPosition = -1;\n  modelReference.lastPositions.lastReceivedPosition = -1;\n  return modelReference;\n}\n\n/**\n * Reset model lastRenderedPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function resetModelRendererPosition(model) {\n  const modelReference = model;\n  modelReference.lastPositions.lastRenderedPosition = -1;\n  return modelReference;\n}\n\n/**\n * Update model lastRenderedPosition\n * @param {Model} model\n * @param {Number} [position]\n * @return {Model}\n */\nexport function updateModelRenderedPosition(model, position = model.recognizedSymbols ? model.recognizedSymbols.length - 1 : -1) {\n  const modelReference = model;\n  modelReference.lastPositions.lastRenderedPosition = position;\n  return modelReference;\n}\n\n/**\n * Get the symbols that needs to be rendered\n * @param {Model} model Current model\n * @param {Number} [position=lastRendered] Index from where to extract symbols\n * @return {Array<Object>}\n */\nexport function extractPendingRecognizedSymbols(model, position = model.lastPositions.lastRenderedPosition + 1) {\n  return model.recognizedSymbols ? model.recognizedSymbols.slice(position) : [];\n}\n\n/**\n * Clone model\n * @param {Model} model Current model\n * @return {Model} Clone of the current model\n */\nexport function cloneModel(model) {\n  const clonedModel = Object.assign({}, model);\n  // We clone the properties that need to be. Take care of arrays.\n  clonedModel.defaultSymbols = [...model.defaultSymbols];\n  clonedModel.currentStroke = model.currentStroke ? Object.assign({}, model.currentStroke) : undefined;\n  clonedModel.rawStrokes = [...model.rawStrokes];\n  clonedModel.strokeGroups = JSON.parse(JSON.stringify(model.strokeGroups));\n  clonedModel.lastPositions = Object.assign({}, model.lastPositions);\n  clonedModel.exports = model.exports ? Object.assign({}, model.exports) : undefined;\n  clonedModel.rawResults = Object.assign({}, model.rawResults);\n  clonedModel.recognizedSymbols = model.recognizedSymbols ? [...model.recognizedSymbols] : undefined;\n  return clonedModel;\n}\n\n/**\n * Merge models\n * @param {...Model} models Models to merge (ordered)\n * @return {Model} Updated model\n */\nexport function mergeModels(...models) {\n  return models.reduce((a, b) => {\n    const modelRef = a;\n    modelRef.recognizedSymbols = b.recognizedSymbols;\n    modelRef.lastPositions.lastSentPosition = b.lastPositions.lastSentPosition;\n    modelRef.lastPositions.lastReceivedPosition = b.lastPositions.lastReceivedPosition;\n    modelRef.lastPositions.lastRenderedPosition = b.lastPositions.lastRenderedPosition;\n    modelRef.rawResults = b.rawResults;\n    modelRef.exports = b.exports;\n    return modelRef;\n  });\n}\n","import { rendererLogger as logger } from '../../configuration/LoggerConfig';\nimport { drawStroke } from './symbols/StrokeSymbolCanvasRenderer';\nimport { drawTextSymbol, TextSymbols } from './symbols/TextSymbolCanvasRenderer';\nimport { drawShapeSymbol, ShapeSymbols } from './symbols/ShapeSymbolCanvasRenderer';\nimport {\n  drawMusicSymbol,\n  getMusicClefElements,\n  MusicSymbols\n} from './symbols/MusicSymbolCanvasRenderer';\nimport * as InkModel from '../../model/InkModel';\n\n/**\n * Renderer info\n * @typedef {Object} RendererInfo\n * @property {String} type Renderer type.\n * @property {String} apiVersion Supported api version.\n */\n\n/**\n * Default renderer\n * @typedef {Object} Renderer\n * @property {function(): RendererInfo} getInfo Get some information about this renderer\n * @property {function(element: Element, minHeight: Number, minWidth: Number): Object} attach Populate the DOM element to create rendering area.\n * @property {function(element: Element, context: Object)} detach Remove rendering area from the DOM element.\n * @property {function(context: Object, model: Model, stroker: Stroker)} resize Explicitly resize the rendering area.\n * @property {function(context: Object, model: Model, stroker: Stroker): Model} drawCurrentStroke Draw the model currentStroke.\n * @property {function(context: Object, model: Model, stroker: Stroker): Model} drawModel Draw the model defaultSymbols and recognizedSymbols.\n */\n\n/**\n * Get info\n * @return {RendererInfo} Information about this renderer\n */\nexport function getInfo() {\n  return {\n    type: 'canvas',\n    apiVersion: 'V3'\n  };\n}\n\nfunction getPixelRatio(canvas) {\n  if (canvas) {\n    const context = canvas.getContext('2d');\n    // we are using a browser object\n    // eslint-disable-next-line no-undef\n    const devicePixelRatio = window.devicePixelRatio || 1;\n    const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n  }\n  return 1;\n}\n\nfunction detectPixelRatio(element) {\n  // we are using a browser object\n  // eslint-disable-next-line no-undef\n  const tempCanvas = document.createElement('canvas');\n  const canvasRatio = getPixelRatio(tempCanvas);\n  // document.removeChild(tempCanvas);\n  return canvasRatio;\n}\n\nfunction createCanvas(element, type) {\n  // eslint-disable-next-line no-undef\n  const browserDocument = document;\n  const canvas = browserDocument.createElement('canvas');\n  canvas.classList.add(type);\n  canvas.classList.add('ms-canvas');\n  element.appendChild(canvas);\n  logger.debug('canvas created', canvas);\n  return canvas;\n}\n\nfunction resizeContent(context) {\n  const elements = [context.renderingCanvas, context.capturingCanvas];\n  elements.forEach((canvas) => {\n    const domElement = canvas.parentNode;\n    const width = domElement.clientWidth < context.minWidth ? context.minWidth : domElement.clientWidth;\n    const height = domElement.clientHeight < context.minHeight ? context.minHeight : domElement.clientHeight;\n    /* eslint-disable no-param-reassign */\n    canvas.width = width * context.pixelRatio;\n    canvas.height = height * context.pixelRatio;\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    /* eslint-enable no-param-reassign */\n    canvas.getContext('2d').scale(context.pixelRatio, context.pixelRatio);\n    logger.debug('canvas size changed', canvas);\n  });\n  return context;\n}\n\n/**\n * Attach the renderer to the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Number} [minHeight=0] Minimal height of the editor\n * @param {Number} [minWidth=0] Minimal width of the editor\n * @return {Object} The renderer context to give as parameter when a draw model will be call\n */\nexport function attach(element, minHeight = 0, minWidth = 0) {\n  logger.debug('attach renderer', element);\n  const pixelRatio = detectPixelRatio(element);\n  const resources = getMusicClefElements();\n  resources.forEach(clef => element.appendChild(clef));\n\n  const renderingCanvas = createCanvas(element, 'ms-rendering-canvas');\n  const capturingCanvas = createCanvas(element, 'ms-capture-canvas');\n\n  const context = {\n    pixelRatio,\n    minHeight,\n    minWidth,\n    renderingCanvas,\n    renderingCanvasContext: renderingCanvas.getContext('2d'),\n    capturingCanvas,\n    capturingCanvasContext: capturingCanvas.getContext('2d'),\n    resources\n  };\n\n  return resizeContent(context);\n}\n\n/**\n * Detach the renderer from the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Object} context Current rendering context\n */\nexport function detach(element, context) {\n  logger.debug('detach renderer', element);\n  context.resources.forEach(res => element.removeChild(res));\n  element.removeChild(context.renderingCanvas);\n  element.removeChild(context.capturingCanvas);\n}\n\n/**\n * Update the rendering context size\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function resize(context, model, stroker) {\n  return this.drawModel(resizeContent(context), model, stroker);\n}\n\nfunction drawSymbol(context, symbol, stroker) {\n  const type = symbol.elementType ? symbol.elementType : symbol.type;\n  logger.trace(`attempting to draw ${type} symbol`);\n  if (type === 'stroke') {\n    drawStroke(context, symbol, stroker);\n  } else if (TextSymbols[type]) {\n    drawTextSymbol(context, symbol);\n  } else if (ShapeSymbols[type]) {\n    drawShapeSymbol(context, symbol);\n  } else if (MusicSymbols[type]) {\n    drawMusicSymbol(context, symbol);\n  } else {\n    logger.warn(`impossible to draw ${type} symbol`);\n  }\n}\n\n/**\n * Draw the current stroke from the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawCurrentStroke(context, model, stroker) {\n  // Render the current stroke\n  context.capturingCanvasContext.clearRect(0, 0, context.capturingCanvas.width, context.capturingCanvas.height);\n  logger.trace('drawing current stroke ', model.currentStroke);\n  drawStroke(context.capturingCanvasContext, model.currentStroke, stroker);\n  return model;\n}\n\n/**\n * Draw all symbols contained into the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawModel(context, model, stroker) {\n  context.renderingCanvasContext.clearRect(0, 0, context.renderingCanvas.width, context.renderingCanvas.height);\n  // Displaying the default symbols and pending strokes\n  const symbols = [...model.defaultSymbols];\n  // Displaying the recognition symbols or raw strokes\n  if (model.recognizedSymbols) {\n    symbols.push(...model.recognizedSymbols);\n    symbols.push(...InkModel.extractPendingStrokes(model));\n  } else {\n    symbols.push(...model.rawStrokes);\n  }\n  symbols.forEach(symbol => drawSymbol(context.renderingCanvasContext, symbol, stroker));\n  context.capturingCanvasContext.clearRect(0, 0, context.capturingCanvas.width, context.capturingCanvas.height);\n  return model;\n}\n","/** ===============================================================================================\n * Compute quadratics control points\n * ============================================================================================= */\n\n/**\n *\n * @param {{x: Number, y: Number, p: Number}} point\n * @param angle\n * @param width\n * @return {[{x: Number, y: Number},{x: Number, y: Number}]}\n */\nexport function computeLinksPoints(point, angle, width) {\n  const radius = point.p * width;\n  return [{\n    x: (point.x - (Math.sin(angle) * radius)),\n    y: (point.y + (Math.cos(angle) * radius))\n  }, {\n    x: (point.x + (Math.sin(angle) * radius)),\n    y: (point.y - (Math.cos(angle) * radius))\n  }];\n}\n\n/**\n *\n * @param {{x: Number, y: Number, p: Number}} point1\n * @param {{x: Number, y: Number, p: Number}} point2\n * @return {{x: Number, y: Number, p: Number}}\n */\nexport function computeMiddlePoint(point1, point2) {\n  return {\n    x: ((point2.x + point1.x) / 2),\n    y: ((point2.y + point1.y) / 2),\n    p: ((point2.p + point1.p) / 2)\n  };\n}\n\n/**\n *\n * @param {{x: Number, y: Number}} begin\n * @param {{x: Number, y: Number}} end\n * @return {Number}\n */\nexport function computeAxeAngle(begin, end) {\n  return Math.atan2(end.y - begin.y, end.x - begin.x);\n}\n","import * as StrokeComponent from '../../../model/StrokeComponent';\nimport { computeLinksPoints, computeMiddlePoint, computeAxeAngle } from '../../QuadraticUtils';\n\n/**\n * Stroker info\n * @typedef {Object} StrokerInfo\n * @property {String} type Renderer type.\n * @property {String} name Stroker name.\n * @property {String} apiVersion Supported api version.\n */\n\n/**\n * Define how a stroke should be drawn\n * @typedef {Object} Stroker\n * @property {function(): StrokerInfo} getInfo Get some information about this stroker\n * @property {function(context: Object, stroke: Stroke)} drawStroke Render a stroke on the current context.\n */\n\n/**\n * Get info\n * @return {StrokerInfo} Information about this stroker\n */\nexport function getInfo() {\n  return {\n    type: 'canvas',\n    name: 'quadratic',\n    apiVersion: 'V3'\n  };\n}\n\nfunction renderArc(context, center, radius) {\n  context.arc(center.x, center.y, radius, 0, Math.PI * 2, true);\n}\n\nfunction renderLine(context, begin, end, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, end), width);\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(begin, end), width);\n\n  context.moveTo(linkPoints1[0].x, linkPoints1[0].y);\n  context.lineTo(linkPoints2[0].x, linkPoints2[0].y);\n  context.lineTo(linkPoints2[1].x, linkPoints2[1].y);\n  context.lineTo(linkPoints1[1].x, linkPoints1[1].y);\n}\n\nfunction renderFinal(context, begin, end, width) {\n  const ARCSPLIT = 6;\n  const angle = computeAxeAngle(begin, end);\n  const linkPoints = computeLinksPoints(end, angle, width);\n  context.moveTo(linkPoints[0].x, linkPoints[0].y);\n  for (let i = 1; i <= ARCSPLIT; i++) {\n    const newAngle = angle - ((i * Math.PI) / ARCSPLIT);\n    context.lineTo(end.x - ((end.p * width) * Math.sin(newAngle)), end.y + (end.p * width * Math.cos(newAngle)));\n  }\n}\n\nfunction renderQuadratic(context, begin, end, ctrl, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, ctrl), width);\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(ctrl, end), width);\n  const linkPoints3 = computeLinksPoints(ctrl, computeAxeAngle(begin, end), width);\n\n  context.moveTo(linkPoints1[0].x, linkPoints1[0].y);\n  context.quadraticCurveTo(linkPoints3[0].x, linkPoints3[0].y, linkPoints2[0].x, linkPoints2[0].y);\n  context.lineTo(linkPoints2[1].x, linkPoints2[1].y);\n  context.quadraticCurveTo(linkPoints3[1].x, linkPoints3[1].y, linkPoints1[1].x, linkPoints1[1].y);\n}\n\n/**\n * Draw a stroke on a canvas, using quadratics\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Current stroke to be drawn\n */\nexport function drawStroke(context, stroke) {\n  const contextReference = context;\n  const length = stroke.x.length;\n  const width = stroke.width > 0 ? stroke.width : contextReference.lineWidth;\n  const color = stroke.color ? stroke.color : contextReference.strokeStyle;\n  const firstPoint = StrokeComponent.getPointByIndex(stroke, 0);\n  const nbquadratics = length - 2;\n\n  contextReference.save();\n  try {\n    contextReference.beginPath();\n    if (length < 3) {\n      renderArc(contextReference, firstPoint, width * 0.6);\n    } else {\n      renderArc(contextReference, firstPoint, width * firstPoint.p);\n      renderLine(contextReference, firstPoint, computeMiddlePoint(firstPoint, StrokeComponent.getPointByIndex(stroke, 1)), width);\n\n      // Possibility to try this (the start looks better when the ink is large)\n      // var first = computeMiddlePoint(stroke[0], stroke[1]);\n      // contextReference.arc(first.x, first.y, width * first.p, 0, Math.PI * 2, true);\n\n      for (let i = 0; i < nbquadratics; i++) {\n        renderQuadratic(contextReference, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i), StrokeComponent.getPointByIndex(stroke, i + 1)), computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i + 1), StrokeComponent.getPointByIndex(stroke, i + 2)), StrokeComponent.getPointByIndex(stroke, i + 1), width);\n      }\n      renderLine(contextReference, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1)), StrokeComponent.getPointByIndex(stroke, length - 1), width);\n      renderFinal(contextReference, StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1), width);\n    }\n    contextReference.closePath();\n    if (color !== undefined) {\n      contextReference.fillStyle = color;\n      contextReference.fill();\n    }\n  } finally {\n    contextReference.restore();\n  }\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  return this.parentNode.insertBefore(this.cloneNode(false), this.nextSibling);\n}\n\nfunction selection_cloneDeep() {\n  return this.parentNode.insertBefore(this.cloneNode(true), this.nextSibling);\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","/**\n * Draw a stroke symbol\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Stroke to be drawn\n * @param {Stroker} stroker Stroker to use to render a stroke\n */\nexport function drawStroke(context, stroke, stroker) {\n  if (stroker) {\n    stroker.drawStroke(context, stroke);\n  }\n}\n","import * as d3 from 'd3-selection';\nimport { rendererLogger as logger } from '../../configuration/LoggerConfig';\nimport { drawStroke } from './symbols/StrokeSymbolSVGRenderer';\nimport * as InkModel from '../../model/InkModel';\n\n\n/**\n * Get info\n * @return {RendererInfo} Information about this renderer\n */\nexport function getInfo() {\n  return {\n    type: 'svg',\n    apiVersion: 'V4'\n  };\n}\n\n/**\n * Populate the dom element\n * @param {Element} element DOM element to attach the rendering elements\n * @return {Object} The renderer context to give as parameter when a draw model will be call\n */\nexport function attach(element) {\n  const elementRef = element;\n  logger.debug('populate root element', elementRef);\n  elementRef.style.fontSize = '10px';\n  return d3.select(elementRef);\n}\n\n/**\n * Detach the renderer from the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Object} context Current rendering context\n */\nexport function detach(element, context) {\n  logger.debug('detach renderer', element);\n  context.select('svg').remove();\n}\n\n/**\n * Update the rendering context size\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @param {Number} minHeight Minimal height for resize\n * @param {Number} minWidth Minimal Width for resize\n * @return {Model}\n */\nexport function resize(context, model, stroker, minHeight, minWidth) {\n  const rect = context.node().getBoundingClientRect();\n  const svg = context.selectAll('svg');\n  const width = rect.width < minWidth ? minWidth : rect.width;\n  const height = rect.height < minHeight ? minHeight : rect.height;\n  svg.attr('viewBox', `0 0 ${width}, ${height}`);\n  svg.attr('width', `${width}px`);\n  svg.attr('height', `${height}px`);\n  logger.debug('svg viewBox changed', svg);\n  return model;\n}\n\n/**\n * Draw the current stroke from the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawCurrentStroke(context, model, stroker) {\n  const modelRef = model;\n  // Add a pending id for pending strokes rendering\n  modelRef.currentStroke.id = `pendingStroke-${model.rawStrokes.length}`;\n  // Render the current stroke\n  logger.trace('drawing current stroke ', model.currentStroke);\n  context.select(`#pendingStrokes #${modelRef.currentStroke.id}`).remove();\n  drawStroke(context.select('#pendingStrokes').append('path').attr('id', model.currentStroke.id), model.currentStroke, stroker);\n  return modelRef;\n}\n\nfunction insertAdjacentSVG(element, position, html) {\n  const container = element.ownerDocument.createElementNS('http://www.w3.org/2000/svg', '_');\n  container.innerHTML = html;\n\n  switch (position.toLowerCase()) {\n    case 'beforebegin':\n      element.parentNode.insertBefore(container.firstChild, element);\n      break;\n    case 'afterbegin':\n      element.insertBefore(container.lastChild, element.firstChild);\n      break;\n    case 'beforeend':\n      element.appendChild(container.firstChild);\n      break;\n    case 'afterend':\n      element.parentNode.insertBefore(container.lastChild, element.nextSibling);\n      break;\n    default:\n      logger.warn('Invalid insertAdjacentHTML position');\n      break;\n  }\n}\n\n/**\n * Draw all symbols contained into the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawModel(context, model, stroker) {\n  const drawSymbol = (symbol, symbolContext) => {\n    logger.trace(`attempting to draw ${symbol.type} symbol`);\n    if (symbol.type === 'stroke' && !symbolContext.select('id', symbol.id)) {\n      drawStroke(symbolContext.append('path').attr('id', symbol.id), symbol, stroker);\n    } else {\n      logger.warn(`impossible to draw ${symbol.type} symbol`);\n    }\n  };\n\n  const updateView = (patchUpdate) => {\n    // We only add in the stack patch with updates\n    patchUpdate.updates.forEach((update) => {\n      try {\n        const svgElementSelector = 'svg[data-layer=\"' + patchUpdate.layer + '\"]';\n        switch (update.type) {\n          case 'REPLACE_ALL': {\n            context.select(svgElementSelector).remove();\n            const parent = context.node();\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg);\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg);\n            }\n            if (patchUpdate.layer === 'MODEL') {\n              context.select(svgElementSelector).append('g').attr('id', 'pendingStrokes');\n            }\n          }\n            break;\n          case 'REMOVE_ELEMENT': {\n            if (update.id.includes('s') || update.id.includes('MODEL')) {\n              context.select(`#${update.id}`).remove();\n            } else {\n              context.select(`#${update.id}`).attr('class', 'removed-stroke');\n              setTimeout(() => {\n                context.select(`#${update.id}`).remove();\n              }, 100);\n            }\n            break;\n          }\n          case 'REPLACE_ELEMENT': {\n            const parent = context.select(`#${update.id}`).node().parentNode;\n            context.select(`#${update.id}`).remove();\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg);\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg);\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML);\n            }\n          }\n            break;\n          case 'REMOVE_CHILD':\n            context.select(`#${update.parentId} > *:nth-child(${update.index + 1})`).remove();\n            break;\n          case 'APPEND_CHILD': {\n            const parent = context.select(update.parentId ? `#${update.parentId}` : svgElementSelector).node();\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg);\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg);\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML);\n            }\n          }\n            break;\n          case 'INSERT_BEFORE': {\n            const parent = context.select(`#${update.refId}`).node();\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeBegin', update.svg);\n            } else {\n              insertAdjacentSVG(parent, 'beforeBegin', update.svg);\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML);\n            }\n          }\n            break;\n          case 'REMOVE_ATTRIBUTE':\n            context.selectAll(update.id ? `#${update.id}` : 'svg').attr(update.name, null);\n            break;\n          case 'SET_ATTRIBUTE': {\n            // We ignore setAttributes on the svg element because we handle the resize elsewhere to prevent a blink effect\n            // that occurs if we are waiting for the server to resize.\n            if (update.id) {\n              context.selectAll(`#${update.id}`).attr(update.name, update.value);\n            }\n            break;\n          }\n          default:\n            logger.debug(`unknown update ${update.type} action`);\n            break;\n        }\n      } catch (e) {\n        logger.error(`Invalid update ${update.type}`, update);\n        logger.error('Error on svg patch', e);\n      }\n    });\n  };\n\n  const pendingRecognizedSymbols = InkModel.extractPendingRecognizedSymbols(model);\n  if (pendingRecognizedSymbols) {\n    pendingRecognizedSymbols.forEach(patch => updateView(patch));\n    InkModel.updateModelRenderedPosition(model);\n  }\n\n  const pendingStrokes = InkModel.extractPendingStrokes(model);\n  if (pendingStrokes) {\n    pendingStrokes.forEach(stroke => drawSymbol(stroke, context.select('#pendingStrokes')));\n  }\n  return model;\n}\n","import * as StrokeComponent from '../../../model/StrokeComponent';\nimport { computeLinksPoints, computeMiddlePoint, computeAxeAngle } from '../../QuadraticUtils';\n\n/**\n * Get info\n * @return {StrokerInfo} Information about this stroker\n */\nexport function getInfo() {\n  return {\n    type: 'svg',\n    name: 'quadratic',\n    apiVersion: 'V4'\n  };\n}\n\nfunction renderArc(context, center, radius) {\n  const svgPath = [\n    `M ${center.x},${center.y}`,\n    `m ${-radius},0`,\n    `a ${radius},${radius} 0 1 0 ${radius * 2},0`,\n    `a ${radius},${radius} 0 1 0 ${-(radius * 2)},0`\n  ].join(' ');\n  return svgPath;\n}\n\nfunction renderLine(context, begin, end, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, end), width);\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(begin, end), width);\n\n  const svgPath = [\n    `M ${linkPoints1[0].x},${linkPoints1[0].y}`,\n    `L ${linkPoints2[0].x},${linkPoints2[0].y}`,\n    `L ${linkPoints2[1].x},${linkPoints2[1].y}`,\n    `L ${linkPoints1[1].x},${linkPoints1[1].y}`\n  ].join(' ');\n  return svgPath;\n}\n\nfunction renderFinal(context, begin, end, width) {\n  const ARCSPLIT = 6;\n  const angle = computeAxeAngle(begin, end);\n  const linkPoints = computeLinksPoints(end, angle, width);\n\n  const parts = [`M ${linkPoints[0].x},${linkPoints[0].y}`];\n  for (let i = 1; i <= ARCSPLIT; i++) {\n    const newAngle = angle - (i * (Math.PI / ARCSPLIT));\n    parts.push(`L ${end.x - (end.p * width * Math.sin(newAngle))},${end.y + (end.p * width * Math.cos(newAngle))}`);\n  }\n  const svgPath = parts.join(' ');\n  return svgPath;\n}\n\nfunction renderQuadratic(context, begin, end, ctrl, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, ctrl), width);\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(ctrl, end), width);\n  const linkPoints3 = computeLinksPoints(ctrl, computeAxeAngle(begin, end), width);\n\n  const svgPath = [\n    `M ${linkPoints1[0].x},${linkPoints1[0].y}`,\n    `Q ${linkPoints3[0].x},${linkPoints3[0].y} ${linkPoints2[0].x},${linkPoints2[0].y}`,\n    `L ${linkPoints2[1].x},${linkPoints2[1].y}`,\n    `Q ${linkPoints3[1].x},${linkPoints3[1].y} ${linkPoints1[1].x},${linkPoints1[1].y}`\n  ].join(' ');\n  return svgPath;\n}\n\n/**\n * Draw a stroke on a svg tag, using quadratics\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Current stroke to be drawn\n */\nexport function drawStroke(context, stroke) {\n  const length = stroke.x.length;\n  const width = stroke.width;\n  const firstPoint = StrokeComponent.getPointByIndex(stroke, 0);\n  const nbquadratics = length - 2;\n\n  const parts = [];\n  if (length < 3) {\n    parts.push(renderArc(context, firstPoint, width * 0.6));\n  } else {\n    parts.push(renderArc(context, firstPoint, width * firstPoint.p));\n    parts.push(renderLine(context, firstPoint, computeMiddlePoint(firstPoint, StrokeComponent.getPointByIndex(stroke, 1)), width));\n\n    for (let i = 0; i < nbquadratics; i++) {\n      parts.push(renderQuadratic(context, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i), StrokeComponent.getPointByIndex(stroke, i + 1)), computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i + 1), StrokeComponent.getPointByIndex(stroke, i + 2)), StrokeComponent.getPointByIndex(stroke, i + 1), width));\n    }\n    parts.push(renderLine(context, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1)), StrokeComponent.getPointByIndex(stroke, length - 1), width));\n    parts.push(renderFinal(context, StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1), width));\n  }\n  const svgPath = parts.join(' ');\n\n  context\n    .attr('color', stroke.color)\n    .style('fill', stroke.color)\n    .style('stroke', 'transparent')\n    .classed('pending-stroke', true)\n    .attr('d', `${svgPath}Z`);\n}\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /*\n\t     * Local polyfil of Object.create\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {};\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }())\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.enc.Hex;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var X32WordArray = C_lib.WordArray;\n\n\t    /**\n\t     * x64 namespace.\n\t     */\n\t    var C_x64 = C.x64 = {};\n\n\t    /**\n\t     * A 64-bit word.\n\t     */\n\t    var X64Word = C_x64.Word = Base.extend({\n\t        /**\n\t         * Initializes a newly created 64-bit word.\n\t         *\n\t         * @param {number} high The high 32 bits.\n\t         * @param {number} low The low 32 bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x64Word = CryptoJS.x64.Word.create(0x00010203, 0x04050607);\n\t         */\n\t        init: function (high, low) {\n\t            this.high = high;\n\t            this.low = low;\n\t        }\n\n\t        /**\n\t         * Bitwise NOTs this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after negating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var negated = x64Word.not();\n\t         */\n\t        // not: function () {\n\t            // var high = ~this.high;\n\t            // var low = ~this.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ANDs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to AND with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ANDing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var anded = x64Word.and(anotherX64Word);\n\t         */\n\t        // and: function (word) {\n\t            // var high = this.high & word.high;\n\t            // var low = this.low & word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to OR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var ored = x64Word.or(anotherX64Word);\n\t         */\n\t        // or: function (word) {\n\t            // var high = this.high | word.high;\n\t            // var low = this.low | word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise XORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to XOR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after XORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var xored = x64Word.xor(anotherX64Word);\n\t         */\n\t        // xor: function (word) {\n\t            // var high = this.high ^ word.high;\n\t            // var low = this.low ^ word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftL(25);\n\t         */\n\t        // shiftL: function (n) {\n\t            // if (n < 32) {\n\t                // var high = (this.high << n) | (this.low >>> (32 - n));\n\t                // var low = this.low << n;\n\t            // } else {\n\t                // var high = this.low << (n - 32);\n\t                // var low = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftR(7);\n\t         */\n\t        // shiftR: function (n) {\n\t            // if (n < 32) {\n\t                // var low = (this.low >>> n) | (this.high << (32 - n));\n\t                // var high = this.high >>> n;\n\t            // } else {\n\t                // var low = this.high >>> (n - 32);\n\t                // var high = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotL(25);\n\t         */\n\t        // rotL: function (n) {\n\t            // return this.shiftL(n).or(this.shiftR(64 - n));\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotR(7);\n\t         */\n\t        // rotR: function (n) {\n\t            // return this.shiftR(n).or(this.shiftL(64 - n));\n\t        // },\n\n\t        /**\n\t         * Adds this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to add with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after adding.\n\t         *\n\t         * @example\n\t         *\n\t         *     var added = x64Word.add(anotherX64Word);\n\t         */\n\t        // add: function (word) {\n\t            // var low = (this.low + word.low) | 0;\n\t            // var carry = (low >>> 0) < (this.low >>> 0) ? 1 : 0;\n\t            // var high = (this.high + word.high + carry) | 0;\n\n\t            // return X64Word.create(high, low);\n\t        // }\n\t    });\n\n\t    /**\n\t     * An array of 64-bit words.\n\t     *\n\t     * @property {Array} words The array of CryptoJS.x64.Word objects.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var X64WordArray = C_x64.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of CryptoJS.x64.Word objects.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create();\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ]);\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ], 10);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 8;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this 64-bit word array to a 32-bit word array.\n\t         *\n\t         * @return {CryptoJS.lib.WordArray} This word array's data as a 32-bit word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x32WordArray = x64WordArray.toX32();\n\t         */\n\t        toX32: function () {\n\t            // Shortcuts\n\t            var x64Words = this.words;\n\t            var x64WordsLength = x64Words.length;\n\n\t            // Convert\n\t            var x32Words = [];\n\t            for (var i = 0; i < x64WordsLength; i++) {\n\t                var x64Word = x64Words[i];\n\t                x32Words.push(x64Word.high);\n\t                x32Words.push(x64Word.low);\n\t            }\n\n\t            return X32WordArray.create(x32Words, this.sigBytes);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {X64WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = x64WordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\n\t            // Clone \"words\" array\n\t            var words = clone.words = this.words.slice(0);\n\n\t            // Clone each X64Word object\n\t            var wordsLength = words.length;\n\t            for (var i = 0; i < wordsLength; i++) {\n\t                words[i] = words[i].clone();\n\t            }\n\n\t            return clone;\n\t        }\n\t    });\n\t}());\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var X64WordArray = C_x64.WordArray;\n\t    var C_algo = C.algo;\n\n\t    function X64Word_create() {\n\t        return X64Word.create.apply(X64Word, arguments);\n\t    }\n\n\t    // Constants\n\t    var K = [\n\t        X64Word_create(0x428a2f98, 0xd728ae22), X64Word_create(0x71374491, 0x23ef65cd),\n\t        X64Word_create(0xb5c0fbcf, 0xec4d3b2f), X64Word_create(0xe9b5dba5, 0x8189dbbc),\n\t        X64Word_create(0x3956c25b, 0xf348b538), X64Word_create(0x59f111f1, 0xb605d019),\n\t        X64Word_create(0x923f82a4, 0xaf194f9b), X64Word_create(0xab1c5ed5, 0xda6d8118),\n\t        X64Word_create(0xd807aa98, 0xa3030242), X64Word_create(0x12835b01, 0x45706fbe),\n\t        X64Word_create(0x243185be, 0x4ee4b28c), X64Word_create(0x550c7dc3, 0xd5ffb4e2),\n\t        X64Word_create(0x72be5d74, 0xf27b896f), X64Word_create(0x80deb1fe, 0x3b1696b1),\n\t        X64Word_create(0x9bdc06a7, 0x25c71235), X64Word_create(0xc19bf174, 0xcf692694),\n\t        X64Word_create(0xe49b69c1, 0x9ef14ad2), X64Word_create(0xefbe4786, 0x384f25e3),\n\t        X64Word_create(0x0fc19dc6, 0x8b8cd5b5), X64Word_create(0x240ca1cc, 0x77ac9c65),\n\t        X64Word_create(0x2de92c6f, 0x592b0275), X64Word_create(0x4a7484aa, 0x6ea6e483),\n\t        X64Word_create(0x5cb0a9dc, 0xbd41fbd4), X64Word_create(0x76f988da, 0x831153b5),\n\t        X64Word_create(0x983e5152, 0xee66dfab), X64Word_create(0xa831c66d, 0x2db43210),\n\t        X64Word_create(0xb00327c8, 0x98fb213f), X64Word_create(0xbf597fc7, 0xbeef0ee4),\n\t        X64Word_create(0xc6e00bf3, 0x3da88fc2), X64Word_create(0xd5a79147, 0x930aa725),\n\t        X64Word_create(0x06ca6351, 0xe003826f), X64Word_create(0x14292967, 0x0a0e6e70),\n\t        X64Word_create(0x27b70a85, 0x46d22ffc), X64Word_create(0x2e1b2138, 0x5c26c926),\n\t        X64Word_create(0x4d2c6dfc, 0x5ac42aed), X64Word_create(0x53380d13, 0x9d95b3df),\n\t        X64Word_create(0x650a7354, 0x8baf63de), X64Word_create(0x766a0abb, 0x3c77b2a8),\n\t        X64Word_create(0x81c2c92e, 0x47edaee6), X64Word_create(0x92722c85, 0x1482353b),\n\t        X64Word_create(0xa2bfe8a1, 0x4cf10364), X64Word_create(0xa81a664b, 0xbc423001),\n\t        X64Word_create(0xc24b8b70, 0xd0f89791), X64Word_create(0xc76c51a3, 0x0654be30),\n\t        X64Word_create(0xd192e819, 0xd6ef5218), X64Word_create(0xd6990624, 0x5565a910),\n\t        X64Word_create(0xf40e3585, 0x5771202a), X64Word_create(0x106aa070, 0x32bbd1b8),\n\t        X64Word_create(0x19a4c116, 0xb8d2d0c8), X64Word_create(0x1e376c08, 0x5141ab53),\n\t        X64Word_create(0x2748774c, 0xdf8eeb99), X64Word_create(0x34b0bcb5, 0xe19b48a8),\n\t        X64Word_create(0x391c0cb3, 0xc5c95a63), X64Word_create(0x4ed8aa4a, 0xe3418acb),\n\t        X64Word_create(0x5b9cca4f, 0x7763e373), X64Word_create(0x682e6ff3, 0xd6b2b8a3),\n\t        X64Word_create(0x748f82ee, 0x5defb2fc), X64Word_create(0x78a5636f, 0x43172f60),\n\t        X64Word_create(0x84c87814, 0xa1f0ab72), X64Word_create(0x8cc70208, 0x1a6439ec),\n\t        X64Word_create(0x90befffa, 0x23631e28), X64Word_create(0xa4506ceb, 0xde82bde9),\n\t        X64Word_create(0xbef9a3f7, 0xb2c67915), X64Word_create(0xc67178f2, 0xe372532b),\n\t        X64Word_create(0xca273ece, 0xea26619c), X64Word_create(0xd186b8c7, 0x21c0c207),\n\t        X64Word_create(0xeada7dd6, 0xcde0eb1e), X64Word_create(0xf57d4f7f, 0xee6ed178),\n\t        X64Word_create(0x06f067aa, 0x72176fba), X64Word_create(0x0a637dc5, 0xa2c898a6),\n\t        X64Word_create(0x113f9804, 0xbef90dae), X64Word_create(0x1b710b35, 0x131c471b),\n\t        X64Word_create(0x28db77f5, 0x23047d84), X64Word_create(0x32caab7b, 0x40c72493),\n\t        X64Word_create(0x3c9ebe0a, 0x15c9bebc), X64Word_create(0x431d67c4, 0x9c100d4c),\n\t        X64Word_create(0x4cc5d4be, 0xcb3e42b6), X64Word_create(0x597f299c, 0xfc657e2a),\n\t        X64Word_create(0x5fcb6fab, 0x3ad6faec), X64Word_create(0x6c44198c, 0x4a475817)\n\t    ];\n\n\t    // Reusable objects\n\t    var W = [];\n\t    (function () {\n\t        for (var i = 0; i < 80; i++) {\n\t            W[i] = X64Word_create();\n\t        }\n\t    }());\n\n\t    /**\n\t     * SHA-512 hash algorithm.\n\t     */\n\t    var SHA512 = C_algo.SHA512 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new X64WordArray.init([\n\t                new X64Word.init(0x6a09e667, 0xf3bcc908), new X64Word.init(0xbb67ae85, 0x84caa73b),\n\t                new X64Word.init(0x3c6ef372, 0xfe94f82b), new X64Word.init(0xa54ff53a, 0x5f1d36f1),\n\t                new X64Word.init(0x510e527f, 0xade682d1), new X64Word.init(0x9b05688c, 0x2b3e6c1f),\n\t                new X64Word.init(0x1f83d9ab, 0xfb41bd6b), new X64Word.init(0x5be0cd19, 0x137e2179)\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var H0 = H[0];\n\t            var H1 = H[1];\n\t            var H2 = H[2];\n\t            var H3 = H[3];\n\t            var H4 = H[4];\n\t            var H5 = H[5];\n\t            var H6 = H[6];\n\t            var H7 = H[7];\n\n\t            var H0h = H0.high;\n\t            var H0l = H0.low;\n\t            var H1h = H1.high;\n\t            var H1l = H1.low;\n\t            var H2h = H2.high;\n\t            var H2l = H2.low;\n\t            var H3h = H3.high;\n\t            var H3l = H3.low;\n\t            var H4h = H4.high;\n\t            var H4l = H4.low;\n\t            var H5h = H5.high;\n\t            var H5l = H5.low;\n\t            var H6h = H6.high;\n\t            var H6l = H6.low;\n\t            var H7h = H7.high;\n\t            var H7l = H7.low;\n\n\t            // Working variables\n\t            var ah = H0h;\n\t            var al = H0l;\n\t            var bh = H1h;\n\t            var bl = H1l;\n\t            var ch = H2h;\n\t            var cl = H2l;\n\t            var dh = H3h;\n\t            var dl = H3l;\n\t            var eh = H4h;\n\t            var el = H4l;\n\t            var fh = H5h;\n\t            var fl = H5l;\n\t            var gh = H6h;\n\t            var gl = H6l;\n\t            var hh = H7h;\n\t            var hl = H7l;\n\n\t            // Rounds\n\t            for (var i = 0; i < 80; i++) {\n\t                // Shortcut\n\t                var Wi = W[i];\n\n\t                // Extend message\n\t                if (i < 16) {\n\t                    var Wih = Wi.high = M[offset + i * 2]     | 0;\n\t                    var Wil = Wi.low  = M[offset + i * 2 + 1] | 0;\n\t                } else {\n\t                    // Gamma0\n\t                    var gamma0x  = W[i - 15];\n\t                    var gamma0xh = gamma0x.high;\n\t                    var gamma0xl = gamma0x.low;\n\t                    var gamma0h  = ((gamma0xh >>> 1) | (gamma0xl << 31)) ^ ((gamma0xh >>> 8) | (gamma0xl << 24)) ^ (gamma0xh >>> 7);\n\t                    var gamma0l  = ((gamma0xl >>> 1) | (gamma0xh << 31)) ^ ((gamma0xl >>> 8) | (gamma0xh << 24)) ^ ((gamma0xl >>> 7) | (gamma0xh << 25));\n\n\t                    // Gamma1\n\t                    var gamma1x  = W[i - 2];\n\t                    var gamma1xh = gamma1x.high;\n\t                    var gamma1xl = gamma1x.low;\n\t                    var gamma1h  = ((gamma1xh >>> 19) | (gamma1xl << 13)) ^ ((gamma1xh << 3) | (gamma1xl >>> 29)) ^ (gamma1xh >>> 6);\n\t                    var gamma1l  = ((gamma1xl >>> 19) | (gamma1xh << 13)) ^ ((gamma1xl << 3) | (gamma1xh >>> 29)) ^ ((gamma1xl >>> 6) | (gamma1xh << 26));\n\n\t                    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n\t                    var Wi7  = W[i - 7];\n\t                    var Wi7h = Wi7.high;\n\t                    var Wi7l = Wi7.low;\n\n\t                    var Wi16  = W[i - 16];\n\t                    var Wi16h = Wi16.high;\n\t                    var Wi16l = Wi16.low;\n\n\t                    var Wil = gamma0l + Wi7l;\n\t                    var Wih = gamma0h + Wi7h + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0);\n\t                    var Wil = Wil + gamma1l;\n\t                    var Wih = Wih + gamma1h + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0);\n\t                    var Wil = Wil + Wi16l;\n\t                    var Wih = Wih + Wi16h + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0);\n\n\t                    Wi.high = Wih;\n\t                    Wi.low  = Wil;\n\t                }\n\n\t                var chh  = (eh & fh) ^ (~eh & gh);\n\t                var chl  = (el & fl) ^ (~el & gl);\n\t                var majh = (ah & bh) ^ (ah & ch) ^ (bh & ch);\n\t                var majl = (al & bl) ^ (al & cl) ^ (bl & cl);\n\n\t                var sigma0h = ((ah >>> 28) | (al << 4))  ^ ((ah << 30)  | (al >>> 2)) ^ ((ah << 25) | (al >>> 7));\n\t                var sigma0l = ((al >>> 28) | (ah << 4))  ^ ((al << 30)  | (ah >>> 2)) ^ ((al << 25) | (ah >>> 7));\n\t                var sigma1h = ((eh >>> 14) | (el << 18)) ^ ((eh >>> 18) | (el << 14)) ^ ((eh << 23) | (el >>> 9));\n\t                var sigma1l = ((el >>> 14) | (eh << 18)) ^ ((el >>> 18) | (eh << 14)) ^ ((el << 23) | (eh >>> 9));\n\n\t                // t1 = h + sigma1 + ch + K[i] + W[i]\n\t                var Ki  = K[i];\n\t                var Kih = Ki.high;\n\t                var Kil = Ki.low;\n\n\t                var t1l = hl + sigma1l;\n\t                var t1h = hh + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + chl;\n\t                var t1h = t1h + chh + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Kil;\n\t                var t1h = t1h + Kih + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Wil;\n\t                var t1h = t1h + Wih + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0);\n\n\t                // t2 = sigma0 + maj\n\t                var t2l = sigma0l + majl;\n\t                var t2h = sigma0h + majh + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0);\n\n\t                // Update working variables\n\t                hh = gh;\n\t                hl = gl;\n\t                gh = fh;\n\t                gl = fl;\n\t                fh = eh;\n\t                fl = el;\n\t                el = (dl + t1l) | 0;\n\t                eh = (dh + t1h + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\n\t                dh = ch;\n\t                dl = cl;\n\t                ch = bh;\n\t                cl = bl;\n\t                bh = ah;\n\t                bl = al;\n\t                al = (t1l + t2l) | 0;\n\t                ah = (t1h + t2h + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H0l = H0.low  = (H0l + al);\n\t            H0.high = (H0h + ah + ((H0l >>> 0) < (al >>> 0) ? 1 : 0));\n\t            H1l = H1.low  = (H1l + bl);\n\t            H1.high = (H1h + bh + ((H1l >>> 0) < (bl >>> 0) ? 1 : 0));\n\t            H2l = H2.low  = (H2l + cl);\n\t            H2.high = (H2h + ch + ((H2l >>> 0) < (cl >>> 0) ? 1 : 0));\n\t            H3l = H3.low  = (H3l + dl);\n\t            H3.high = (H3h + dh + ((H3l >>> 0) < (dl >>> 0) ? 1 : 0));\n\t            H4l = H4.low  = (H4l + el);\n\t            H4.high = (H4h + eh + ((H4l >>> 0) < (el >>> 0) ? 1 : 0));\n\t            H5l = H5.low  = (H5l + fl);\n\t            H5.high = (H5h + fh + ((H5l >>> 0) < (fl >>> 0) ? 1 : 0));\n\t            H6l = H6.low  = (H6l + gl);\n\t            H6.high = (H6h + gh + ((H6l >>> 0) < (gl >>> 0) ? 1 : 0));\n\t            H7l = H7.low  = (H7l + hl);\n\t            H7.high = (H7h + hh + ((H7l >>> 0) < (hl >>> 0) ? 1 : 0));\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 30] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 31] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Convert hash to 32-bit word array before returning\n\t            var hash = this._hash.toX32();\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        },\n\n\t        blockSize: 1024/32\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA512('message');\n\t     *     var hash = CryptoJS.SHA512(wordArray);\n\t     */\n\t    C.SHA512 = Hasher._createHelper(SHA512);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA512(message, key);\n\t     */\n\t    C.HmacSHA512 = Hasher._createHmacHelper(SHA512);\n\t}());\n\n\n\treturn CryptoJS.SHA512;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"), require(\"./sha512\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\", \"./sha512\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA512;\n\n}));","import Hex from 'crypto-js/enc-hex';\nimport HmacSHA512 from 'crypto-js/hmac-sha512';\nimport { recognizerLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Compute HMAC signature for server authentication\n *\n * @param {Object} input Input data to compute HMAC\n * @param {String} applicationKey Current applicationKey\n * @param {String} hmacKey Current hmacKey\n * @return {String} Signature\n */\nexport function computeHmac(input, applicationKey, hmacKey) {\n  const jsonInput = (typeof input === 'object') ? JSON.stringify(input) : input;\n  logger.debug('The HmacSHA512 function is loaded', HmacSHA512);\n  return new HmacSHA512(jsonInput, applicationKey + hmacKey).toString(Hex);\n}\n","/* eslint-disable no-unused-expressions */\nimport * as CryptoHelper from '../CryptoHelper';\n\n/**\n * Parse JSON String to Object\n * @param {Object} req JSON string result to be parsed\n * @return {Object} Parsed response\n */\nfunction parse(req) {\n  let result;\n  try {\n    result = JSON.parse(req.responseText);\n  } catch (e) {\n    result = req.responseText;\n  }\n  return result;\n}\n\n/**\n * Transform object data request to a list of parameters\n * @param {Object} obj Query properties\n * @return {String} URI encoded string\n */\nfunction transformRequest(obj) {\n  const str = [];\n  Object.keys(obj).forEach((p) => {\n    if ((typeof obj[p] !== 'undefined') &&\n        (typeof obj[p] !== 'function')) {\n      str.push(`${encodeURIComponent(p)}=${encodeURIComponent(obj[p])}`);\n    }\n  });\n  return str.join('&');\n}\n\n/**\n * Send request to the network and return a promise\n * @param {String} type Request type (GET/POST)\n * @param {String} url URL\n * @param {Object} data Data to be sent\n * @param {RecognizerContext} [recognizerContext] Recognizer context\n * @param {String} apiVersion api version\n * @param {String} mimeType MimeType to be used\n * @return {Promise}\n */\nfunction xhr(type, url, data, recognizerContext = {}, apiVersion, mimeType) {\n  const pptxMimeType = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';\n  const configuration = recognizerContext.editor.configuration;\n  const recognizerContextRef = recognizerContext;\n  return new Promise((resolve, reject) => {\n    // We are writing some browser module here so the no import found should be ignored\n    // eslint-disable-next-line no-undef\n    const request = new XMLHttpRequest();\n    request.open(type, url, true);\n    request.withCredentials = true;\n    if (apiVersion === 'V3') {\n      request.setRequestHeader('Accept', 'application/json');\n      request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=UTF-8');\n    } else if (apiVersion === 'V4') {\n      switch (configuration.recognitionParams.type) {\n        case 'TEXT':\n          request.setRequestHeader('Accept', 'application/json,' + mimeType);\n          break;\n        case 'MATH':\n          request.setRequestHeader('Accept', 'application/json,' + mimeType);\n          break;\n        case 'DIAGRAM':\n          request.setRequestHeader('Accept', 'application/json,' + mimeType);\n          break;\n        case 'Raw Content':\n          request.setRequestHeader('Accept', 'application/json,' + mimeType);\n          break;\n        default:\n          break;\n      }\n      request.setRequestHeader('applicationKey', configuration.recognitionParams.server.applicationKey);\n      request.setRequestHeader('hmac', CryptoHelper.computeHmac(JSON.stringify(data), configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey));\n      request.setRequestHeader('Content-Type', 'application/json');\n    }\n\n    const isBlobType = mimeType && (mimeType === pptxMimeType || mimeType.startsWith('image/png') || mimeType.startsWith('image/jpeg'));\n    if (isBlobType) {\n      request.responseType = 'blob';\n    }\n\n    request.onerror = () => {\n      reject({ msg: `Could not connect to ${url} connection error`, recoverable: false });\n    };\n\n    request.onload = () => {\n      if (request.status >= 200 && request.status < 300) {\n        isBlobType ? resolve(request.response) : resolve(parse(request));\n      } else {\n        reject(new Error(request.responseText));\n      }\n    };\n\n    request.onreadystatechange = () => {\n      if (request.readyState === 4) {\n        if (request.status >= 200 && request.status < 300) {\n          isBlobType ? resolve(request.response) : resolve(parse(request));\n        }\n      }\n    };\n\n    if (recognizerContextRef) {\n      recognizerContextRef.idle = false;\n    }\n    if (apiVersion === 'V4') {\n      request.send(JSON.stringify(data));\n    } else {\n      request.send(data ? transformRequest(data) : undefined);\n    }\n  }).then((res) => {\n    if (recognizerContextRef) {\n      recognizerContextRef.idle = true;\n    }\n    return res;\n  });\n}\n\n/**\n * Get request\n * @param {RecognizerContext} recognizerContext Recognizer context\n * @param {String} url URL\n * @param {Object} params Query properties\n * @return {Promise}\n */\nexport function get(recognizerContext, url, params) {\n  let queryUrl = url;\n  if (params) {\n    queryUrl += `?${transformRequest(params)}`;\n  }\n  return xhr('GET', queryUrl, undefined, recognizerContext);\n}\n\n/**\n * Post request\n * @param {RecognizerContext} recognizerContext Recognizer context\n * @param {String} url URL\n * @param {Object} data Data to be sent\n * @param {String} apiVersion api version\n * @param {String} mimeType MimeType to be used\n * @return {Promise}\n */\nexport function post(recognizerContext, url, data, apiVersion, mimeType) {\n  return xhr('POST', url, data, recognizerContext, apiVersion, mimeType);\n}\n","import { recognizerLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Recognition context\n * @typedef {Object} RecognitionContext\n * @property {Model} model\n * @property {Callback} callback\n */\n\n/**\n * Recognizer context\n * @typedef {Object} RecognizerContext\n * @property {Editor} editor Get a reference to the current editor\n * @property {Array<RecognitionContext>} recognitionContexts=[]\n * @property {Promise} initPromise=undefined\n * @property {RecognitionPositions} lastPositions  Last recognition sent/received stroke indexes.\n * @property {String} url=undefined\n * @property {WebSocket} websocket=undefined\n * @property {function} websocketCallback=undefined\n * @property {function} reconnect=undefined\n * @property {Number} currentReconnectionCount=0\n * @property {String} sessionId=undefined\n * @property {Number} contentPartCount=0\n * @property {String} currentPartId=undefined\n * @property {String} instanceId=undefined\n * @property {Boolean} canUndo=false\n * @property {Boolean} canRedo=false\n * @property {Boolean} isEmpty=false\n * @property {Array} supportedImportMimeTypes=[]\n * @property {Number} undoStackIndex=0\n * @property {Number} possibleUndoCount=0\n * @property {Boolean} idle=true\n * @property {Boolean} initialized=false\n */\n/**\n * Create a new recognizer context\n * @param {Editor} editor\n * @return {RecognizerContext} An object that contains all recognizer context\n */\nexport function createEmptyRecognizerContext(editor) {\n  const id = Date.now();\n  logger.info('Create empty recognizer context with ID: ' + id);\n  return {\n    id,\n    editor,\n    // websocket\n    recognitionContexts: [],\n    initPromise: undefined,\n    lastPositions: {\n      lastSentPosition: -1,\n      lastReceivedPosition: -1\n    },\n    url: undefined,\n    websocket: undefined,\n    websocketCallback: undefined,\n    reconnect: undefined,\n    currentReconnectionCount: 0,\n    sessionId: undefined,\n    contentPartCount: 0,\n    currentPartId: undefined,\n    instanceId: undefined,\n    canUndo: false,\n    canRedo: false,\n    isEmpty: undefined,\n    supportedImportMimeTypes: [],\n    undoStackIndex: 0,\n    possibleUndoCount: 0,\n    idle: true,\n    initialized: false\n  };\n}\n\n/**\n * Return true if a reset is required, false otherwise\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @return {Boolean}\n */\nexport function isResetRequired(recognizerContext, model) {\n  if (recognizerContext.lastPositions) {\n    return recognizerContext.lastPositions.lastSentPosition >= model.rawStrokes.length - 1;\n  }\n  return false;\n}\n\n/**\n * Update the recognition context positions\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {RecognitionPositions} positions Current recognition positions\n * @return {RecognizerContext}\n */\nexport function updateRecognitionPositions(recognizerContext, positions) {\n  const recognizerContextRef = recognizerContext;\n  if (positions) {\n    recognizerContextRef.lastPositions.lastSentPosition = positions.lastSentPosition;\n    recognizerContextRef.lastPositions.lastReceivedPosition = positions.lastReceivedPosition;\n  }\n  if (recognizerContextRef.lastPositions.lastSentPosition === recognizerContextRef.lastPositions.lastReceivedPosition === -1) {\n    delete recognizerContextRef.instanceId;\n  }\n  return recognizerContextRef;\n}\n\n/**\n * Set the recognition context\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {RecognitionContext} recognitionContext\n * @return {RecognizerContext}\n */\nexport function setRecognitionContext(recognizerContext, recognitionContext) {\n  const recognizerContextRef = recognizerContext;\n  recognizerContextRef.recognitionContexts[0] = recognitionContext;\n  return recognizerContextRef;\n}\n\n\n/**\n * Test if it is possible to reconnect\n * @param {RecognizerContext} recognizerContext\n * @return {Boolean} True if possible, false otherwise\n */\nexport function canReconnect(recognizerContext) {\n  return recognizerContext.websocket.autoReconnect === true && recognizerContext.currentReconnectionCount <= recognizerContext.websocket.maxRetryCount;\n}\n\n/**\n * Test if it should attempt immediate reconnect\n * @param {RecognizerContext} recognizerContext\n * @return {Boolean} True if should attempt reconnect, false otherwise\n */\nexport function shouldAttemptImmediateReconnect(recognizerContext) {\n  const recognizerContextRef = recognizerContext;\n  return recognizerContextRef.websocket.autoReconnect === true && recognizerContextRef.currentReconnectionCount++ <= recognizerContextRef.websocket.maxRetryCount;\n}\n\n/**\n * Lost connection message\n * @type {{type: string}}\n */\nexport const LOST_CONNEXION_MESSAGE = { type: 'LOST_CONNECTION' };\n\n/**\n * Explicit close message\n * @type {String}\n */\nexport const CLOSE_RECOGNIZER_MESSAGE = 'CLOSE_RECOGNIZER';\n\n","import { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport * as NetworkInterface from '../networkInterface';\nimport * as InkModel from '../../../model/InkModel';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\n\n/**\n * @param {String} suffixUrl\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @param {function(recognizerContext: RecognizerContext, model: Model): Object} buildMessage\n * @return {Promise.<Model>} Promise that return an updated model as a result\n */\nexport function postMessage(suffixUrl, recognizerContext, model, buildMessage) {\n  const configuration = recognizerContext.editor.configuration;\n  return NetworkInterface.post(recognizerContext, `${configuration.recognitionParams.server.scheme}://${configuration.recognitionParams.server.host}${suffixUrl}`, buildMessage(recognizerContext, model), 'V3')\n    .then(\n      (response) => {\n        logger.debug('Cdkv3RestRecognizer success', response);\n        const positions = recognizerContext.lastPositions;\n        positions.lastReceivedPosition = positions.lastSentPosition;\n        const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, positions);\n        if (response.instanceId) {\n          recognizerContextReference.instanceId = response.instanceId;\n        }\n        return response;\n      }\n    );\n}\n","/**\n * Extract the exports\n * @param {Model} model Current model\n * @return {Object} exports\n */\nexport function extractExports(model) {\n  // We recopy the recognized strokes to flag them as toBeRemove if they are scratched out or map with a symbol\n  if (model.rawResults &&\n    model.rawResults.exports &&\n    model.rawResults.exports.result &&\n    model.rawResults.exports.result.textSegmentResult &&\n    model.rawResults.exports.result.textSegmentResult.candidates) {\n    return {\n      CANDIDATES: model.rawResults.exports.result,\n      TEXT: model.rawResults.exports.result.textSegmentResult.candidates[model.rawResults.exports.result.textSegmentResult.selectedCandidateIdx].label\n    };\n  }\n  return {};\n}\n","import { recognizerLogger as logger } from '../configuration/LoggerConfig';\nimport * as InkModel from '../model/InkModel';\nimport * as RecognizerContext from '../model/RecognizerContext';\nimport Constants from '../configuration/Constants';\n\n/**\n * Triggers\n * @typedef {Object} Triggers\n * @property {Array<String>} exportContent Supported triggers for exporting content.\n * @property {Array<String>} [addStrokes] Supported triggers for adding strokes.\n */\n\n/**\n * Recognizer info\n * @typedef {Object} RecognizerInfo\n * @property {Array<String>} types Supported recognition types (TEXT, MATH, SHAPE, MUSIC, ANALYZER).\n * @property {String} protocol Supported protocol (REST, WEBSOCKET).\n * @property {String} apiVersion Supported API version.\n * @property {Triggers} availableTriggers Supported triggers for this recognizer.\n */\n\n/**\n * Recognizer callback\n * @typedef {function} RecognizerCallback\n * @param {Object} [err] Error\n * @param {Model} [model] Result\n * @param {...String} [types] Result types\n */\n\n/**\n * Simple callback\n * @typedef {function} Callback\n * @param {Object} [err] Error\n * @param {Object} [res] Result\n */\n\n/**\n * Recognition service entry point\n * @typedef {Object} Recognizer\n * @property {function(): RecognizerInfo} getInfo Get information about the supported configuration (protocol, type, apiVersion, ...).\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} init Initialize recognition.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} clear Clear server context. Currently nothing to do there.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} close Close and free all resources that will no longer be used by the recognizer.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} [undo] Undo Undo the last done action.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} [redo] Redo Redo the previously undone action.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback, element: Element)} [resize] Resize.\n * @property {function(recognizerContext: RecognizerContext, model: Model, strokes: Array<Stroke>, callback: RecognizerCallback)} [pointerEvents] Pointer Events.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} [addStrokes] Add strokes.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} [export_] Export content.\n * @property {function(recognizerContext: RecognizerContext, model: Model, data: Blob, callback: RecognizerCallback)} [import_] Import content.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback, conversionState: String)} [convert] Convert.\n * @property {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} [waitForIdle] Wait for idle.\n * @property {function(recognizerContext: RecognizerContext, model: Model, penStyle: PenStyle, callback: RecognizerCallback)} [setPenStyle] Set pen style.\n * @property {function(recognizerContext: RecognizerContext, model: Model, penStyleClasses: String, callback: RecognizerCallback)} [setPenStyleClasses] Set pen style classes.\n * @property {function(recognizerContext: RecognizerContext, model: Model, theme: Theme, callback: RecognizerCallback)} [setTheme] Set theme.\n */\n\n/**\n * Initialize recognition\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function init(recognizerContext, model, callback) {\n  const modelRef = InkModel.resetModelPositions(model);\n  logger.debug('Updated model', modelRef);\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  recognizerContextRef.initPromise = Promise.resolve(modelRef);\n  recognizerContextRef.initPromise\n    .then((res) => {\n      recognizerContextRef.initialized = true;\n      logger.debug('Updated recognizer context', recognizerContextRef);\n      callback(undefined, res, Constants.EventType.LOADED);\n    });\n}\n\n/**\n * Reset server context. Currently nothing to do there.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function reset(recognizerContext, model, callback) {\n  const modelRef = InkModel.resetModelPositions(model);\n  logger.debug('Updated model', modelRef);\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  delete recognizerContextRef.instanceId;\n  logger.debug('Updated recognizer context', recognizerContextRef);\n  callback(undefined, modelRef);\n}\n\n/**\n * Clear server context. Currently nothing to do there.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function clear(recognizerContext, model, callback) {\n  const modelRef = InkModel.clearModel(model);\n  logger.debug('Updated model', modelRef);\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  delete recognizerContextRef.instanceId;\n  logger.debug('Updated recognizer context', recognizerContextRef);\n  callback(undefined, modelRef, Constants.EventType.CHANGED, Constants.EventType.EXPORTED, Constants.EventType.RENDERED);\n}\n\n/**\n * Close and free all resources that will no longer be used by the recognizer.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function close(recognizerContext, model, callback) {\n  const recognizerContextRef = recognizerContext;\n  recognizerContextRef.initialized = false;\n  delete recognizerContextRef.instanceId;\n  callback(undefined, model);\n}\n","/* eslint-disable no-underscore-dangle */\nimport { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport Constants from '../../../configuration/Constants';\nimport * as InkModel from '../../../model/InkModel';\nimport * as StrokeComponent from '../../../model/StrokeComponent';\nimport * as CryptoHelper from '../../CryptoHelper';\nimport * as Cdkv3RestRecognizerUtil from './Cdkv3RestRecognizerUtil';\nimport * as Cdkv3CommonTextRecognizer from '../../common/v3/Cdkv3CommonTextRecognizer';\n\nexport { init, close, clear, reset } from '../../DefaultRecognizer';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const textRestV3Configuration = {\n  types: [Constants.RecognitionType.TEXT],\n  protocol: Constants.Protocol.REST,\n  apiVersion: 'V3',\n  availableTriggers: {\n    exportContent: [\n      Constants.Trigger.QUIET_PERIOD,\n      Constants.Trigger.DEMAND\n    ]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return textRestV3Configuration;\n}\n\n/**\n * Internal function to build the payload to ask for a recognition.\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @return {Object}\n */\nexport function buildInput(recognizerContext, model) {\n  const configuration = recognizerContext.editor.configuration;\n  const input = {\n    inputUnits: [{\n      textInputType: 'MULTI_LINE_TEXT',\n      // As Rest TEXT recognition is non incremental wa add the already recognized strokes\n      components: model.rawStrokes.map(stroke => StrokeComponent.toJSON(stroke))\n    }]\n  };\n  Object.assign(input, { textParameter: configuration.recognitionParams.v3.textParameter }); // Building the input with the suitable parameters\n\n  logger.debug(`input.inputUnits[0].components size is ${input.inputUnits[0].components.length}`);\n\n  const data = {\n    instanceId: recognizerContext ? recognizerContext.instanceId : undefined,\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    textInput: JSON.stringify(input)\n  };\n\n  if (configuration.recognitionParams.server.hmacKey) {\n    data.hmac = CryptoHelper.computeHmac(data.textInput, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey);\n  }\n  InkModel.updateModelSentPosition(model);\n  return data;\n}\n\nfunction resultCallback(model, res, callback) {\n  logger.debug('Cdkv3RestTextRecognizer result callback', model);\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  modelReference.rawResults.exports = res;\n  modelReference.exports = Cdkv3CommonTextRecognizer.extractExports(model);\n  logger.debug('Cdkv3RestTextRecognizer model updated', modelReference);\n  callback(undefined, modelReference, Constants.EventType.EXPORTED, Constants.EventType.IDLE);\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function export_(recognizerContext, model, callback) {\n  Cdkv3RestRecognizerUtil.postMessage('/api/v3.0/recognition/rest/text/doSimpleRecognition.json', recognizerContext, model, buildInput)\n    .then(res => resultCallback(model, res, callback))\n    .catch(err => callback(err, model));\n}\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig';\n\n/**\n * Extract the exports\n * @param {Model} model Current model\n * @return {Object} Recognition result\n */\nexport function extractExports(model) {\n  if (model.rawResults &&\n      model.rawResults.exports &&\n      model.rawResults.exports.result &&\n      model.rawResults.exports.result.results &&\n      model.rawResults.exports.result.results.length > 0) {\n    return model.rawResults.exports.result.results\n      .map((item) => {\n        const res = {};\n        if (Object.keys(item).includes('root')) {\n          res[`${item.type}`] = item.root;\n        } else {\n          res[`${item.type}`] = item.value;\n        }\n        return res;\n      })\n      .reduce((a, b) => Object.assign(a, b), {});\n  }\n  return {};\n}\n","import { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\n\n/**\n * Extract the recognized symbols\n * @param {Model} model Current model\n * @return {Array<Object>} Recognized symbols\n */\nexport function extractRecognizedSymbols(model) {\n  // We recopy the recognized strokes to flag them as toBeRemove if they are scratched out or map with a symbol\n  const strokeList = [...model.rawStrokes];\n\n  if (model.rawResults &&\n      model.rawResults.exports &&\n      model.rawResults.exports.result &&\n      model.rawResults.exports.result.scratchOutResults &&\n      (model.rawResults.exports.result.scratchOutResults.length > 0)) {\n    const inkRanges = model.rawResults.exports.result.scratchOutResults\n      .map(scratchOutResult => scratchOutResult.erasedInkRanges.concat(scratchOutResult.inkRanges))\n      .reduce((a, b) => a.concat(b));\n    return strokeList.filter((stroke, index) => !inkRanges.find(inkRange => inkRange.component === index));\n  }\n  return strokeList;\n}\n","/* eslint-disable no-underscore-dangle */\nimport { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport Constants from '../../../configuration/Constants';\nimport * as InkModel from '../../../model/InkModel';\nimport * as StrokeComponent from '../../../model/StrokeComponent';\nimport * as CryptoHelper from '../../CryptoHelper';\nimport * as CdkCommonUtil from '../../common/CdkCommonUtil';\nimport * as Cdkv3RestRecognizerUtil from './Cdkv3RestRecognizerUtil';\nimport * as Cdkv3CommonMathRecognizer from '../../common/v3/Cdkv3CommonMathRecognizer';\n\nexport { init, close, clear, reset } from '../../DefaultRecognizer';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const mathRestV3Configuration = {\n  types: [Constants.RecognitionType.MATH],\n  protocol: Constants.Protocol.REST,\n  apiVersion: 'V3',\n  availableTriggers: {\n    exportContent: [\n      Constants.Trigger.QUIET_PERIOD,\n      Constants.Trigger.DEMAND\n    ]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return mathRestV3Configuration;\n}\n\n/**\n * Internal function to build the payload to ask for a recognition.\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @return {Object}\n */\nfunction buildInput(recognizerContext, model) {\n  const configuration = recognizerContext.editor.configuration;\n  const input = {\n    // As Rest MATH recognition is non incremental we add the already recognized strokes\n    components: model.rawStrokes.map(stroke => StrokeComponent.toJSON(stroke))\n  };\n  Object.assign(input, configuration.recognitionParams.v3.mathParameter); // Building the input with the suitable parameters\n\n  logger.debug(`input.components size is ${input.components.length}`);\n\n  const data = {\n    instanceId: recognizerContext ? recognizerContext.instanceId : undefined,\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    mathInput: JSON.stringify(input)\n  };\n\n  if (configuration.recognitionParams.server.hmacKey) {\n    data.hmac = CryptoHelper.computeHmac(data.mathInput, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey);\n  }\n  InkModel.updateModelSentPosition(model);\n  return data;\n}\n\nfunction resultCallback(model, res, callback) {\n  logger.debug('Cdkv3RestMathRecognizer result callback', model);\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  modelReference.rawResults.exports = res;\n  modelReference.recognizedSymbols = Cdkv3CommonMathRecognizer.extractRecognizedSymbols(model);\n  modelReference.exports = CdkCommonUtil.extractExports(model);\n  logger.debug('Cdkv3RestMathRecognizer model updated', modelReference);\n  callback(undefined, modelReference, Constants.EventType.EXPORTED, Constants.EventType.IDLE);\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function export_(recognizerContext, model, callback) {\n  return Cdkv3RestRecognizerUtil.postMessage('/api/v3.0/recognition/rest/math/doSimpleRecognition.json', recognizerContext, model, buildInput)\n    .then(res => resultCallback(model, res, callback))\n    .catch(err => callback(err, model));\n}\n","import { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport * as InkModel from '../../../model/InkModel';\n\n/**\n * Get style for the strokes matching the ink ranges\n * @param {Model} model\n * @param {Array<Object>} inkRanges\n * @return {{color: String, width: Number}} Style to apply\n */\nexport function getStyleFromInkRanges(model, inkRanges) {\n  let strokes = model.rawStrokes;\n  if (inkRanges && (inkRanges.length > 0)) {\n    strokes = inkRanges\n      .map(inkRange => InkModel.extractStrokesFromInkRange(model, inkRange.stroke ? inkRange.stroke : inkRange.firstStroke, inkRange.stroke ? inkRange.stroke : inkRange.lastStroke, inkRange.firstPoint, inkRange.lastPoint))\n      .reduce((a, b) => a.concat(b));\n  }\n  // FIXME hack to apply the rendering param of the first element' stroke\n  return {\n    color: strokes[0].color,\n    width: strokes[0].width\n  };\n}\n\n/**\n * Extract recognized symbols from recognition output\n * @param {Model} model Current model\n * @param {Object} segment Shape recognition output\n * @return {Array<Object>} Recognized symbols\n */\nexport function extractShapeSymbols(model, segment) {\n  if (segment.candidates && segment.candidates.length > 0) {\n    const selectedCandidate = segment.candidates[segment.selectedCandidateIndex];\n    switch (selectedCandidate.type) {\n      case 'notRecognized':\n        if (segment.inkRanges && segment.inkRanges.length > 0) {\n          return segment.inkRanges\n            .map(inkRange => InkModel.extractStrokesFromInkRange(model, inkRange.firstStroke, inkRange.lastStroke, inkRange.firstPoint, inkRange.lastPoint))\n            .reduce((a, b) => a.concat(b));\n        }\n        return [];\n      case 'recognizedShape':\n        return selectedCandidate.primitives;\n      default:\n        return [];\n    }\n  }\n  return [];\n}\n\n/**\n * Extract the recognized symbols\n * @param {Model} model Current model\n * @return {Array<Object>} Recognized symbols\n */\nexport function extractRecognizedSymbols(model) {\n  if (model.rawResults &&\n      model.rawResults.exports &&\n      model.rawResults.exports.result &&\n      model.rawResults.exports.result.segments) {\n    return model.rawResults.exports.result.segments\n      .map((segment) => {\n        const style = getStyleFromInkRanges(model, segment.inkRanges);\n        return extractShapeSymbols(model, segment).map(primitive => Object.assign(primitive, style));\n      })\n      .reduce((a, b) => a.concat(b));\n  }\n  return [];\n}\n\n/**\n * Extract the exports\n * @param {Model} model Current model\n * @return {Object} exports\n */\nexport function extractExports(model) {\n  // We recopy the recognized strokes to flag them as toBeRemove if they are scratched out or map with a symbol\n  if (model.rawResults &&\n    model.rawResults.exports &&\n    model.rawResults.exports.result &&\n    model.rawResults.exports.result.segments) {\n    return {\n      SEGMENTS: model.rawResults.exports.result.segments\n    };\n  }\n  return {};\n}\n","/* eslint-disable no-underscore-dangle */\nimport { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport Constants from '../../../configuration/Constants';\nimport * as InkModel from '../../../model/InkModel';\nimport * as StrokeComponent from '../../../model/StrokeComponent';\nimport * as CryptoHelper from '../../CryptoHelper';\nimport * as Cdkv3RestRecognizerUtil from './Cdkv3RestRecognizerUtil';\nimport {\n  extractShapeSymbols,\n  getStyleFromInkRanges\n} from '../../common/v3/Cdkv3CommonShapeRecognizer';\n\nexport { init, close, clear, reset } from '../../DefaultRecognizer';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const analyzerRestV3Configuration = {\n  types: [Constants.RecognitionType.ANALYZER],\n  protocol: Constants.Protocol.REST,\n  apiVersion: 'V3',\n  availableTriggers: {\n    exportContent: [\n      Constants.Trigger.QUIET_PERIOD,\n      Constants.Trigger.DEMAND\n    ]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return analyzerRestV3Configuration;\n}\n\n/**\n * Internal function to build the payload to ask for a recognition.\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @return {Object}\n */\nfunction buildInput(recognizerContext, model) {\n  const configuration = recognizerContext.editor.configuration;\n  const input = {\n    // Incremental\n    components: model.rawStrokes.map(stroke => StrokeComponent.toJSON(stroke))\n  };\n  Object.assign(input, { parameter: configuration.recognitionParams.v3.analyzerParameter }); // Building the input with the suitable parameters\n\n  logger.debug(`input.components size is ${input.components.length}`);\n\n  const data = {\n    instanceId: recognizerContext ? recognizerContext.instanceId : undefined,\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    analyzerInput: JSON.stringify(input)\n  };\n\n  if (configuration.recognitionParams.server.hmacKey) {\n    data.hmac = CryptoHelper.computeHmac(data.analyzerInput, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey);\n  }\n  InkModel.updateModelSentPosition(model);\n  return data;\n}\n\nfunction extractSymbols(model, element) {\n  const style = getStyleFromInkRanges(model, element.inkRanges);\n  switch (element.elementType) {\n    case 'table':\n      return element.lines.map(line => Object.assign(line, style));\n    case 'textLine':\n      return [element].map(textLine => Object.assign(textLine, textLine.result.textSegmentResult.candidates[textLine.result.textSegmentResult.selectedCandidateIdx], style));\n    case 'shape':\n      return extractShapeSymbols(model, element).map(primitive => Object.assign(primitive, style));\n    default:\n      return [];\n  }\n}\n\nfunction extractRecognizedSymbolsFromAnalyzerResult(model) {\n  if (model.rawResults &&\n      model.rawResults.exports &&\n      model.rawResults.exports.result) {\n    return [...model.rawResults.exports.result.shapes, ...model.rawResults.exports.result.tables, ...model.rawResults.exports.result.textLines]\n      .map(element => extractSymbols(model, element))\n      .reduce((a, b) => a.concat(b));\n  }\n  return [];\n}\n\n/**\n * Extract the exports\n * @param {Model} model Current model\n * @return {Object} exports\n */\nfunction extractExports(model) {\n  if (model.rawResults &&\n    model.rawResults.exports &&\n    model.rawResults.exports.result) {\n    return {\n      ANALYSIS: model.rawResults.exports.result\n    };\n  }\n  return {};\n}\n\nfunction resultCallback(model, res, callback) {\n  logger.debug('Cdkv3RestAnalyzerRecognizer result callback', model);\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  modelReference.rawResults.exports = res;\n  modelReference.recognizedSymbols = extractRecognizedSymbolsFromAnalyzerResult(model);\n  modelReference.exports = extractExports(model);\n  logger.debug('Cdkv3RestAnalyzerRecognizer model updated', modelReference);\n  callback(undefined, modelReference, Constants.EventType.EXPORTED, Constants.EventType.CONVERTED, Constants.EventType.IDLE);\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function export_(recognizerContext, model, callback) {\n  return Cdkv3RestRecognizerUtil.postMessage('/api/v3.0/recognition/rest/analyzer/doSimpleRecognition.json', recognizerContext, model, buildInput)\n    .then(res => resultCallback(model, res, callback))\n    .catch(err => callback(err, model));\n}\n","/* eslint-disable no-underscore-dangle */\nimport { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport Constants from '../../../configuration/Constants';\nimport * as InkModel from '../../../model/InkModel';\nimport * as StrokeComponent from '../../../model/StrokeComponent';\nimport * as CryptoHelper from '../../CryptoHelper';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\nimport * as Cdkv3RestRecognizerUtil from './Cdkv3RestRecognizerUtil';\nimport * as Cdkv3CommonShapeRecognizer from '../../common/v3/Cdkv3CommonShapeRecognizer';\n\nexport { init, close } from '../../DefaultRecognizer';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const shapeRestV3Configuration = {\n  types: [Constants.RecognitionType.SHAPE],\n  protocol: Constants.Protocol.REST,\n  apiVersion: 'V3',\n  availableTriggers: {\n    exportContent: [\n      Constants.Trigger.QUIET_PERIOD,\n      Constants.Trigger.DEMAND\n    ]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return shapeRestV3Configuration;\n}\n\n/**\n * Internal function to build the payload to ask for a recognition.\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @return {Object}\n */\nfunction buildInput(recognizerContext, model) {\n  const configuration = recognizerContext.editor.configuration;\n  const input = {\n    components: InkModel.extractPendingStrokes(model).map(stroke => StrokeComponent.toJSON(stroke))\n  };\n  Object.assign(input, configuration.recognitionParams.v3.shapeParameter); // Building the input with the suitable parameters\n\n  logger.debug(`input.components size is ${input.components.length}`);\n\n  const data = {\n    instanceId: recognizerContext ? recognizerContext.instanceId : undefined,\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    shapeInput: JSON.stringify(input)\n  };\n\n  if (configuration.recognitionParams.server.hmacKey) {\n    data.hmac = CryptoHelper.computeHmac(data.shapeInput, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey);\n  }\n  InkModel.updateModelSentPosition(model);\n  return data;\n}\n\nfunction buildReset(recognizerContext, model) {\n  return {\n    instanceSessionId: recognizerContext ? recognizerContext.instanceId : undefined\n  };\n}\n\nfunction resultCallback(model, res, callback) {\n  logger.debug('Cdkv3RestShapeRecognizer result callback', model);\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  modelReference.rawResults.exports = res;\n  modelReference.recognizedSymbols = Cdkv3CommonShapeRecognizer.extractRecognizedSymbols(model);\n  modelReference.exports = Cdkv3CommonShapeRecognizer.extractExports(model);\n  logger.debug('Cdkv3RestShapeRecognizer model updated', modelReference);\n  callback(undefined, modelReference, Constants.EventType.EXPORTED, Constants.EventType.CONVERTED, Constants.EventType.IDLE);\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function export_(recognizerContext, model, callback) {\n  Cdkv3RestRecognizerUtil.postMessage('/api/v3.0/recognition/rest/shape/doSimpleRecognition.json', recognizerContext, model, buildInput)\n    .then(res => resultCallback(model, res, callback))\n    .catch(err => callback(err, model));\n}\n\n/**\n * Reset server context.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function reset(recognizerContext, model, callback) {\n  const modelRef = InkModel.resetModelPositions(model);\n  Cdkv3RestRecognizerUtil.postMessage('/api/v3.0/recognition/rest/shape/clearSessionId.json', recognizerContext, modelRef, buildReset)\n    .then(res => callback(undefined, modelRef, Constants.EventType.IDLE))\n    .catch(err => callback(err, modelRef));\n}\n\n/**\n * Do what is needed to clean the server context.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function clear(recognizerContext, model, callback) {\n  const modelRef = InkModel.clearModel(InkModel.cloneModel(model));\n  Cdkv3RestRecognizerUtil.postMessage('/api/v3.0/recognition/rest/shape/clearSessionId.json', recognizerContext, modelRef, buildReset)\n    .then(res => callback(undefined, modelRef, Constants.EventType.CHANGED, Constants.EventType.EXPORTED, Constants.EventType.CONVERTED, Constants.EventType.IDLE))\n    .catch(err => callback(err, modelRef));\n}\n","/* eslint-disable no-underscore-dangle */\nimport { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport Constants from '../../../configuration/Constants';\nimport * as InkModel from '../../../model/InkModel';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\nimport * as StrokeComponent from '../../../model/StrokeComponent';\nimport * as CryptoHelper from '../../CryptoHelper';\nimport * as CdkCommonUtil from '../../common/CdkCommonUtil';\nimport * as Cdkv3RestRecognizerUtil from './Cdkv3RestRecognizerUtil';\n\nexport { close, clear, reset } from '../../DefaultRecognizer';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const musicRestV3Configuration = {\n  types: [Constants.RecognitionType.MUSIC],\n  protocol: Constants.Protocol.REST,\n  apiVersion: 'V3',\n  availableTriggers: {\n    exportContent: [\n      Constants.Trigger.QUIET_PERIOD,\n      Constants.Trigger.DEMAND\n    ]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return musicRestV3Configuration;\n}\n\n/**\n * Internal function to build the payload to ask for a recognition.\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @return {Object}\n */\nfunction buildInput(recognizerContext, model) {\n  const configuration = recognizerContext.editor.configuration;\n  const input = {\n    // As Rest MUSIC recognition is non incremental wa add the already recognized strokes\n    components: []\n      .concat(model.defaultSymbols, model.rawStrokes)\n      .filter(symbol => symbol.type !== 'staff')\n      .map((symbol) => {\n        if (symbol.type === 'stroke') {\n          return StrokeComponent.toJSON(symbol);\n        }\n        return symbol;\n      })\n  };\n  const musicParameter = Object.assign({}, configuration.recognitionParams.v3.musicParameter);\n  delete musicParameter.clef; // FIXME find a way to avoid this ugly hack\n  Object.assign(input, musicParameter); // Building the input with the suitable parameters\n\n  logger.debug(`input.components size is ${input.components.length}`);\n\n  const data = {\n    instanceId: recognizerContext ? recognizerContext.instanceId : undefined,\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    musicInput: JSON.stringify(input)\n  };\n\n  if (configuration.recognitionParams.server.hmacKey) {\n    data.hmac = CryptoHelper.computeHmac(data.musicInput, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey);\n  }\n  InkModel.updateModelSentPosition(model);\n  return data;\n}\n\nfunction resultCallback(model, res, callback) {\n  logger.debug('Cdkv3RestMusicRecognizer result callback', model);\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  modelReference.rawResults.exports = res;\n  modelReference.exports = CdkCommonUtil.extractExports(model);\n  logger.debug('Cdkv3RestMusicRecognizer model updated', modelReference);\n  callback(undefined, modelReference, Constants.EventType.EXPORTED, Constants.EventType.IDLE);\n}\n\n/**\n * Initialize recognition\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function init(recognizerContext, model, callback) {\n  const modelRef = InkModel.resetModelPositions(model);\n  logger.debug('Updated model', modelRef);\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  recognizerContextRef.initPromise = Promise.resolve(modelRef);\n  recognizerContextRef.initPromise\n    .then((res) => {\n      recognizerContextRef.initialized = true;\n      logger.debug('Updated recognizer context', recognizerContextRef);\n      callback(undefined, res, Constants.EventType.LOADED, Constants.EventType.RENDERED);\n    });\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function export_(recognizerContext, model, callback) {\n  Cdkv3RestRecognizerUtil.postMessage('/api/v3.0/recognition/rest/music/doSimpleRecognition.json', recognizerContext, model, buildInput)\n    .then(res => resultCallback(model, res, callback))\n    .catch(err => callback(err, model));\n}\n","/* eslint-disable no-underscore-dangle */\nimport * as NetworkInterface from '../networkInterface';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\nimport { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport Constants from '../../../configuration/Constants';\nimport * as InkModel from '../../../model/InkModel';\nimport * as StrokeComponent from '../../../model/StrokeComponent';\nimport * as DefaultTheme from '../../../configuration/DefaultTheme';\nimport * as DefaultPenStyle from '../../../configuration/DefaultPenStyle';\n\nexport { init, close, clear, reset } from '../../DefaultRecognizer';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const iinkRestConfiguration = {\n  types: [Constants.RecognitionType.TEXT, Constants.RecognitionType.DIAGRAM, Constants.RecognitionType.MATH, Constants.RecognitionType.RAWCONTENT],\n  protocol: Constants.Protocol.REST,\n  apiVersion: 'V4',\n  availableTriggers: {\n    exportContent: [\n      Constants.Trigger.QUIET_PERIOD,\n      Constants.Trigger.DEMAND\n    ]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return iinkRestConfiguration;\n}\n\n\n/**\n * @param {String} suffixUrl\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @param {function(recognizerContext: RecognizerContext, model: Model, conversionState: String): Object} buildMessage\n * @param {String} conversionState\n * @param {String} mimeType\n * @return {Promise.<Model>} Promise that return an updated model as a result\n */\nexport function postMessage(suffixUrl, recognizerContext, model, buildMessage, conversionState = '', mimeType) {\n  const configuration = recognizerContext.editor.configuration;\n  return NetworkInterface.post(recognizerContext, `${configuration.recognitionParams.server.scheme}://${configuration.recognitionParams.server.host}${suffixUrl}`, buildMessage(recognizerContext, model, conversionState), 'V4', mimeType)\n    .then((response) => {\n      logger.debug('iinkRestRecognizer success', response);\n      const positions = recognizerContext.lastPositions;\n      positions.lastReceivedPosition = positions.lastSentPosition;\n      const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, positions);\n      if (response.instanceId) {\n        recognizerContextReference.instanceId = response.instanceId;\n      }\n      return response;\n    });\n}\n\nfunction buildTextConf(configuration) {\n  return {\n    text: configuration.recognitionParams.v4.text,\n    lang: configuration.recognitionParams.v4.lang,\n    export: configuration.recognitionParams.v4.export\n  };\n}\n\nfunction buildMathConf(configuration) {\n  return {\n    math: configuration.recognitionParams.v4.math,\n    lang: configuration.recognitionParams.v4.lang,\n    export: configuration.recognitionParams.v4.export\n  };\n}\n\nfunction buildDiagramConf(configuration) {\n  return {\n    diagram: configuration.recognitionParams.v4.diagram,\n    lang: configuration.recognitionParams.v4.lang,\n    export: configuration.recognitionParams.v4.export\n  };\n}\n\nfunction buildRawContentConf(configuration) {\n  return {\n    'raw-content': {\n      recognition: configuration.recognitionParams.v4['raw-content'].recognition\n    },\n    lang: configuration.recognitionParams.v4.lang,\n    export: configuration.recognitionParams.v4.export\n  };\n}\n\nfunction buildData(recognizerContext, model, conversionState) {\n  const configuration = recognizerContext.editor.configuration;\n  let dataConf;\n\n  if (configuration.recognitionParams.type === 'TEXT') {\n    dataConf = buildTextConf(configuration);\n  } else if (configuration.recognitionParams.type === 'MATH') {\n    dataConf = buildMathConf(configuration);\n  } else if (configuration.recognitionParams.type === 'DIAGRAM') {\n    dataConf = buildDiagramConf(configuration);\n  } else if (configuration.recognitionParams.type === 'Raw Content') {\n    dataConf = buildRawContentConf(configuration);\n  }\n\n  const newStrokes = [];\n  model.strokeGroups.forEach((group) => {\n    const newPenStyle = JSON.stringify(group.penStyle) === '{}' ? null : DefaultPenStyle.toCSS(group.penStyle);\n    const newGroup = {\n      penStyle: newPenStyle,\n      strokes: group.strokes.map(stroke => StrokeComponent.toJSONV4(stroke))\n    };\n    newStrokes.push(newGroup);\n  });\n\n  const contentType = configuration.recognitionParams.type === 'Raw Content' ? 'Raw Content' : configuration.recognitionParams.type.charAt(0)\n    .toUpperCase() + configuration.recognitionParams.type.slice(1)\n    .toLowerCase();\n\n  const data = {\n    configuration: dataConf,\n    xDPI: 96,\n    yDPI: 96,\n    contentType,\n    theme: DefaultTheme.toCSS(recognizerContext.editor.theme),\n    strokeGroups: newStrokes\n  };\n\n  if (recognizerContext.editor.domElement) {\n    data.height = recognizerContext.editor.domElement.clientHeight;\n    data.width = recognizerContext.editor.domElement.clientWidth;\n  }\n\n  if (conversionState) {\n    data.conversionState = 'DIGITAL_EDIT';\n  }\n\n  InkModel.updateModelSentPosition(model);\n  return data;\n}\n\nfunction extractExports(configuration, mimeType, res) {\n  const exports = {};\n  exports[mimeType] = res;\n  return exports;\n}\n\nfunction resultCallback(model, configuration, res, mimeType, callback) {\n  logger.debug('iinkRestRecognizer result callback', model);\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  modelReference.rawResults.exports = res;\n  if (modelReference.exports) {\n    Object.assign(modelReference.exports, extractExports(configuration, mimeType, res));\n  } else {\n    modelReference.exports = extractExports(configuration, mimeType, res);\n  }\n  logger.debug('iinkRestRecognizer model updated', modelReference);\n  callback(undefined, modelReference, Constants.EventType.EXPORTED, Constants.EventType.IDLE);\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n * @param {Array[String]} requestedMimeTypes\n */\nexport function export_(recognizerContext, model, callback, requestedMimeTypes) {\n  const configuration = recognizerContext.editor.configuration;\n\n  function callPostMessage(mimeType) {\n    postMessage('/api/v4.0/iink/batch', recognizerContext, model, buildData, configuration.restConversionState, mimeType)\n      .then((res) => {\n        resultCallback(model, configuration, res, mimeType, callback);\n      })\n      .catch((err) => {\n        callback(err, model);\n      });\n  }\n\n  if (requestedMimeTypes) {\n    requestedMimeTypes.forEach((mimeType) => {\n      callPostMessage(mimeType);\n    });\n  } else if (configuration.recognitionParams.type === 'TEXT') {\n    configuration.recognitionParams.v4.text.mimeTypes.forEach((mimeType) => {\n      callPostMessage(mimeType);\n    });\n  } else if (configuration.recognitionParams.type === 'DIAGRAM') {\n    configuration.recognitionParams.v4.diagram.mimeTypes.forEach((mimeType) => {\n      callPostMessage(mimeType);\n    });\n  } else if (configuration.recognitionParams.type === 'MATH') {\n    configuration.recognitionParams.v4.math.mimeTypes.forEach((mimeType) => {\n      callPostMessage(mimeType);\n    });\n  } else if (configuration.recognitionParams.type === 'Raw Content') {\n    configuration.recognitionParams.v4['raw-content'].mimeTypes.forEach((mimeType) => {\n      callPostMessage(mimeType);\n    });\n  }\n}\n\n/**\n * Ask for conversion using DIGITAL_EDIT\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function convert(recognizerContext, model, callback) {\n  const configuration = recognizerContext.editor.configuration;\n  postMessage('/api/v4.0/iink/batch', recognizerContext, model, buildData, 'DIGITAL_EDIT')\n    .then(res => resultCallback(model, configuration, res, callback))\n    .catch(err => callback(err, model));\n}\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig';\nimport * as RecognizerContext from '../../model/RecognizerContext';\n\nfunction infinitePing(websocket) {\n  const websocketRef = websocket;\n  websocketRef.pingLostCount++;\n  if (websocketRef.pingLostCount > websocketRef.maxPingLost) {\n    websocket.close(1000, 'PING_LOST');\n  } else if (websocketRef.readyState <= 1) {\n    setTimeout(() => {\n      if (websocketRef.readyState <= 1) {\n        websocketRef.send(JSON.stringify({ type: 'ping' }));\n        infinitePing(websocketRef);\n      }\n    }, websocketRef.pingDelay);\n  }\n}\n\n/**\n * Attach all socket attributes helping managing server connexion\n * @param {WebSocket} websocket Current WebSocket\n * @param {RecognizerContext} recognizerContext\n */\nfunction addWebsocketAttributes(websocket, recognizerContext) {\n  const websocketConfiguration = recognizerContext.editor.configuration.recognitionParams.server.websocket;\n  const socket = websocket;\n  socket.start = new Date();\n  socket.autoReconnect = websocketConfiguration.autoReconnect;\n  socket.maxRetryCount = websocketConfiguration.maxRetryCount;\n  socket.pingEnabled = websocketConfiguration.pingEnabled;\n  socket.pingDelay = websocketConfiguration.pingDelay;\n  socket.maxPingLost = websocketConfiguration.maxPingLostCount;\n  socket.pingLostCount = 0;\n  socket.recognizerContext = recognizerContext;\n}\n\n/**\n * @param {RecognizerContext} recognizerContext Recognizer context\n * @return {WebSocket} Opened WebSocket\n */\nexport function openWebSocket(recognizerContext) {\n  let socket;\n  try {\n    // eslint-disable-next-line no-undef\n    socket = new WebSocket(recognizerContext.url);\n  } catch (error) {\n    logger.error('Unable to open websocket, Check the host and your connectivity');\n  }\n  addWebsocketAttributes(socket, recognizerContext);\n  if (socket.pingEnabled) {\n    infinitePing(socket);\n  }\n\n  socket.onopen = (e) => {\n    logger.trace('onOpen');\n    recognizerContext.websocketCallback(e);\n  };\n\n  socket.onclose = (e) => {\n    logger.trace('onClose', new Date() - socket.start);\n    recognizerContext.websocketCallback(e);\n  };\n\n  socket.onerror = (e) => {\n    logger.trace('onError');\n    recognizerContext.websocketCallback(e);\n  };\n\n  socket.onmessage = (e) => {\n    logger.trace('onMessage');\n    socket.pingLostCount = 0;\n    const parsedMessage = JSON.parse(e.data);\n    if (parsedMessage.type !== 'pong') {\n      const callBackParam = {\n        type: e.type,\n        data: JSON.parse(e.data)\n      };\n      recognizerContext.websocketCallback(callBackParam);\n    }\n  };\n\n  return socket;\n}\n\n/**\n * Send data message\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Object} message Data message\n */\nexport function send(recognizerContext, message) {\n  const recognizerContextRef = recognizerContext;\n  recognizerContextRef.idle = false;\n\n  const websocket = recognizerContextRef.websocket;\n  if (websocket.readyState <= 1) {\n    websocket.send(JSON.stringify(message));\n    logger.debug(`${message.type} message sent`, message);\n  } else {\n    throw RecognizerContext.LOST_CONNEXION_MESSAGE;\n  }\n}\n\n/**\n * Close the websocket\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Number} code Exit code\n * @param {String} reason Exit reason\n */\nexport function close(recognizerContext, code, reason) {\n  const websocket = recognizerContext.websocket;\n  if (websocket && websocket.readyState < 2) {\n    websocket.close(code, reason);\n  }\n}\n","import { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport * as CryptoHelper from '../../CryptoHelper';\nimport * as NetworkWSInterface from '../networkWSInterface';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\nimport Constants from '../../../configuration/Constants';\n\n/**\n * A CDK v3 websocket dialog have this sequence :\n * ---------- Client ------------------------------------- Server ----------------------------------\n * init (send the applicationKey) ================>\n *                                       <=========== hmacChallenge\n * answerToHmacChallenge (send the hmac) =========>\n *                                       <=========== init\n * start (send the parameters and first strokes ) ===============>\n *                                       <=========== recognition with instance id\n * continue (send the other strokes ) ============>\n *                                       <=========== recognition\n */\n\nfunction buildHmacMessage(configuration, message) {\n  return {\n    type: 'hmac',\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    challenge: message.data.challenge,\n    hmac: CryptoHelper.computeHmac(message.data.challenge, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey)\n  };\n}\n\nfunction buildInitMessage(configuration) {\n  return {\n    type: 'applicationKey',\n    applicationKey: configuration.recognitionParams.server.applicationKey\n  };\n}\n\n/**\n * This function bind the right behaviour when a message is receive by the websocket.\n * @param {DestructuredPromise} destructuredPromise\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @return {function} Callback to handle WebSocket results\n */\nexport function buildWebSocketCallback(destructuredPromise, recognizerContext) {\n  return (message) => {\n    const recognizerContextRef = recognizerContext;\n    // Handle websocket messages\n    logger.trace(`${message.type} websocket callback`, message);\n    const recognitionContext = recognizerContext.recognitionContexts[recognizerContext.recognitionContexts.length - 1];\n    logger.debug('Current recognition context', recognitionContext);\n\n    switch (message.type) {\n      case 'open' :\n        NetworkWSInterface.send(recognizerContext, buildInitMessage(recognizerContext.editor.configuration));\n        break;\n      case 'message' :\n        logger.trace('Receiving message', message.data.type);\n        switch (message.data.type) {\n          case 'hmacChallenge' :\n            NetworkWSInterface.send(recognizerContext, buildHmacMessage(recognizerContext.editor.configuration, message));\n            break;\n          case 'init' :\n            recognizerContextRef.currentReconnectionCount = 0;\n            recognizerContextRef.idle = true;\n            recognizerContextRef.initialized = true;\n            recognitionContext.callback(undefined, message.data);\n            destructuredPromise.resolve(recognitionContext);\n            break;\n          case 'reset' :\n            recognizerContextRef.idle = true;\n            recognitionContext.callback(undefined, message.data);\n            break;\n          case 'mathResult' :\n          case 'textResult' :\n            recognizerContextRef.idle = true;\n            if (message.data.instanceId) {\n              if (recognizerContext.instanceId && recognizerContext.instanceId !== message.data.instanceId) {\n                logger.debug(`Instance id switch from ${recognizerContext.instanceId} to ${message.data.instanceId} this is suspicious`);\n              }\n              recognizerContextRef.instanceId = message.data.instanceId;\n              logger.debug('Memorizing instance id', message.data.instanceId);\n            }\n            recognitionContext.callback(undefined, message.data);\n            break;\n          case 'error' :\n            logger.debug('Error detected stopping all recognition', message);\n            if (recognitionContext) {\n              recognitionContext.callback(message.data);\n            } else {\n              destructuredPromise.reject(Object.assign({}, message.data, { recoverable: false }));\n            }\n            break;\n          default :\n            logger.warn('This is something unexpected in current recognizer. Not the type of message we should have here.', message);\n        }\n        break;\n      case 'error' :\n        logger.debug('Error detected stopping all recognition', message);\n        if (recognitionContext) {\n          recognitionContext.callback(Object.assign({}, message, { recoverable: false }));\n        } else {\n          destructuredPromise.reject(Object.assign({}, message, { recoverable: false }));\n        }\n        break;\n      case 'close' :\n        logger.debug('Close detected stopping all recognition', message);\n        recognizerContextRef.initialized = false;\n        if (recognitionContext) {\n          recognitionContext.callback(undefined, message);\n        } else {\n          destructuredPromise.reject(message);\n        }\n        break;\n      default :\n        logger.warn('This is something unexpected in current recognizer. Not the type of message we should have here.', message);\n    }\n  };\n}\n","/**\n * @typedef {Object} DestructuredPromise\n * @property {Promise} promise\n * @property {function(value: Object)} resolve\n * @property {function(reason: Object)} reject\n */\n\n/**\n * @return {DestructuredPromise}\n */\nexport function destructurePromise() {\n  let resolve;\n  let reject;\n  const initPromise = new Promise(\n    (resolveParam, rejectParam) => {\n      resolve = resolveParam;\n      reject = rejectParam;\n    });\n  return { promise: initPromise, resolve, reject };\n}\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig';\nimport Constants from '../../configuration/Constants';\nimport * as NetworkWSInterface from './networkWSInterface';\nimport * as PromiseHelper from '../../util/PromiseHelper';\nimport * as InkModel from '../../model/InkModel';\nimport * as RecognizerContext from '../../model/RecognizerContext';\n\nfunction buildUrl(configuration, suffixUrl) {\n  const scheme = (configuration.recognitionParams.server.scheme === 'https') ? 'wss' : 'ws';\n  return `${scheme}://${configuration.recognitionParams.server.host}${suffixUrl}`;\n}\n\nconst commonCallback = (model, err, res, callback) => {\n  if (res && res.type === 'close') {\n    return callback(err, model, Constants.EventType.CHANGED);\n  }\n  return callback(err, model);\n};\n\n/**\n * Build websocket function\n * @typedef {function} BuildWebSocketFunction\n * @param {DestructuredPromise} destructuredPromise\n * @param {RecognizerContext} recognizerContext\n * @return {Callback}\n */\n\n/**\n * Init the websocket recognizer.\n * Open the connexion and proceed to the hmac challenge.\n * @param {String} suffixUrl\n * @param {RecognizerContext} recognizerContext\n * @param {BuildWebSocketFunction} buildWebSocketCallback\n * @param {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} reconnect\n * @return {Promise} Fulfilled when the init phase is over.\n */\nexport function init(suffixUrl, recognizerContext, buildWebSocketCallback, reconnect) {\n  const recognitionContext = recognizerContext.recognitionContexts[0];\n  const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, recognitionContext.model.lastPositions);\n  recognizerContextReference.url = buildUrl(recognizerContext.editor.configuration, suffixUrl);\n  recognizerContextReference.reconnect = reconnect;\n\n  const destructuredInitPromise = PromiseHelper.destructurePromise();\n  recognizerContextReference.initPromise = destructuredInitPromise.promise;\n\n  logger.debug('Opening the websocket for context ', recognizerContext);\n  recognizerContextReference.websocketCallback = buildWebSocketCallback(destructuredInitPromise, recognizerContextReference);\n  recognizerContextReference.websocket = NetworkWSInterface.openWebSocket(recognizerContextReference);\n  return recognizerContextReference.initPromise.then((res) => {\n    logger.debug('Init over', res);\n    return res;\n  });\n}\n\nexport function retry(func, recognizerContext, model, callback, ...params) {\n  if (RecognizerContext.shouldAttemptImmediateReconnect(recognizerContext) && recognizerContext.reconnect) {\n    logger.info('Attempting a retry', recognizerContext.currentReconnectionCount);\n    recognizerContext.reconnect(recognizerContext, model, (err, res) => {\n      if (!err) {\n        func(recognizerContext, res, callback, ...params);\n      } else {\n        logger.error('Failed retry', err);\n        retry(func, recognizerContext, model, callback, ...params);\n      }\n    });\n  } else {\n    callback('Unable to reconnect', model);\n  }\n}\n\n/**\n * @param {RecognizerContext} recognizerContext\n * @param {function(params: ...Object): Object} buildMessage\n * @param {...Object} params\n * @return {Promise}\n */\nexport function sendMessage(recognizerContext, buildMessage, ...params) {\n  return recognizerContext.initPromise\n    .then(() => {\n      logger.trace('Init was done. Sending message');\n      const message = buildMessage(...params);\n      if (message) {\n        NetworkWSInterface.send(recognizerContext, message);\n        const positions = recognizerContext.recognitionContexts[0].model.lastPositions;\n        if (positions) {\n          RecognizerContext.updateRecognitionPositions(recognizerContext, positions);\n        }\n      } else {\n        logger.warn('empty message');\n      }\n    });\n}\n\n/**\n * Do what is needed to clean the server context.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function clear(recognizerContext, model, callback) {\n  const modelRef = InkModel.clearModel(model);\n  const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  if (recognizerContextReference && recognizerContextReference.websocket) {\n    // We have to send again all strokes after a clear.\n    delete recognizerContextReference.instanceId;\n    try {\n      NetworkWSInterface.send(recognizerContextReference, { type: 'reset' });\n    } catch (sendFailedException) {\n      // To force failure without breaking the flow\n      // FIXME not working at all\n      recognizerContextReference.websocketCallback(PromiseHelper.destructurePromise(), recognizerContextReference, model);\n    }\n  }\n  // We do not keep track of the success of clear.\n  callback(undefined, modelRef);\n}\n\n/**\n * Close and free all resources that will no longer be used by the recognizer.\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @param {RecognizerCallback} callback\n */\nexport function close(recognizerContext, model, callback) {\n  const recognitionContext = {\n    model,\n    callback: (err, res) => commonCallback(model, err, res, callback)\n  };\n  const recognizerContextRef = recognizerContext;\n\n  recognizerContext.initPromise\n    .then(() => {\n      recognizerContextRef.recognitionContexts[0] = recognitionContext;\n      return recognizerContextRef;\n    })\n    .then(context => NetworkWSInterface.close(context, 1000, RecognizerContext.CLOSE_RECOGNIZER_MESSAGE));\n}\n","import { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport Constants from '../../../configuration/Constants';\nimport * as InkModel from '../../../model/InkModel';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\nimport * as StrokeComponent from '../../../model/StrokeComponent';\nimport * as Cdkv3WSWebsocketBuilder from './Cdkv3WSBuilder';\nimport * as CdkWSRecognizerUtil from '../CdkWSRecognizerUtil';\nimport * as DefaultRecognizer from '../../DefaultRecognizer';\nimport * as CdkCommonUtil from '../../common/CdkCommonUtil';\nimport * as Cdkv3CommonMathRecognizer from '../../common/v3/Cdkv3CommonMathRecognizer';\n\nexport { close } from '../CdkWSRecognizerUtil';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const mathWebSocketV3Configuration = {\n  types: [Constants.RecognitionType.MATH],\n  protocol: Constants.Protocol.WEBSOCKET,\n  apiVersion: 'V3',\n  availableTriggers: {\n    exportContent: [Constants.Trigger.POINTER_UP]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return mathWebSocketV3Configuration;\n}\n\nfunction buildMathInput(recognizerContext, model) {\n  InkModel.updateModelSentPosition(model);\n  if (recognizerContext.lastPositions.lastSentPosition < 0) {\n    const configuration = recognizerContext.editor.configuration;\n    return {\n      type: 'start',\n      parameters: configuration.recognitionParams.v3.mathParameter,\n      components: model.rawStrokes.map(stroke => StrokeComponent.toJSON(stroke))\n    };\n  }\n\n  return {\n    type: 'continue',\n    components: InkModel.extractPendingStrokes(model, -1).map(stroke => StrokeComponent.toJSON(stroke))\n  };\n}\n\nfunction buildResetMessage(model) {\n  InkModel.resetModelPositions(model);\n  return {\n    type: 'reset'\n  };\n}\n\nconst mathCallback = (model, err, res, callback) => {\n  if (res) {\n    if (res.type === 'init') {\n      return callback(err, model, Constants.EventType.LOADED, Constants.EventType.IDLE);\n    }\n    if (res.type === 'close') {\n      return callback(err, model, Constants.EventType.CHANGED);\n    }\n    const modelReference = InkModel.updateModelReceivedPosition(model);\n    modelReference.rawResults.exports = res;\n    modelReference.exports = CdkCommonUtil.extractExports(modelReference);\n    modelReference.recognizedSymbols = Cdkv3CommonMathRecognizer.extractRecognizedSymbols(modelReference);\n    return callback(err, modelReference, Constants.EventType.EXPORTED, Constants.EventType.IDLE);\n  }\n  return callback(err, model);\n};\n\n/**\n * Initialize recognition\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function init(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model: InkModel.resetModelPositions(model),\n    callback: (err, res) => mathCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.init('/api/v3.0/recognition/ws/math', recognizerContextRef, Cdkv3WSWebsocketBuilder.buildWebSocketCallback, init)\n    .catch((err) => {\n      if (RecognizerContext.shouldAttemptImmediateReconnect(recognizerContext) && recognizerContext.reconnect) {\n        logger.info('Attempting a reconnect', recognizerContext.currentReconnectionCount);\n        recognizerContext.reconnect(recognizerContext, model, callback);\n      } else {\n        logger.error('Unable to init', err);\n        callback(err, model);\n      }\n    });\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\n// eslint-disable-next-line no-underscore-dangle\nexport function export_(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => mathCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildMathInput, recognizerContext, model)\n    .catch(exception => CdkWSRecognizerUtil.retry(export_, recognizerContext, model, callback));\n}\n\n/**\n * Reset the recognition context\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function reset(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => mathCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildResetMessage, model)\n    .catch(exception => CdkWSRecognizerUtil.retry(reset, recognizerContext, model, callback));\n}\n\n/**\n * Clear server context. Currently nothing to do there.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function clear(recognizerContext, model, callback) {\n  DefaultRecognizer.clear(recognizerContext, model, (err, res, ...types) => {\n    reset(recognizerContext, res, (err1, res1) => logger.trace('Session reset'));\n    callback(err, res, ...types);\n  });\n}\n","import { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport * as CryptoHelper from '../../CryptoHelper';\nimport Constants from '../../../configuration/Constants';\nimport * as InkModel from '../../../model/InkModel';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\nimport * as StrokeComponent from '../../../model/StrokeComponent';\nimport * as Cdkv3WSWebsocketBuilder from './Cdkv3WSBuilder';\nimport * as CdkWSRecognizerUtil from '../CdkWSRecognizerUtil';\nimport * as DefaultRecognizer from '../../DefaultRecognizer';\nimport * as Cdkv3CommonTextRecognizer from '../../common/v3/Cdkv3CommonTextRecognizer';\n\nexport { close } from '../CdkWSRecognizerUtil';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const textWebSocketV3Configuration = {\n  types: [Constants.RecognitionType.TEXT],\n  protocol: Constants.Protocol.WEBSOCKET,\n  apiVersion: 'V3',\n  availableTriggers: {\n    exportContent: [Constants.Trigger.POINTER_UP]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return textWebSocketV3Configuration;\n}\n\nfunction buildTextInput(recognizerContext, model) {\n  InkModel.updateModelSentPosition(model);\n  if (recognizerContext.lastPositions.lastSentPosition < 0) {\n    const configuration = recognizerContext.editor.configuration;\n    return {\n      type: 'start',\n      textParameter: configuration.recognitionParams.v3.textParameter,\n      inputUnits: [{\n        textInputType: 'MULTI_LINE_TEXT',\n        components: model.rawStrokes.map(stroke => StrokeComponent.toJSON(stroke))\n      }]\n    };\n  }\n\n  return {\n    type: 'continue',\n    inputUnits: [{\n      textInputType: 'MULTI_LINE_TEXT',\n      components: InkModel.extractPendingStrokes(model, -1).map(stroke => StrokeComponent.toJSON(stroke))\n    }]\n  };\n}\n\nfunction buildResetMessage(model) {\n  InkModel.resetModelPositions(model);\n  return {\n    type: 'reset'\n  };\n}\n\nconst textCallback = (model, err, res, callback) => {\n  if (res) {\n    if (res.type === 'init') {\n      return callback(err, model, Constants.EventType.LOADED, Constants.EventType.IDLE);\n    }\n    if (res.type === 'close') {\n      return callback(err, model, Constants.EventType.CHANGED);\n    }\n    const modelReference = InkModel.updateModelReceivedPosition(model);\n    modelReference.rawResults.exports = res;\n    modelReference.exports = Cdkv3CommonTextRecognizer.extractExports(model);\n    return callback(err, modelReference, Constants.EventType.EXPORTED, Constants.EventType.IDLE);\n  }\n  return callback(err, model);\n};\n\n/**\n * Initialize recognition\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function init(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model: InkModel.resetModelPositions(model),\n    callback: (err, res) => textCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.init('/api/v3.0/recognition/ws/text', recognizerContextRef, Cdkv3WSWebsocketBuilder.buildWebSocketCallback, init)\n    .catch((err) => {\n      if (RecognizerContext.shouldAttemptImmediateReconnect(recognizerContext) && recognizerContext.reconnect) {\n        logger.info('Attempting a reconnect', recognizerContext.currentReconnectionCount);\n        recognizerContext.reconnect(recognizerContext, model, callback);\n      } else {\n        logger.error('Unable to init', err);\n        callback(err, model);\n      }\n    });\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\n// eslint-disable-next-line no-underscore-dangle\nexport function export_(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => textCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildTextInput, recognizerContext, model)\n    .catch(exception => CdkWSRecognizerUtil.retry(export_, recognizerContext, model, callback));\n}\n\n/**\n * Reset the recognition context\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function reset(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => textCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildResetMessage, model)\n    .catch(exception => CdkWSRecognizerUtil.retry(reset, recognizerContext, model, callback));\n}\n\n/**\n * Clear server context. Currently nothing to do there.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function clear(recognizerContext, model, callback) {\n  DefaultRecognizer.clear(recognizerContext, model, (err, res, ...types) => {\n    reset(recognizerContext, res, (err1, res1) => logger.trace('Session reset'));\n    callback(err, res, ...types);\n  });\n}\n","/*\n * UUID-js: A js library to generate and parse UUIDs, TimeUUIDs and generate\n * TimeUUID based on dates for range selections.\n * @see http://www.ietf.org/rfc/rfc4122.txt\n **/\n\nfunction UUIDjs() {\n};\n\nUUIDjs.maxFromBits = function(bits) {\n  return Math.pow(2, bits);\n};\n\nUUIDjs.limitUI04 = UUIDjs.maxFromBits(4);\nUUIDjs.limitUI06 = UUIDjs.maxFromBits(6);\nUUIDjs.limitUI08 = UUIDjs.maxFromBits(8);\nUUIDjs.limitUI12 = UUIDjs.maxFromBits(12);\nUUIDjs.limitUI14 = UUIDjs.maxFromBits(14);\nUUIDjs.limitUI16 = UUIDjs.maxFromBits(16);\nUUIDjs.limitUI32 = UUIDjs.maxFromBits(32);\nUUIDjs.limitUI40 = UUIDjs.maxFromBits(40);\nUUIDjs.limitUI48 = UUIDjs.maxFromBits(48);\n\n// Returns a random integer between min and max\n// Using Math.round() will give you a non-uniform distribution!\n// @see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nUUIDjs.randomUI04 = function() {\n  return getRandomInt(0, UUIDjs.limitUI04-1);\n};\nUUIDjs.randomUI06 = function() {\n  return getRandomInt(0, UUIDjs.limitUI06-1);\n};\nUUIDjs.randomUI08 = function() {\n  return getRandomInt(0, UUIDjs.limitUI08-1);\n};\nUUIDjs.randomUI12 = function() {\n  return getRandomInt(0, UUIDjs.limitUI12-1);\n};\nUUIDjs.randomUI14 = function() {\n  return getRandomInt(0, UUIDjs.limitUI14-1);\n};\nUUIDjs.randomUI16 = function() {\n  return getRandomInt(0, UUIDjs.limitUI16-1);\n};\nUUIDjs.randomUI32 = function() {\n  return getRandomInt(0, UUIDjs.limitUI32-1);\n};\nUUIDjs.randomUI40 = function() {\n  return (0 | Math.random() * (1 << 30)) + (0 | Math.random() * (1 << 40 - 30)) * (1 << 30);\n};\nUUIDjs.randomUI48 = function() {\n  return (0 | Math.random() * (1 << 30)) + (0 | Math.random() * (1 << 48 - 30)) * (1 << 30);\n};\n\nUUIDjs.paddedString = function(string, length, z) {\n  string = String(string);\n  z = (!z) ? '0' : z;\n  var i = length - string.length;\n  for (; i > 0; i >>>= 1, z += z) {\n    if (i & 1) {\n      string = z + string;\n    }\n  }\n  return string;\n};\n\nUUIDjs.prototype.fromParts = function(timeLow, timeMid, timeHiAndVersion, clockSeqHiAndReserved, clockSeqLow, node) {\n  this.version = (timeHiAndVersion >> 12) & 0xF;\n  this.hex = UUIDjs.paddedString(timeLow.toString(16), 8)\n             + '-'\n             + UUIDjs.paddedString(timeMid.toString(16), 4)\n             + '-'\n             + UUIDjs.paddedString(timeHiAndVersion.toString(16), 4)\n             + '-'\n             + UUIDjs.paddedString(clockSeqHiAndReserved.toString(16), 2)\n             + UUIDjs.paddedString(clockSeqLow.toString(16), 2)\n             + '-'\n             + UUIDjs.paddedString(node.toString(16), 12);\n  return this;\n};\n\nUUIDjs.prototype.toString = function() {\n  return this.hex;\n};\nUUIDjs.prototype.toURN = function() {\n  return 'urn:uuid:' + this.hex;\n};\n\nUUIDjs.prototype.toBytes = function() {\n  var parts = this.hex.split('-');\n  var ints = [];\n  var intPos = 0;\n  for (var i = 0; i < parts.length; i++) {\n    for (var j = 0; j < parts[i].length; j+=2) {\n      ints[intPos++] = parseInt(parts[i].substr(j, 2), 16);\n    }\n  }\n  return ints;\n};\n\nUUIDjs.prototype.equals = function(uuid) {\n  if (!(uuid instanceof UUID)) {\n    return false;\n  }\n  if (this.hex !== uuid.hex) {\n    return false;\n  }\n  return true;\n};\n\nUUIDjs.getTimeFieldValues = function(time) {\n  var ts = time - Date.UTC(1582, 9, 15);\n  var hm = ((ts / 0x100000000) * 10000) & 0xFFFFFFF;\n  return { low: ((ts & 0xFFFFFFF) * 10000) % 0x100000000,\n            mid: hm & 0xFFFF, hi: hm >>> 16, timestamp: ts };\n};\n\nUUIDjs._create4 = function() {\n  return new UUIDjs().fromParts(\n    UUIDjs.randomUI32(),\n    UUIDjs.randomUI16(),\n    0x4000 | UUIDjs.randomUI12(),\n    0x80   | UUIDjs.randomUI06(),\n    UUIDjs.randomUI08(),\n    UUIDjs.randomUI48()\n  );\n};\n\nUUIDjs._create1 = function() {\n  var now = new Date().getTime();\n  var sequence = UUIDjs.randomUI14();\n  var node = (UUIDjs.randomUI08() | 1) * 0x10000000000 + UUIDjs.randomUI40();\n  var tick = UUIDjs.randomUI04();\n  var timestamp = 0;\n  var timestampRatio = 1/4;\n\n  if (now != timestamp) {\n    if (now < timestamp) {\n      sequence++;\n    }\n    timestamp = now;\n    tick = UUIDjs.randomUI04();\n  } else if (Math.random() < timestampRatio && tick < 9984) {\n    tick += 1 + UUIDjs.randomUI04();\n  } else {\n    sequence++;\n  }\n\n  var tf = UUIDjs.getTimeFieldValues(timestamp);\n  var tl = tf.low + tick;\n  var thav = (tf.hi & 0xFFF) | 0x1000;\n\n  sequence &= 0x3FFF;\n  var cshar = (sequence >>> 8) | 0x80;\n  var csl = sequence & 0xFF;\n\n  return new UUIDjs().fromParts(tl, tf.mid, thav, cshar, csl, node);\n};\n\nUUIDjs.create = function(version) {\n  version = version || 4;\n  return this['_create' + version]();\n};\n\nUUIDjs.fromTime = function(time, last) {\n  last = (!last) ? false : last;\n  var tf = UUIDjs.getTimeFieldValues(time);\n  var tl = tf.low;\n  var thav = (tf.hi & 0xFFF) | 0x1000;  // set version '0001'\n  if (last === false) {\n    return new UUIDjs().fromParts(tl, tf.mid, thav, 0, 0, 0);\n  } else {\n    return new UUIDjs().fromParts(tl, tf.mid, thav, 0x80 | UUIDjs.limitUI06, UUIDjs.limitUI08 - 1, UUIDjs.limitUI48 - 1);\n  }\n};\n\nUUIDjs.firstFromTime = function(time) {\n  return UUIDjs.fromTime(time, false);\n};\nUUIDjs.lastFromTime = function(time) {\n  return UUIDjs.fromTime(time, true);\n};\n\nUUIDjs.fromURN = function(strId) {\n  var r, p = /^(?:urn:uuid:|\\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\\})?$/i;\n  if ((r = p.exec(strId))) {\n    return new UUIDjs().fromParts(parseInt(r[1], 16), parseInt(r[2], 16),\n                            parseInt(r[3], 16), parseInt(r[4], 16),\n                            parseInt(r[5], 16), parseInt(r[6], 16));\n  }\n  return null;\n};\n\nUUIDjs.fromBytes = function(ints) {\n  if (ints.length < 5) {\n    return null;\n  }\n  var str = '';\n  var pos = 0;\n  var parts = [4, 2, 2, 2, 6];\n  for (var i = 0; i < parts.length; i++) {\n    for (var j = 0; j < parts[i]; j++) {\n      var octet = ints[pos++].toString(16);\n      if (octet.length == 1) {\n        octet = '0' + octet;\n      }\n      str += octet;\n    }\n    if (parts[i] !== 6) {\n      str += '-';\n    }\n  }\n  return UUIDjs.fromURN(str);\n};\n\nUUIDjs.fromBinary = function(binary) {\n  var ints = [];\n  for (var i = 0; i < binary.length; i++) {\n    ints[i] = binary.charCodeAt(i);\n    if (ints[i] > 255 || ints[i] < 0) {\n      throw new Error('Unexpected byte in binary data.');\n    }\n  }\n  return UUIDjs.fromBytes(ints);\n};\n\n// Aliases to support legacy code. Do not use these when writing new code as\n// they may be removed in future versions!\nUUIDjs.new = function() {\n  return this.create(4);\n};\nUUIDjs.newTS = function() {\n  return this.create(1);\n};\n\nmodule.exports = UUIDjs;\n","import { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport * as CryptoHelper from '../../CryptoHelper';\nimport * as NetworkWSInterface from '../networkWSInterface';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\n\nimport {\n  buildNewContentPackageInput,\n  buildRestoreIInkSessionInput,\n  buildNewContentPart,\n  buildOpenContentPart,\n  buildConfiguration,\n  buildSetTheme,\n  buildSetPenStyle,\n  buildSetPenStyleClasses\n} from './Cdkv4WSIInkRecognizer';\n\n/**\n * A CDK v4 websocket dialog have this sequence :\n * ---------- Client ------------------------------------- Server ----------------------------------\n * init (send the new content package) ================>\n *                                       <=========== hmacChallenge\n * answerToHmacChallenge (send the hmac) =========>\n * newPart (send the parameters ) ===============>\n *                                       <=========== update\n * addStrokes (send the strokes ) ============>\n *                                       <=========== update\n */\n\nfunction buildHmacMessage(configuration, message) {\n  return {\n    type: 'hmac',\n    hmac: CryptoHelper.computeHmac(message.data.hmacChallenge, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey)\n  };\n}\n\n/**\n * This function bind the right behaviour when a message is receive by the websocket.\n * @param {DestructuredPromise} destructuredPromise\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @return {function} Callback to handle WebSocket results\n */\nexport function buildWebSocketCallback(destructuredPromise, recognizerContext) {\n  return (message) => {\n    const recognizerContextRef = recognizerContext;\n    // Handle websocket messages\n    logger.trace(`${message.type} websocket callback`, message);\n    const recognitionContext = recognizerContext.recognitionContexts[recognizerContext.recognitionContexts.length - 1];\n    logger.debug('Current recognition context', recognitionContext);\n\n    switch (message.type) {\n      case 'open':\n        if (recognizerContext.sessionId) {\n          NetworkWSInterface.send(recognizerContext, buildRestoreIInkSessionInput(recognizerContext.editor.configuration, recognizerContext.editor.domElement, recognizerContext.sessionId));\n        } else {\n          NetworkWSInterface.send(recognizerContext, buildNewContentPackageInput(recognizerContext.editor.configuration, recognizerContext.editor.domElement));\n        }\n        break;\n      case 'message':\n        logger.debug(`Receiving ${message.data.type} message`, message);\n        switch (message.data.type) {\n          case 'ack':\n            if (message.data.hmacChallenge) {\n              NetworkWSInterface.send(recognizerContext, buildHmacMessage(recognizerContext.editor.configuration, message));\n            }\n            if (message.data.iinkSessionId) {\n              recognizerContextRef.sessionId = message.data.iinkSessionId;\n            }\n            break;\n          case 'newPart':\n            break;\n          case 'contentPackageDescription':\n            recognizerContextRef.currentReconnectionCount = 0;\n            recognizerContextRef.contentPartCount = message.data.contentPartCount;\n            NetworkWSInterface.send(recognizerContext, buildConfiguration(recognizerContext.editor.configuration));\n            if (recognizerContextRef.currentPartId) { // FIXME: Ugly hack to resolve init promise after opening part\n              NetworkWSInterface.send(recognizerContext, buildOpenContentPart(recognizerContext.editor.configuration, recognizerContext.currentPartId));\n            } else {\n              NetworkWSInterface.send(recognizerContext, buildNewContentPart(recognizerContext.editor.configuration));\n            }\n            break;\n          case 'partChanged':\n            if (message.data.partId) {\n              recognizerContextRef.currentPartId = message.data.partId;\n            }\n            recognizerContextRef.initialized = true;\n            NetworkWSInterface.send(recognizerContext, buildSetTheme(recognizerContext.editor.theme));\n            NetworkWSInterface.send(recognizerContext, buildSetPenStyle(recognizerContext.editor.penStyle));\n            NetworkWSInterface.send(recognizerContext, buildSetPenStyleClasses(recognizerContext.editor.penStyleClasses));\n            recognitionContext.callback(undefined, message.data);\n            destructuredPromise.resolve(recognitionContext);\n            break;\n          case 'contentChanged':\n            if (message.data.canUndo !== undefined) {\n              recognizerContextRef.canUndo = message.data.canUndo;\n            }\n            if (message.data.canRedo !== undefined) {\n              recognizerContextRef.canRedo = message.data.canRedo;\n            }\n            if (message.data.empty !== undefined) {\n              recognizerContextRef.isEmpty = message.data.empty;\n            }\n            if (message.data.possibleUndoCount !== undefined) {\n              recognizerContextRef.possibleUndoCount = message.data.possibleUndoCount;\n            }\n            if (message.data.undoStackIndex !== undefined) {\n              recognizerContextRef.undoStackIndex = message.data.undoStackIndex;\n            }\n            recognitionContext.callback(undefined, message.data);\n            break;\n          case 'exported':\n            recognitionContext.callback(undefined, message.data);\n            break;\n          case 'svgPatch':\n            recognitionContext.callback(undefined, message.data);\n            break;\n          case 'supportedImportMimeTypes':\n            recognizerContextRef.supportedImportMimeTypes = message.data.mimeTypes;\n            recognitionContext.callback(undefined, message.data);\n            break;\n          case 'fileChunkAck':\n            recognitionContext.callback(undefined, message.data);\n            break;\n          case 'idle':\n            recognizerContextRef.idle = true;\n            recognitionContext.callback(undefined, message.data);\n            break;\n          case 'error':\n            logger.debug('Error detected stopping all recognition', message);\n            if (recognitionContext) {\n              recognitionContext.callback(message.data);\n            } else {\n              destructuredPromise.reject(Object.assign({}, message.data, { recoverable: false }));\n            }\n            break;\n          default :\n            logger.warn('This is something unexpected in current recognizer. Not the type of message we should have here.', message);\n        }\n        break;\n      case 'error':\n        logger.debug('Error detected stopping all recognition', message);\n        if (recognitionContext) {\n          recognitionContext.callback(Object.assign({}, message, { recoverable: false }));\n        } else {\n          destructuredPromise.reject(Object.assign({}, message, { recoverable: false }));\n        }\n        break;\n      case 'close':\n        logger.debug('Close detected stopping all recognition', message);\n        recognizerContextRef.initialized = false;\n        recognizerContextRef.canRedo = false;\n        recognizerContextRef.canUndo = false;\n        if (recognitionContext) {\n          recognitionContext.callback(message);\n        } else {\n          destructuredPromise.reject(message);\n        }\n        break;\n      default :\n        logger.warn('This is something unexpected in current recognizer. Not the type of message we should have here.', message);\n    }\n  };\n}\n","import uuid from 'uuid-js';\nimport { recognizerLogger as logger } from '../../../configuration/LoggerConfig';\nimport Constants from '../../../configuration/Constants';\nimport * as DefaultTheme from '../../../configuration/DefaultTheme';\nimport * as DefaultPenStyle from '../../../configuration/DefaultPenStyle';\nimport * as InkModel from '../../../model/InkModel';\nimport * as RecognizerContext from '../../../model/RecognizerContext';\nimport * as DefaultRecognizer from '../../DefaultRecognizer';\nimport * as Cdkv4WSWebsocketBuilder from './Cdkv4WSBuilder';\nimport * as CdkWSRecognizerUtil from '../CdkWSRecognizerUtil';\n\nexport { close } from '../CdkWSRecognizerUtil';\n\nfunction readBlob(blob) {\n  const fileReader = new FileReader();\n  return new Promise((resolve, reject) => {\n    fileReader.onload = event => resolve(event.target.result);\n    fileReader.onerror = () => reject(this);\n    fileReader.readAsText(blob);\n  });\n}\n\n\nfunction getDPI(element) {\n  // const startDpi = 56;\n  // for (let dpi = startDpi; dpi < 2000; dpi++) {\n  //   if (window.matchMedia(`(max-resolution: ${dpi}dpi)`).matches === true) {\n  //     return dpi;\n  //   }\n  // }\n  // return startDpi;\n  return 96;\n}\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const IInkWebSocketV4Configuration = {\n  types: [Constants.RecognitionType.MATH, Constants.RecognitionType.TEXT, Constants.RecognitionType.DIAGRAM, Constants.RecognitionType.NEBO],\n  protocol: Constants.Protocol.WEBSOCKET,\n  apiVersion: 'V4',\n  availableTriggers: {\n    exportContent: [Constants.Trigger.POINTER_UP, Constants.Trigger.DEMAND],\n    addStrokes: [Constants.Trigger.POINTER_UP]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return IInkWebSocketV4Configuration;\n}\n\nexport function buildNewContentPackageInput(configuration, element) {\n  return {\n    type: 'newContentPackage',\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    xDpi: getDPI(element),\n    yDpi: getDPI(element),\n    viewSizeHeight: element.clientHeight < configuration.renderingParams.minHeight ? configuration.renderingParams.minHeight : element.clientHeight,\n    viewSizeWidth: element.clientWidth < configuration.renderingParams.minWidth ? configuration.renderingParams.minWidth : element.clientWidth\n  };\n}\n\nexport function buildRestoreIInkSessionInput(configuration, element, sessionId) {\n  return {\n    type: 'restoreIInkSession',\n    iinkSessionId: sessionId,\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    xDpi: getDPI(element),\n    yDpi: getDPI(element),\n    viewSizeHeight: element.clientHeight < configuration.renderingParams.minHeight ? configuration.renderingParams.minHeight : element.clientHeight,\n    viewSizeWidth: element.clientWidth < configuration.renderingParams.minWidth ? configuration.renderingParams.minWidth : element.clientWidth\n  };\n}\n\nexport function buildNewContentPart(configuration) {\n  return {\n    type: 'newContentPart',\n    contentType: configuration.recognitionParams.type,\n    mimeTypes: (configuration.triggers.exportContent !== Constants.Trigger.DEMAND) ?\n      configuration.recognitionParams.v4[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes : undefined\n  };\n}\n\nexport function buildOpenContentPart(configuration, partId) {\n  return {\n    type: 'openContentPart',\n    id: partId,\n    mimeTypes: (configuration.triggers.exportContent !== Constants.Trigger.DEMAND) ?\n      configuration.recognitionParams.v4[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes : undefined\n  };\n}\n\nexport function buildConfiguration(configuration) {\n  return Object.assign({ type: 'configuration' }, configuration.recognitionParams.v4);\n}\n\nfunction buildAddStrokes(recognizerContext, model) {\n  const strokes = InkModel.extractPendingStrokes(model, recognizerContext.lastPositions.lastSentPosition + 1);\n  if (strokes.length > 0) {\n    InkModel.updateModelSentPosition(model);\n    return {\n      type: 'addStrokes',\n      strokes: strokes.map(stroke => Object.assign({}, {\n        id: stroke.id,\n        pointerType: stroke.pointerType,\n        pointerId: stroke.pointerId,\n        x: stroke.x,\n        y: stroke.y,\n        t: stroke.t,\n        p: stroke.p\n      }))\n    };\n  }\n  return undefined;\n}\n\nfunction buildUndo() {\n  return {\n    type: 'undo'\n  };\n}\n\nfunction buildRedo() {\n  return {\n    type: 'redo'\n  };\n}\n\nfunction buildClear() {\n  return {\n    type: 'clear'\n  };\n}\n\nfunction buildConvert(state) {\n  return {\n    type: 'convert',\n    conversionState: state\n  };\n}\n\nfunction buildZoom(value) {\n  return {\n    type: 'zoom',\n    zoom: value\n  };\n}\n\nfunction buildResize(element, minHeight = 0, minWidth = 0) {\n  return {\n    type: 'changeViewSize',\n    height: element.clientHeight < minHeight ? minHeight : element.clientHeight,\n    width: element.clientWidth < minWidth ? minWidth : element.clientWidth\n  };\n}\n\nfunction buildExport(configuration, partId, requestedMimeType) {\n  let usedMimeType;\n  if (requestedMimeType && Object.keys(requestedMimeType).length !== 0) {\n    usedMimeType = requestedMimeType;\n  } else {\n    usedMimeType = configuration.recognitionParams.v4[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes;\n  }\n\n  return {\n    type: 'export',\n    partId,\n    mimeTypes: usedMimeType\n  };\n}\n\nfunction buildImportFile(id, mimetype) {\n  return {\n    type: 'importFile',\n    importFileId: id,\n    mimeType: mimetype\n  };\n}\n\nfunction buildImportChunk(id, data, lastChunk) {\n  return {\n    type: 'fileChunk',\n    importFileId: id,\n    data,\n    lastChunk\n  };\n}\n\nfunction buildPointerEvents(events) {\n  return Object.assign({ type: 'pointerEvents' }, events);\n}\n\nfunction buildWaitForIdle() {\n  return {\n    type: 'waitForIdle'\n  };\n}\n\nfunction buildGetSupportedImportMimeTypes() {\n  return {\n    type: 'getSupportedImportMimeTypes'\n  };\n}\n\nexport function buildSetPenStyle(penStyle) {\n  return {\n    type: 'setPenStyle',\n    style: penStyle ? DefaultPenStyle.toCSS(penStyle) : ''\n  };\n}\n\nexport function buildSetPenStyleClasses(penStyleClasses) {\n  return {\n    type: 'setPenStyleClasses',\n    styleClasses: penStyleClasses\n  };\n}\n\nexport function buildSetTheme(theme) {\n  return {\n    type: 'setTheme',\n    theme: DefaultTheme.toCSS(theme)\n  };\n}\n\nconst iinkCallback = (model, err, res, callback) => {\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  if (res) {\n    if (res.updates !== undefined) {\n      if (modelReference.recognizedSymbols) {\n        modelReference.recognizedSymbols.push(res);\n      } else {\n        modelReference.recognizedSymbols = [res];\n      }\n      return callback(err, modelReference, Constants.EventType.RENDERED);\n    }\n    if (res.exports !== undefined) {\n      modelReference.rawResults.exports = res;\n      modelReference.exports = res.exports;\n      return callback(err, modelReference, Constants.EventType.EXPORTED);\n    }\n\n    if ((res.canUndo !== undefined) || (res.canRedo !== undefined)) {\n      return callback(err, modelReference, Constants.EventType.CHANGED);\n    }\n\n    if (res.type === 'supportedImportMimeTypes') {\n      return callback(err, modelReference, Constants.EventType.SUPPORTED_IMPORT_MIMETYPES);\n    }\n\n    if (res.type === 'partChanged') {\n      return callback(err, modelReference, Constants.EventType.LOADED);\n    }\n\n    if (res.type === 'idle') {\n      return callback(err, modelReference, Constants.EventType.IDLE);\n    }\n\n    if (res.type === 'close') {\n      return callback(err, modelReference, Constants.EventType.CHANGED);\n    }\n  }\n  return callback(err, modelReference);\n};\n\n/**\n * Initialize recognition\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function init(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model: InkModel.updateModelSentPosition(model, model.lastPositions.lastReceivedPosition),\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.init('/api/v4.0/iink/document', recognizerContextRef, Cdkv4WSWebsocketBuilder.buildWebSocketCallback, init)\n    .catch((err) => {\n      if (RecognizerContext.shouldAttemptImmediateReconnect(recognizerContext) && recognizerContext.reconnect) {\n        logger.info('Attempting a reconnect', recognizerContext.currentReconnectionCount);\n        recognizerContext.reconnect(recognizerContext, model, callback);\n      } else {\n        logger.error('Unable to reconnect', err);\n        iinkCallback(model, err, undefined, callback);\n      }\n    });\n}\n\n/**\n * Create a new content part\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function newContentPart(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildNewContentPart, recognizerContext.editor.configuration)\n    .catch(exception => CdkWSRecognizerUtil.retry(newContentPart, recognizerContext, model, callback));\n}\n\n/**\n * Open the recognizer context content part\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function openContentPart(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildOpenContentPart, recognizerContext.editor.configuration, recognizerContext.currentPartId)\n    .catch(exception => CdkWSRecognizerUtil.retry(openContentPart, recognizerContext, model, callback));\n}\n\nexport function sendConfiguration(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildConfiguration, recognizerContext.editor.configuration)\n    .catch(exception => CdkWSRecognizerUtil.retry(sendConfiguration, recognizerContext, model, callback));\n}\n\n/**\n * Pointer Events\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {PointerEvents} events to be imported\n * @param {RecognizerCallback} callback\n */\nexport function pointerEvents(recognizerContext, model, events, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildPointerEvents, events)\n    .catch(exception => CdkWSRecognizerUtil.retry(pointerEvents, recognizerContext, model, events, callback));\n}\n\n/**\n * Add strokes to the model\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function addStrokes(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildAddStrokes, recognizerContext, model)\n    .catch(exception => CdkWSRecognizerUtil.retry(addStrokes, recognizerContext, model, callback));\n}\n\n/**\n * Undo last action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function undo(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildUndo)\n    .catch(exception => CdkWSRecognizerUtil.retry(undo, recognizerContext, model, callback));\n}\n\n/**\n * Redo last action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function redo(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildRedo)\n    .catch(exception => CdkWSRecognizerUtil.retry(redo, recognizerContext, model, callback));\n}\n\n/**\n * Clear action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function clear(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => {\n      DefaultRecognizer.clear(recognizerContext, model, (noerr, newModel, ...attrs) => {\n        logger.debug('The model after clear is :', newModel);\n        iinkCallback(newModel, err, res, callback);\n      });\n    }\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildClear)\n    .catch(exception => CdkWSRecognizerUtil.retry(clear, recognizerContext, model, callback));\n}\n\n/**\n * Convert action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n * @param {String} conversionState Conversion State, by default DigitalEdit\n */\nexport function convert(recognizerContext, model, callback, conversionState) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildConvert, conversionState)\n    .catch(exception => CdkWSRecognizerUtil.retry(convert, recognizerContext, model, callback, conversionState));\n}\n\n/**\n * Export action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n * @param {Array[String]} requestedMimeTypes\n */\n// eslint-disable-next-line no-underscore-dangle\nexport function export_(recognizerContext, model, callback, requestedMimeTypes) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildExport, recognizerContext.editor.configuration, recognizerContext.currentPartId, requestedMimeTypes)\n    .catch(exception => CdkWSRecognizerUtil.retry(export_, recognizerContext, model, callback, requestedMimeTypes));\n}\n\n/**\n * Import action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Blob} data Import data\n * @param {RecognizerCallback} callback\n */\n// eslint-disable-next-line no-underscore-dangle\nexport function import_(recognizerContext, model, data, callback) {\n  const recognitionContext = {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback),\n    importFileId: uuid.create(4).toString()\n  };\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, recognitionContext);\n\n  const chunkSize = recognizerContext.editor.configuration.recognitionParams.server.websocket.fileChunkSize;\n\n  for (let i = 0; i < data.size; i += chunkSize) {\n    if (i === 0) {\n      CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildImportFile, recognitionContext.importFileId, data.type)\n        .catch(exception => CdkWSRecognizerUtil.retry(import_, recognizerContext, model, data, callback));\n    }\n    const blobPart = data.slice(i, chunkSize, data.type);\n    readBlob(blobPart).then((res) => {\n      CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildImportChunk, recognitionContext.importFileId, res, i + chunkSize > data.size)\n        .catch(exception => CdkWSRecognizerUtil.retry(import_, recognizerContext, model, data, callback));\n    });\n  }\n}\n\nexport function getSupportedImportMimeTypes(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildGetSupportedImportMimeTypes)\n    .catch(exception => CdkWSRecognizerUtil.retry(getSupportedImportMimeTypes, recognizerContext, model, callback));\n}\n\n/**\n * WaitForIdle action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function waitForIdle(recognizerContext, model, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildWaitForIdle)\n    .catch(exception => CdkWSRecognizerUtil.retry(waitForIdle, recognizerContext, model, callback));\n}\n\n/**\n * Resize\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n * @param {Element} element Current element\n */\nexport function resize(recognizerContext, model, callback, element) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildResize, element, recognizerContext.editor.configuration.renderingParams.minHeight, recognizerContext.editor.configuration.renderingParams.minWidth)\n    .catch(exception => CdkWSRecognizerUtil.retry(resize, recognizerContext, model, callback, element));\n}\n\n/**\n * Zoom action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Number} value=10 Zoom value\n * @param {RecognizerCallback} callback\n */\nexport function zoom(recognizerContext, model, value = 10, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildZoom, value)\n    .catch(exception => CdkWSRecognizerUtil.retry(zoom, recognizerContext, model, callback));\n}\n\n/**\n * SetPenStyle action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {PenStyle} penStyle Current penStyle\n * @param {RecognizerCallback} callback\n */\nexport function setPenStyle(recognizerContext, model, penStyle, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildSetPenStyle, penStyle)\n    .catch(exception => CdkWSRecognizerUtil.retry(setPenStyle, recognizerContext, model, callback));\n}\n\n/**\n * setPenStyleClasses action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {String} penStyleClasses Current penStyleClasses\n * @param {RecognizerCallback} callback\n */\nexport function setPenStyleClasses(recognizerContext, model, penStyleClasses, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildSetPenStyleClasses, penStyleClasses)\n    .catch(exception => CdkWSRecognizerUtil.retry(setPenStyleClasses, recognizerContext, model, callback));\n}\n\n/**\n * SetTheme action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Theme} theme Current theme\n * @param {RecognizerCallback} callback\n */\nexport function setTheme(recognizerContext, model, theme, callback) {\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    callback: (err, res) => iinkCallback(model, err, res, callback)\n  });\n  CdkWSRecognizerUtil.sendMessage(recognizerContextRef, buildSetTheme, theme)\n    .catch(exception => CdkWSRecognizerUtil.retry(setTheme, recognizerContext, model, callback));\n}\n","import { callbackLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Emits an event when the editor state change\n * @param {String} type\n * @param {Object} data\n * @emits {Event}\n */\nexport default function eventCallback(type, data) {\n  logger.info(`emitting ${type} event`, data);\n  // We are making usage of a browser provided class\n  // eslint-disable-next-line no-undef\n  this.dispatchEvent(new CustomEvent(type, Object.assign({ bubbles: true, composed: true }, data ? { detail: data } : undefined)));\n}\n","import { editorLogger as logger } from './LoggerConfig';\nimport * as PointerEventGrabber from '../grabber/PointerEventGrabber';\nimport * as CanvasRenderer from '../renderer/canvas/CanvasRenderer';\nimport * as QuadraticCanvasStroker from '../renderer/canvas/stroker/QuadraticCanvasStroker';\nimport * as SVGRenderer from '../renderer/svg/SVGRenderer';\nimport * as QuadraticSVGStroker from '../renderer/svg/stroker/QuadraticSVGStroker';\nimport * as Cdkv3RestTextRecognizer from '../recognizer/rest/v3/Cdkv3RestTextRecognizer';\nimport * as Cdkv3RestMathRecognizer from '../recognizer/rest/v3/Cdkv3RestMathRecognizer';\nimport * as Cdkv3RestAnalyzerRecognizer from '../recognizer/rest/v3/Cdkv3RestAnalyzerRecognizer';\nimport * as Cdkv3RestShapeRecognizer from '../recognizer/rest/v3/Cdkv3RestShapeRecognizer';\nimport * as Cdkv3RestMusicRecognizer from '../recognizer/rest/v3/Cdkv3RestMusicRecognizer';\nimport * as iinkRestRecognizer from '../recognizer/rest/v4/iinkRestRecognizer';\nimport * as Cdkv3WSMathRecognizer from '../recognizer/websocket/v3/Cdkv3WSMathRecognizer';\nimport * as Cdkv3WSTextRecognizer from '../recognizer/websocket/v3/Cdkv3WSTextRecognizer';\nimport * as Cdkv4WSInteractiveRecognizer from '../recognizer/websocket/v4/Cdkv4WSIInkRecognizer';\nimport eventCallback from '../callback/EventCallback';\n\n/**\n * Current behavior\n * @typedef {Object} Behavior\n * @property {Grabber} grabber Grabber to capture strokes\n * @property {Stroker} stroker Stroker to draw stroke\n * @property {Renderer} renderer Renderer to draw on the editor\n * @property {Recognizer} recognizer Recognizer to call the recognition service\n * @property {Array} callbacks Functions to handle model changes\n */\n\n/**\n * Set of behaviors to be used by the {@link Editor}\n * @typedef {Object} Behaviors\n * @property {Grabber} grabber Grabber to capture strokes\n * @property {Array<Stroker>} strokerList List of stroker to draw stroke\n * @property {Array<Renderer>} rendererList List of renderer to draw on the editor\n * @property {Array<Recognizer>} recognizerList Recognizers to call the recognition service\n * @property {function(behaviors: Behaviors, configuration: Configuration): Behavior} getBehaviorFromConfiguration Get the current behavior to use regarding the current configuration\n * @property {Array} callbacks Functions to handle model changes\n */\n\n/**\n * Default behaviors\n * @type {Behaviors}\n */\nexport const defaultBehaviors = {\n  grabber: PointerEventGrabber,\n  strokerList: [QuadraticCanvasStroker, QuadraticSVGStroker],\n  rendererList: [CanvasRenderer, SVGRenderer],\n  recognizerList: [Cdkv3RestTextRecognizer, Cdkv3RestMathRecognizer, Cdkv3RestAnalyzerRecognizer, Cdkv3RestShapeRecognizer, Cdkv3RestMusicRecognizer, iinkRestRecognizer, Cdkv3WSTextRecognizer, Cdkv3WSMathRecognizer, Cdkv4WSInteractiveRecognizer],\n  callbacks: [eventCallback],\n  getBehaviorFromConfiguration: (behaviors, configuration) => {\n    const behavior = {};\n    behavior.grabber = behaviors.grabber;\n    if (configuration) {\n      if (configuration.recognitionParams.apiVersion === 'V4' && configuration.recognitionParams.protocol === 'REST') {\n        behavior.stroker = QuadraticCanvasStroker;\n      } else {\n        behavior.stroker = behaviors.strokerList.find(item =>\n          (item.getInfo().apiVersion === configuration.recognitionParams.apiVersion) &&\n          (item.getInfo().name === configuration.renderingParams.stroker));\n      }\n      if (configuration.recognitionParams.apiVersion === 'V4' && configuration.recognitionParams.protocol === 'REST') {\n        behavior.renderer = CanvasRenderer;\n      } else {\n        behavior.renderer = behaviors.rendererList.find(item => item.getInfo().apiVersion === configuration.recognitionParams.apiVersion);\n      }\n      behavior.recognizer = behaviors.recognizerList.find(item =>\n        (item.getInfo()\n          .types\n          .includes(configuration.recognitionParams.type)) &&\n        (item.getInfo().protocol === configuration.recognitionParams.protocol) &&\n        (item.getInfo().apiVersion === configuration.recognitionParams.apiVersion));\n    }\n    behavior.callbacks = behaviors.callbacks;\n    return behavior;\n  }\n};\n\n/**\n * Generate behaviors\n * @param {Behaviors} behaviors Behaviors to be used\n * @return {Behaviors} Overridden behaviors\n */\nexport function overrideDefaultBehaviors(behaviors) {\n  if (behaviors) {\n    const currentBehaviors = {\n      grabber: behaviors.grabber || defaultBehaviors.grabber,\n      rendererList: behaviors.rendererList || defaultBehaviors.rendererList,\n      strokerList: behaviors.strokerList || defaultBehaviors.strokerList,\n      recognizerList: behaviors.recognizerList || defaultBehaviors.recognizerList,\n      callbacks: behaviors.callbacks || defaultBehaviors.callbacks,\n      getBehaviorFromConfiguration: behaviors.getBehaviorFromConfiguration || defaultBehaviors.getBehaviorFromConfiguration\n    };\n    logger.debug('Override default behaviors', currentBehaviors);\n    return currentBehaviors;\n  }\n  return defaultBehaviors;\n}\n\nexport default defaultBehaviors;\n","import { modelLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Undo/redo context\n * @typedef {Object} UndoRedoContext\n * @property {Array<Model>} stack=[] List of processed models.\n * @property {Number} currentPosition=-1 Current model index into the stack.\n * @property {Number} maxSize Max size of the stack.\n * @property {Boolean} canUndo=false\n * @property {Boolean} canRedo=false\n */\n\n/**\n * Create a new undo/redo context\n * @param {Configuration} configuration Current configuration\n * @return {UndoRedoContext} New undo/redo context\n */\nexport function createUndoRedoContext(configuration) {\n  return {\n    stack: [],\n    currentPosition: -1,\n    maxSize: configuration.undoRedoMaxStackSize,\n    canUndo: false,\n    canRedo: false\n  };\n}\n\n/**\n * Update the undo/redo state\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context\n * @return {UndoRedoContext} Updated undo/redo context\n */\nexport function updateUndoRedoState(undoRedoContext) {\n  const undoRedoContextRef = undoRedoContext;\n  undoRedoContextRef.canUndo = undoRedoContext.currentPosition > 0;\n  undoRedoContextRef.canRedo = undoRedoContext.currentPosition < (undoRedoContext.stack.length - 1);\n  return undoRedoContextRef;\n}\n","import * as InkModel from '../model/InkModel';\nimport * as UndoRedoContext from '../model/UndoRedoContext';\nimport { modelLogger as logger } from '../configuration/LoggerConfig';\nimport Constants from '../configuration/Constants';\n\n/**\n * Undo/redo manager\n * @typedef {Object} UndoRedoManager\n * @property {function(undoRedoContext: UndoRedoContext, model: Model, callback: RecognizerCallback)} updateModel Push the current model into the undo/redo context.\n * @property {function(undoRedoContext: UndoRedoContext, model: Model, callback: RecognizerCallback)} undo Undo.\n * @property {function(undoRedoContext: UndoRedoContext, model: Model, callback: RecognizerCallback)} redo Redo.\n * @property {function(undoRedoContext: UndoRedoContext, model: Model, callback: RecognizerCallback)} clear Clear.\n */\n\n/**\n * Get current model in stack\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context\n * @param {function(err: Object, res: Model, types: ...String)} callback\n * @param {Boolean} [clone=true] Whether or not to clone the model\n * @param {...String} types\n */\nexport function getModel(undoRedoContext, callback, clone = true, ...types) {\n  const model = undoRedoContext.stack[undoRedoContext.currentPosition];\n  callback(undefined, clone ? InkModel.cloneModel(model) : model, ...types);\n}\n\n/**\n * Mutate the undoRedo stack by adding a new model to it.\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n * @param {function(err: Object, res: Model, types: ...String)} callback\n */\nexport function updateModel(undoRedoContext, model, callback) {\n  // Used to update the model with the recognition result if relevant\n  const modelIndex = undoRedoContext.stack.findIndex(item => (item.modificationTime === model.modificationTime) && (item.rawStrokes.length === model.rawStrokes.length));\n\n  const modelReference = model;\n  modelReference.modificationTime = new Date().getTime();\n\n  const types = [];\n  if (modelIndex > -1) {\n    undoRedoContext.stack.splice(modelIndex, 1, InkModel.cloneModel(modelReference));\n    logger.debug('model updated', modelReference);\n  } else {\n    const undoRedoContextReference = undoRedoContext;\n    undoRedoContextReference.currentPosition += 1;\n    undoRedoContextReference.stack = undoRedoContextReference.stack.slice(0, undoRedoContextReference.currentPosition);\n    undoRedoContextReference.stack.push(InkModel.cloneModel(modelReference));\n    if (undoRedoContextReference.stack.length > undoRedoContextReference.maxSize) {\n      undoRedoContextReference.stack.shift();\n      undoRedoContextReference.currentPosition--;\n    }\n    logger.debug('model pushed', modelReference);\n    types.push(Constants.EventType.CHANGED);\n  }\n  UndoRedoContext.updateUndoRedoState(undoRedoContext);\n  logger.debug('undo/redo stack updated', undoRedoContext);\n  getModel(undoRedoContext, callback, false, ...types);\n}\n\n/**\n * Undo\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n * @param {function(err: Object, res: Model, types: ...String)} callback\n */\nexport function undo(undoRedoContext, model, callback) {\n  const undoRedoContextReference = undoRedoContext;\n  if (undoRedoContextReference.currentPosition > 0) {\n    undoRedoContextReference.currentPosition -= 1;\n    UndoRedoContext.updateUndoRedoState(undoRedoContext);\n    logger.debug('undo index', undoRedoContextReference.currentPosition);\n  }\n  getModel(undoRedoContext, callback, true, Constants.EventType.CHANGED, Constants.EventType.EXPORTED);\n}\n\n/**\n * Redo\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n * @param {function(err: Object, res: Model, types: ...String)} callback\n */\nexport function redo(undoRedoContext, model, callback) {\n  const undoRedoContextReference = undoRedoContext;\n  if (undoRedoContextReference.currentPosition < undoRedoContextReference.stack.length - 1) {\n    undoRedoContextReference.currentPosition += 1;\n    UndoRedoContext.updateUndoRedoState(undoRedoContext);\n    logger.debug('redo index', undoRedoContextReference.currentPosition);\n  }\n  getModel(undoRedoContext, callback, true, Constants.EventType.CHANGED, Constants.EventType.EXPORTED);\n}\n","import { utilLogger as logger } from '../configuration/LoggerConfig';\nimport * as Cdkv3RestTextRecognizer from '../recognizer/rest/v3/Cdkv3RestTextRecognizer';\nimport * as RecognizerContext from '../model/RecognizerContext';\nimport defaultConfiguration from '../configuration/DefaultConfiguration';\n\n/**\n * @typedef {Object} Stats\n * @property {Number} strokesCount=0\n * @property {Number} pointsCount=0\n * @property {Number} byteSize=0\n * @property {Number} humanSize=0\n * @property {String} humanUnit=BYTE\n */\n\n/**\n * @param {Model} model Current model\n * @return {Stats} Statistics about recognition\n */\nexport function computeStats(model) {\n  const stats = { strokesCount: 0, pointsCount: 0, byteSize: 0, humanSize: 0, humanUnit: 'BYTE' };\n  if (model.rawStrokes) {\n    stats.strokesCount = model.rawStrokes.length;\n\n    const restMessage = Cdkv3RestTextRecognizer.buildInput(RecognizerContext.createEmptyRecognizerContext({ configuration: defaultConfiguration }), model);\n    stats.pointsCount = model.rawStrokes.map(stroke => stroke.x.length).reduce((a, b) => a + b, 0);\n    // We start with 270 as it is the size in bytes. Make a real computation implies to recode a doRecognition\n    const byteSize = restMessage.textInput.length;\n    stats.byteSize = byteSize;\n    if (byteSize < 270) {\n      stats.humanUnit = 'BYTE';\n      stats.byteSize = 0;\n      stats.humanSize = 0;\n    } else if (byteSize < 2048) {\n      stats.humanUnit = 'BYTES';\n      stats.humanSize = byteSize;\n    } else if (byteSize < 1024 * 1024) {\n      stats.humanUnit = 'KiB';\n      stats.humanSize = (byteSize / 1024).toFixed(2);\n    } else {\n      stats.humanUnit = 'MiB';\n      stats.humanSize = (byteSize / 1024 / 1024).toFixed(2);\n    }\n  }\n  logger.info('Stats', stats);\n  return stats;\n}\n","import { drawModel } from './CanvasRenderer';\nimport * as InkModel from '../../model/InkModel';\n\nfunction createCanvas(borderCoordinates, margin = 10) {\n  // eslint-disable-next-line no-undef\n  const browserDocument = document;\n  const canvas = browserDocument.createElement('canvas');\n  canvas.width = Math.abs(borderCoordinates.maxX - borderCoordinates.minX) + (2 * margin);\n  canvas.style.width = `${canvas.width}px`;\n  canvas.height = Math.abs(borderCoordinates.maxY - borderCoordinates.minY) + (2 * margin);\n  canvas.style.height = `${canvas.height}px`;\n  return canvas;\n}\n\n/**\n * Generate a PNG image data url from the model\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @param {Number} [margin=10] Margins to apply around the image\n * @return {String} Image data string result\n */\nexport function getImage(model, stroker, margin = 10) {\n  if (model.rawStrokes.length > 0) {\n    const borderCoordinates = InkModel.getBorderCoordinates(model);\n\n    const capturingCanvas = createCanvas(borderCoordinates, margin);\n    const renderingCanvas = createCanvas(borderCoordinates, margin);\n    const renderStructure = {\n      renderingCanvas,\n      renderingCanvasContext: renderingCanvas.getContext('2d'),\n      capturingCanvas,\n      capturingCanvasContext: capturingCanvas.getContext('2d')\n    };\n    // Change canvas origin\n    renderStructure.renderingCanvasContext.translate(-borderCoordinates.minX + margin, -borderCoordinates.minY + margin);\n    drawModel(renderStructure, model, stroker);\n    return renderStructure.renderingCanvas.toDataURL('image/png');\n  }\n  return null;\n}\n","/*!\n * perfect-scrollbar v1.3.0\n * (c) 2017 Hyunje Jun\n * @license MIT\n */\nfunction get(element) {\n  return getComputedStyle(element);\n}\n\nfunction set(element, obj) {\n  for (var key in obj) {\n    var val = obj[key];\n    if (typeof val === 'number') {\n      val = val + \"px\";\n    }\n    element.style[key] = val;\n  }\n  return element;\n}\n\nfunction div(className) {\n  var div = document.createElement('div');\n  div.className = className;\n  return div;\n}\n\nvar elMatches =\n  typeof Element !== 'undefined' &&\n  (Element.prototype.matches ||\n    Element.prototype.webkitMatchesSelector ||\n    Element.prototype.msMatchesSelector);\n\nfunction matches(element, query) {\n  if (!elMatches) {\n    throw new Error('No element matching method supported');\n  }\n\n  return elMatches.call(element, query);\n}\n\nfunction remove(element) {\n  if (element.remove) {\n    element.remove();\n  } else {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n}\n\nfunction queryChildren(element, selector) {\n  return Array.prototype.filter.call(element.children, function (child) { return matches(child, selector); }\n  );\n}\n\nvar cls = {\n  main: 'ps',\n  element: {\n    thumb: function (x) { return (\"ps__thumb-\" + x); },\n    rail: function (x) { return (\"ps__rail-\" + x); },\n    consuming: 'ps__child--consume',\n  },\n  state: {\n    focus: 'ps--focus',\n    active: function (x) { return (\"ps--active-\" + x); },\n    scrolling: function (x) { return (\"ps--scrolling-\" + x); },\n  },\n};\n\n/*\n * Helper methods\n */\nvar scrollingClassTimeout = { x: null, y: null };\n\nfunction addScrollingClass(i, x) {\n  var classList = i.element.classList;\n  var className = cls.state.scrolling(x);\n\n  if (classList.contains(className)) {\n    clearTimeout(scrollingClassTimeout[x]);\n  } else {\n    classList.add(className);\n  }\n}\n\nfunction removeScrollingClass(i, x) {\n  scrollingClassTimeout[x] = setTimeout(\n    function () { return i.isAlive && i.element.classList.remove(cls.state.scrolling(x)); },\n    i.settings.scrollingThreshold\n  );\n}\n\nfunction setScrollingClassInstantly(i, x) {\n  addScrollingClass(i, x);\n  removeScrollingClass(i, x);\n}\n\nvar EventElement = function EventElement(element) {\n  this.element = element;\n  this.handlers = {};\n};\n\nvar prototypeAccessors = { isEmpty: { configurable: true } };\n\nEventElement.prototype.bind = function bind (eventName, handler) {\n  if (typeof this.handlers[eventName] === 'undefined') {\n    this.handlers[eventName] = [];\n  }\n  this.handlers[eventName].push(handler);\n  this.element.addEventListener(eventName, handler, false);\n};\n\nEventElement.prototype.unbind = function unbind (eventName, target) {\n    var this$1 = this;\n\n  this.handlers[eventName] = this.handlers[eventName].filter(function (handler) {\n    if (target && handler !== target) {\n      return true;\n    }\n    this$1.element.removeEventListener(eventName, handler, false);\n    return false;\n  });\n};\n\nEventElement.prototype.unbindAll = function unbindAll () {\n    var this$1 = this;\n\n  for (var name in this$1.handlers) {\n    this$1.unbind(name);\n  }\n};\n\nprototypeAccessors.isEmpty.get = function () {\n    var this$1 = this;\n\n  return Object.keys(this.handlers).every(\n    function (key) { return this$1.handlers[key].length === 0; }\n  );\n};\n\nObject.defineProperties( EventElement.prototype, prototypeAccessors );\n\nvar EventManager = function EventManager() {\n  this.eventElements = [];\n};\n\nEventManager.prototype.eventElement = function eventElement (element) {\n  var ee = this.eventElements.filter(function (ee) { return ee.element === element; })[0];\n  if (!ee) {\n    ee = new EventElement(element);\n    this.eventElements.push(ee);\n  }\n  return ee;\n};\n\nEventManager.prototype.bind = function bind (element, eventName, handler) {\n  this.eventElement(element).bind(eventName, handler);\n};\n\nEventManager.prototype.unbind = function unbind (element, eventName, handler) {\n  var ee = this.eventElement(element);\n  ee.unbind(eventName, handler);\n\n  if (ee.isEmpty) {\n    // remove\n    this.eventElements.splice(this.eventElements.indexOf(ee), 1);\n  }\n};\n\nEventManager.prototype.unbindAll = function unbindAll () {\n  this.eventElements.forEach(function (e) { return e.unbindAll(); });\n  this.eventElements = [];\n};\n\nEventManager.prototype.once = function once (element, eventName, handler) {\n  var ee = this.eventElement(element);\n  var onceHandler = function (evt) {\n    ee.unbind(eventName, onceHandler);\n    handler(evt);\n  };\n  ee.bind(eventName, onceHandler);\n};\n\nfunction createEvent(name) {\n  if (typeof window.CustomEvent === 'function') {\n    return new CustomEvent(name);\n  } else {\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(name, false, false, undefined);\n    return evt;\n  }\n}\n\nvar processScrollDiff = function(\n  i,\n  axis,\n  diff,\n  useScrollingClass,\n  forceFireReachEvent\n) {\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\n\n  var fields;\n  if (axis === 'top') {\n    fields = [\n      'contentHeight',\n      'containerHeight',\n      'scrollTop',\n      'y',\n      'up',\n      'down' ];\n  } else if (axis === 'left') {\n    fields = [\n      'contentWidth',\n      'containerWidth',\n      'scrollLeft',\n      'x',\n      'left',\n      'right' ];\n  } else {\n    throw new Error('A proper axis should be provided');\n  }\n\n  processScrollDiff$1(i, diff, fields, useScrollingClass, forceFireReachEvent);\n};\n\nfunction processScrollDiff$1(\n  i,\n  diff,\n  ref,\n  useScrollingClass,\n  forceFireReachEvent\n) {\n  var contentHeight = ref[0];\n  var containerHeight = ref[1];\n  var scrollTop = ref[2];\n  var y = ref[3];\n  var up = ref[4];\n  var down = ref[5];\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\n\n  var element = i.element;\n\n  // reset reach\n  i.reach[y] = null;\n\n  // 1 for subpixel rounding\n  if (element[scrollTop] < 1) {\n    i.reach[y] = 'start';\n  }\n\n  // 1 for subpixel rounding\n  if (element[scrollTop] > i[contentHeight] - i[containerHeight] - 1) {\n    i.reach[y] = 'end';\n  }\n\n  if (diff) {\n    element.dispatchEvent(createEvent((\"ps-scroll-\" + y)));\n\n    if (diff < 0) {\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + up)));\n    } else if (diff > 0) {\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + down)));\n    }\n\n    if (useScrollingClass) {\n      setScrollingClassInstantly(i, y);\n    }\n  }\n\n  if (i.reach[y] && (diff || forceFireReachEvent)) {\n    element.dispatchEvent(createEvent((\"ps-\" + y + \"-reach-\" + (i.reach[y]))));\n  }\n}\n\nfunction toInt(x) {\n  return parseInt(x, 10) || 0;\n}\n\nfunction isEditable(el) {\n  return (\n    matches(el, 'input,[contenteditable]') ||\n    matches(el, 'select,[contenteditable]') ||\n    matches(el, 'textarea,[contenteditable]') ||\n    matches(el, 'button,[contenteditable]')\n  );\n}\n\nfunction outerWidth(element) {\n  var styles = get(element);\n  return (\n    toInt(styles.width) +\n    toInt(styles.paddingLeft) +\n    toInt(styles.paddingRight) +\n    toInt(styles.borderLeftWidth) +\n    toInt(styles.borderRightWidth)\n  );\n}\n\nvar env = {\n  isWebKit:\n    typeof document !== 'undefined' &&\n    'WebkitAppearance' in document.documentElement.style,\n  supportsTouch:\n    typeof window !== 'undefined' &&\n    ('ontouchstart' in window ||\n      (window.DocumentTouch && document instanceof window.DocumentTouch)),\n  supportsIePointer:\n    typeof navigator !== 'undefined' && navigator.msMaxTouchPoints,\n  isChrome:\n    typeof navigator !== 'undefined' &&\n    /Chrome/i.test(navigator && navigator.userAgent),\n};\n\nvar updateGeometry = function(i) {\n  var element = i.element;\n\n  i.containerWidth = element.clientWidth;\n  i.containerHeight = element.clientHeight;\n  i.contentWidth = element.scrollWidth;\n  i.contentHeight = element.scrollHeight;\n\n  if (!element.contains(i.scrollbarXRail)) {\n    // clean up and append\n    queryChildren(element, cls.element.rail('x')).forEach(function (el) { return remove(el); }\n    );\n    element.appendChild(i.scrollbarXRail);\n  }\n  if (!element.contains(i.scrollbarYRail)) {\n    // clean up and append\n    queryChildren(element, cls.element.rail('y')).forEach(function (el) { return remove(el); }\n    );\n    element.appendChild(i.scrollbarYRail);\n  }\n\n  if (\n    !i.settings.suppressScrollX &&\n    i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth\n  ) {\n    i.scrollbarXActive = true;\n    i.railXWidth = i.containerWidth - i.railXMarginWidth;\n    i.railXRatio = i.containerWidth / i.railXWidth;\n    i.scrollbarXWidth = getThumbSize(\n      i,\n      toInt(i.railXWidth * i.containerWidth / i.contentWidth)\n    );\n    i.scrollbarXLeft = toInt(\n      (i.negativeScrollAdjustment + element.scrollLeft) *\n        (i.railXWidth - i.scrollbarXWidth) /\n        (i.contentWidth - i.containerWidth)\n    );\n  } else {\n    i.scrollbarXActive = false;\n  }\n\n  if (\n    !i.settings.suppressScrollY &&\n    i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight\n  ) {\n    i.scrollbarYActive = true;\n    i.railYHeight = i.containerHeight - i.railYMarginHeight;\n    i.railYRatio = i.containerHeight / i.railYHeight;\n    i.scrollbarYHeight = getThumbSize(\n      i,\n      toInt(i.railYHeight * i.containerHeight / i.contentHeight)\n    );\n    i.scrollbarYTop = toInt(\n      element.scrollTop *\n        (i.railYHeight - i.scrollbarYHeight) /\n        (i.contentHeight - i.containerHeight)\n    );\n  } else {\n    i.scrollbarYActive = false;\n  }\n\n  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\n    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\n  }\n  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\n    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\n  }\n\n  updateCss(element, i);\n\n  if (i.scrollbarXActive) {\n    element.classList.add(cls.state.active('x'));\n  } else {\n    element.classList.remove(cls.state.active('x'));\n    i.scrollbarXWidth = 0;\n    i.scrollbarXLeft = 0;\n    element.scrollLeft = 0;\n  }\n  if (i.scrollbarYActive) {\n    element.classList.add(cls.state.active('y'));\n  } else {\n    element.classList.remove(cls.state.active('y'));\n    i.scrollbarYHeight = 0;\n    i.scrollbarYTop = 0;\n    element.scrollTop = 0;\n  }\n};\n\nfunction getThumbSize(i, thumbSize) {\n  if (i.settings.minScrollbarLength) {\n    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\n  }\n  if (i.settings.maxScrollbarLength) {\n    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\n  }\n  return thumbSize;\n}\n\nfunction updateCss(element, i) {\n  var xRailOffset = { width: i.railXWidth };\n  if (i.isRtl) {\n    xRailOffset.left =\n      i.negativeScrollAdjustment +\n      element.scrollLeft +\n      i.containerWidth -\n      i.contentWidth;\n  } else {\n    xRailOffset.left = element.scrollLeft;\n  }\n  if (i.isScrollbarXUsingBottom) {\n    xRailOffset.bottom = i.scrollbarXBottom - element.scrollTop;\n  } else {\n    xRailOffset.top = i.scrollbarXTop + element.scrollTop;\n  }\n  set(i.scrollbarXRail, xRailOffset);\n\n  var yRailOffset = { top: element.scrollTop, height: i.railYHeight };\n  if (i.isScrollbarYUsingRight) {\n    if (i.isRtl) {\n      yRailOffset.right =\n        i.contentWidth -\n        (i.negativeScrollAdjustment + element.scrollLeft) -\n        i.scrollbarYRight -\n        i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\n    }\n  } else {\n    if (i.isRtl) {\n      yRailOffset.left =\n        i.negativeScrollAdjustment +\n        element.scrollLeft +\n        i.containerWidth * 2 -\n        i.contentWidth -\n        i.scrollbarYLeft -\n        i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\n    }\n  }\n  set(i.scrollbarYRail, yRailOffset);\n\n  set(i.scrollbarX, {\n    left: i.scrollbarXLeft,\n    width: i.scrollbarXWidth - i.railBorderXWidth,\n  });\n  set(i.scrollbarY, {\n    top: i.scrollbarYTop,\n    height: i.scrollbarYHeight - i.railBorderYWidth,\n  });\n}\n\nvar clickRail = function(i) {\n  i.event.bind(i.scrollbarY, 'mousedown', function (e) { return e.stopPropagation(); });\n  i.event.bind(i.scrollbarYRail, 'mousedown', function (e) {\n    var positionTop =\n      e.pageY -\n      window.pageYOffset -\n      i.scrollbarYRail.getBoundingClientRect().top;\n    var direction = positionTop > i.scrollbarYTop ? 1 : -1;\n\n    i.element.scrollTop += direction * i.containerHeight;\n    updateGeometry(i);\n\n    e.stopPropagation();\n  });\n\n  i.event.bind(i.scrollbarX, 'mousedown', function (e) { return e.stopPropagation(); });\n  i.event.bind(i.scrollbarXRail, 'mousedown', function (e) {\n    var positionLeft =\n      e.pageX -\n      window.pageXOffset -\n      i.scrollbarXRail.getBoundingClientRect().left;\n    var direction = positionLeft > i.scrollbarXLeft ? 1 : -1;\n\n    i.element.scrollLeft += direction * i.containerWidth;\n    updateGeometry(i);\n\n    e.stopPropagation();\n  });\n};\n\nvar dragThumb = function(i) {\n  bindMouseScrollHandler(i, [\n    'containerWidth',\n    'contentWidth',\n    'pageX',\n    'railXWidth',\n    'scrollbarX',\n    'scrollbarXWidth',\n    'scrollLeft',\n    'x' ]);\n  bindMouseScrollHandler(i, [\n    'containerHeight',\n    'contentHeight',\n    'pageY',\n    'railYHeight',\n    'scrollbarY',\n    'scrollbarYHeight',\n    'scrollTop',\n    'y' ]);\n};\n\nfunction bindMouseScrollHandler(\n  i,\n  ref\n) {\n  var containerHeight = ref[0];\n  var contentHeight = ref[1];\n  var pageY = ref[2];\n  var railYHeight = ref[3];\n  var scrollbarY = ref[4];\n  var scrollbarYHeight = ref[5];\n  var scrollTop = ref[6];\n  var y = ref[7];\n\n  var element = i.element;\n\n  var startingScrollTop = null;\n  var startingMousePageY = null;\n  var scrollBy = null;\n\n  function mouseMoveHandler(e) {\n    element[scrollTop] =\n      startingScrollTop + scrollBy * (e[pageY] - startingMousePageY);\n    addScrollingClass(i, y);\n    updateGeometry(i);\n\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  function mouseUpHandler() {\n    removeScrollingClass(i, y);\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n  }\n\n  i.event.bind(i[scrollbarY], 'mousedown', function (e) {\n    startingScrollTop = element[scrollTop];\n    startingMousePageY = e[pageY];\n    scrollBy =\n      (i[contentHeight] - i[containerHeight]) /\n      (i[railYHeight] - i[scrollbarYHeight]);\n\n    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\n\n    e.stopPropagation();\n    e.preventDefault();\n  });\n}\n\nvar keyboard = function(i) {\n  var element = i.element;\n\n  var elementHovered = function () { return matches(element, ':hover'); };\n  var scrollbarFocused = function () { return matches(i.scrollbarX, ':focus') || matches(i.scrollbarY, ':focus'); };\n\n  function shouldPreventDefault(deltaX, deltaY) {\n    var scrollTop = element.scrollTop;\n    if (deltaX === 0) {\n      if (!i.scrollbarYActive) {\n        return false;\n      }\n      if (\n        (scrollTop === 0 && deltaY > 0) ||\n        (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)\n      ) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n\n    var scrollLeft = element.scrollLeft;\n    if (deltaY === 0) {\n      if (!i.scrollbarXActive) {\n        return false;\n      }\n      if (\n        (scrollLeft === 0 && deltaX < 0) ||\n        (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)\n      ) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n    return true;\n  }\n\n  i.event.bind(i.ownerDocument, 'keydown', function (e) {\n    if (\n      (e.isDefaultPrevented && e.isDefaultPrevented()) ||\n      e.defaultPrevented\n    ) {\n      return;\n    }\n\n    if (!elementHovered() && !scrollbarFocused()) {\n      return;\n    }\n\n    var activeElement = document.activeElement\n      ? document.activeElement\n      : i.ownerDocument.activeElement;\n    if (activeElement) {\n      if (activeElement.tagName === 'IFRAME') {\n        activeElement = activeElement.contentDocument.activeElement;\n      } else {\n        // go deeper if element is a webcomponent\n        while (activeElement.shadowRoot) {\n          activeElement = activeElement.shadowRoot.activeElement;\n        }\n      }\n      if (isEditable(activeElement)) {\n        return;\n      }\n    }\n\n    var deltaX = 0;\n    var deltaY = 0;\n\n    switch (e.which) {\n      case 37: // left\n        if (e.metaKey) {\n          deltaX = -i.contentWidth;\n        } else if (e.altKey) {\n          deltaX = -i.containerWidth;\n        } else {\n          deltaX = -30;\n        }\n        break;\n      case 38: // up\n        if (e.metaKey) {\n          deltaY = i.contentHeight;\n        } else if (e.altKey) {\n          deltaY = i.containerHeight;\n        } else {\n          deltaY = 30;\n        }\n        break;\n      case 39: // right\n        if (e.metaKey) {\n          deltaX = i.contentWidth;\n        } else if (e.altKey) {\n          deltaX = i.containerWidth;\n        } else {\n          deltaX = 30;\n        }\n        break;\n      case 40: // down\n        if (e.metaKey) {\n          deltaY = -i.contentHeight;\n        } else if (e.altKey) {\n          deltaY = -i.containerHeight;\n        } else {\n          deltaY = -30;\n        }\n        break;\n      case 32: // space bar\n        if (e.shiftKey) {\n          deltaY = i.containerHeight;\n        } else {\n          deltaY = -i.containerHeight;\n        }\n        break;\n      case 33: // page up\n        deltaY = i.containerHeight;\n        break;\n      case 34: // page down\n        deltaY = -i.containerHeight;\n        break;\n      case 36: // home\n        deltaY = i.contentHeight;\n        break;\n      case 35: // end\n        deltaY = -i.contentHeight;\n        break;\n      default:\n        return;\n    }\n\n    if (i.settings.suppressScrollX && deltaX !== 0) {\n      return;\n    }\n    if (i.settings.suppressScrollY && deltaY !== 0) {\n      return;\n    }\n\n    element.scrollTop -= deltaY;\n    element.scrollLeft += deltaX;\n    updateGeometry(i);\n\n    if (shouldPreventDefault(deltaX, deltaY)) {\n      e.preventDefault();\n    }\n  });\n};\n\nvar wheel = function(i) {\n  var element = i.element;\n\n  function shouldPreventDefault(deltaX, deltaY) {\n    var isTop = element.scrollTop === 0;\n    var isBottom =\n      element.scrollTop + element.offsetHeight === element.scrollHeight;\n    var isLeft = element.scrollLeft === 0;\n    var isRight =\n      element.scrollLeft + element.offsetWidth === element.offsetWidth;\n\n    var hitsBound;\n\n    // pick axis with primary direction\n    if (Math.abs(deltaY) > Math.abs(deltaX)) {\n      hitsBound = isTop || isBottom;\n    } else {\n      hitsBound = isLeft || isRight;\n    }\n\n    return hitsBound ? !i.settings.wheelPropagation : true;\n  }\n\n  function getDeltaFromEvent(e) {\n    var deltaX = e.deltaX;\n    var deltaY = -1 * e.deltaY;\n\n    if (typeof deltaX === 'undefined' || typeof deltaY === 'undefined') {\n      // OS X Safari\n      deltaX = -1 * e.wheelDeltaX / 6;\n      deltaY = e.wheelDeltaY / 6;\n    }\n\n    if (e.deltaMode && e.deltaMode === 1) {\n      // Firefox in deltaMode 1: Line scrolling\n      deltaX *= 10;\n      deltaY *= 10;\n    }\n\n    if (deltaX !== deltaX && deltaY !== deltaY /* NaN checks */) {\n      // IE in some mouse drivers\n      deltaX = 0;\n      deltaY = e.wheelDelta;\n    }\n\n    if (e.shiftKey) {\n      // reverse axis with shift key\n      return [-deltaY, -deltaX];\n    }\n    return [deltaX, deltaY];\n  }\n\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\n    // FIXME: this is a workaround for <select> issue in FF and IE #571\n    if (!env.isWebKit && element.querySelector('select:focus')) {\n      return true;\n    }\n\n    if (!element.contains(target)) {\n      return false;\n    }\n\n    var cursor = target;\n\n    while (cursor && cursor !== element) {\n      if (cursor.classList.contains(cls.element.consuming)) {\n        return true;\n      }\n\n      var style = get(cursor);\n      var overflow = [style.overflow, style.overflowX, style.overflowY].join(\n        ''\n      );\n\n      // if scrollable\n      if (overflow.match(/(scroll|auto)/)) {\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\n        if (maxScrollTop > 0) {\n          if (\n            !(cursor.scrollTop === 0 && deltaY > 0) &&\n            !(cursor.scrollTop === maxScrollTop && deltaY < 0)\n          ) {\n            return true;\n          }\n        }\n        var maxScrollLeft = cursor.scrollLeft - cursor.clientWidth;\n        if (maxScrollLeft > 0) {\n          if (\n            !(cursor.scrollLeft === 0 && deltaX < 0) &&\n            !(cursor.scrollLeft === maxScrollLeft && deltaX > 0)\n          ) {\n            return true;\n          }\n        }\n      }\n\n      cursor = cursor.parentNode;\n    }\n\n    return false;\n  }\n\n  function mousewheelHandler(e) {\n    var ref = getDeltaFromEvent(e);\n    var deltaX = ref[0];\n    var deltaY = ref[1];\n\n    if (shouldBeConsumedByChild(e.target, deltaX, deltaY)) {\n      return;\n    }\n\n    var shouldPrevent = false;\n    if (!i.settings.useBothWheelAxes) {\n      // deltaX will only be used for horizontal scrolling and deltaY will\n      // only be used for vertical scrolling - this is the default\n      element.scrollTop -= deltaY * i.settings.wheelSpeed;\n      element.scrollLeft += deltaX * i.settings.wheelSpeed;\n    } else if (i.scrollbarYActive && !i.scrollbarXActive) {\n      // only vertical scrollbar is active and useBothWheelAxes option is\n      // active, so let's scroll vertical bar using both mouse wheel axes\n      if (deltaY) {\n        element.scrollTop -= deltaY * i.settings.wheelSpeed;\n      } else {\n        element.scrollTop += deltaX * i.settings.wheelSpeed;\n      }\n      shouldPrevent = true;\n    } else if (i.scrollbarXActive && !i.scrollbarYActive) {\n      // useBothWheelAxes and only horizontal bar is active, so use both\n      // wheel axes for horizontal bar\n      if (deltaX) {\n        element.scrollLeft += deltaX * i.settings.wheelSpeed;\n      } else {\n        element.scrollLeft -= deltaY * i.settings.wheelSpeed;\n      }\n      shouldPrevent = true;\n    }\n\n    updateGeometry(i);\n\n    shouldPrevent = shouldPrevent || shouldPreventDefault(deltaX, deltaY);\n    if (shouldPrevent && !e.ctrlKey) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  if (typeof window.onwheel !== 'undefined') {\n    i.event.bind(element, 'wheel', mousewheelHandler);\n  } else if (typeof window.onmousewheel !== 'undefined') {\n    i.event.bind(element, 'mousewheel', mousewheelHandler);\n  }\n};\n\nvar touch = function(i) {\n  if (!env.supportsTouch && !env.supportsIePointer) {\n    return;\n  }\n\n  var element = i.element;\n\n  function shouldPrevent(deltaX, deltaY) {\n    var scrollTop = element.scrollTop;\n    var scrollLeft = element.scrollLeft;\n    var magnitudeX = Math.abs(deltaX);\n    var magnitudeY = Math.abs(deltaY);\n\n    if (magnitudeY > magnitudeX) {\n      // user is perhaps trying to swipe up/down the page\n\n      if (\n        (deltaY < 0 && scrollTop === i.contentHeight - i.containerHeight) ||\n        (deltaY > 0 && scrollTop === 0)\n      ) {\n        // set prevent for mobile Chrome refresh\n        return window.scrollY === 0 && deltaY > 0 && env.isChrome;\n      }\n    } else if (magnitudeX > magnitudeY) {\n      // user is perhaps trying to swipe left/right across the page\n\n      if (\n        (deltaX < 0 && scrollLeft === i.contentWidth - i.containerWidth) ||\n        (deltaX > 0 && scrollLeft === 0)\n      ) {\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function applyTouchMove(differenceX, differenceY) {\n    element.scrollTop -= differenceY;\n    element.scrollLeft -= differenceX;\n\n    updateGeometry(i);\n  }\n\n  var startOffset = {};\n  var startTime = 0;\n  var speed = {};\n  var easingLoop = null;\n\n  function getTouch(e) {\n    if (e.targetTouches) {\n      return e.targetTouches[0];\n    } else {\n      // Maybe IE pointer\n      return e;\n    }\n  }\n\n  function shouldHandle(e) {\n    if (e.pointerType && e.pointerType === 'pen' && e.buttons === 0) {\n      return false;\n    }\n    if (e.targetTouches && e.targetTouches.length === 1) {\n      return true;\n    }\n    if (\n      e.pointerType &&\n      e.pointerType !== 'mouse' &&\n      e.pointerType !== e.MSPOINTER_TYPE_MOUSE\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  function touchStart(e) {\n    if (!shouldHandle(e)) {\n      return;\n    }\n\n    var touch = getTouch(e);\n\n    startOffset.pageX = touch.pageX;\n    startOffset.pageY = touch.pageY;\n\n    startTime = new Date().getTime();\n\n    if (easingLoop !== null) {\n      clearInterval(easingLoop);\n    }\n  }\n\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\n    if (!element.contains(target)) {\n      return false;\n    }\n\n    var cursor = target;\n\n    while (cursor && cursor !== element) {\n      if (cursor.classList.contains(cls.element.consuming)) {\n        return true;\n      }\n\n      var style = get(cursor);\n      var overflow = [style.overflow, style.overflowX, style.overflowY].join(\n        ''\n      );\n\n      // if scrollable\n      if (overflow.match(/(scroll|auto)/)) {\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\n        if (maxScrollTop > 0) {\n          if (\n            !(cursor.scrollTop === 0 && deltaY > 0) &&\n            !(cursor.scrollTop === maxScrollTop && deltaY < 0)\n          ) {\n            return true;\n          }\n        }\n        var maxScrollLeft = cursor.scrollLeft - cursor.clientWidth;\n        if (maxScrollLeft > 0) {\n          if (\n            !(cursor.scrollLeft === 0 && deltaX < 0) &&\n            !(cursor.scrollLeft === maxScrollLeft && deltaX > 0)\n          ) {\n            return true;\n          }\n        }\n      }\n\n      cursor = cursor.parentNode;\n    }\n\n    return false;\n  }\n\n  function touchMove(e) {\n    if (shouldHandle(e)) {\n      var touch = getTouch(e);\n\n      var currentOffset = { pageX: touch.pageX, pageY: touch.pageY };\n\n      var differenceX = currentOffset.pageX - startOffset.pageX;\n      var differenceY = currentOffset.pageY - startOffset.pageY;\n\n      if (shouldBeConsumedByChild(e.target, differenceX, differenceY)) {\n        return;\n      }\n\n      applyTouchMove(differenceX, differenceY);\n      startOffset = currentOffset;\n\n      var currentTime = new Date().getTime();\n\n      var timeGap = currentTime - startTime;\n      if (timeGap > 0) {\n        speed.x = differenceX / timeGap;\n        speed.y = differenceY / timeGap;\n        startTime = currentTime;\n      }\n\n      if (shouldPrevent(differenceX, differenceY)) {\n        e.preventDefault();\n      }\n    }\n  }\n  function touchEnd() {\n    if (i.settings.swipeEasing) {\n      clearInterval(easingLoop);\n      easingLoop = setInterval(function() {\n        if (i.isInitialized) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        if (!speed.x && !speed.y) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        applyTouchMove(speed.x * 30, speed.y * 30);\n\n        speed.x *= 0.8;\n        speed.y *= 0.8;\n      }, 10);\n    }\n  }\n\n  if (env.supportsTouch) {\n    i.event.bind(element, 'touchstart', touchStart);\n    i.event.bind(element, 'touchmove', touchMove);\n    i.event.bind(element, 'touchend', touchEnd);\n  } else if (env.supportsIePointer) {\n    if (window.PointerEvent) {\n      i.event.bind(element, 'pointerdown', touchStart);\n      i.event.bind(element, 'pointermove', touchMove);\n      i.event.bind(element, 'pointerup', touchEnd);\n    } else if (window.MSPointerEvent) {\n      i.event.bind(element, 'MSPointerDown', touchStart);\n      i.event.bind(element, 'MSPointerMove', touchMove);\n      i.event.bind(element, 'MSPointerUp', touchEnd);\n    }\n  }\n};\n\nvar defaultSettings = function () { return ({\n  handlers: ['click-rail', 'drag-thumb', 'keyboard', 'wheel', 'touch'],\n  maxScrollbarLength: null,\n  minScrollbarLength: null,\n  scrollingThreshold: 1000,\n  scrollXMarginOffset: 0,\n  scrollYMarginOffset: 0,\n  suppressScrollX: false,\n  suppressScrollY: false,\n  swipeEasing: true,\n  useBothWheelAxes: false,\n  wheelPropagation: false,\n  wheelSpeed: 1,\n}); };\n\nvar handlers = {\n  'click-rail': clickRail,\n  'drag-thumb': dragThumb,\n  keyboard: keyboard,\n  wheel: wheel,\n  touch: touch,\n};\n\nvar PerfectScrollbar = function PerfectScrollbar(element, userSettings) {\n  var this$1 = this;\n  if ( userSettings === void 0 ) userSettings = {};\n\n  if (typeof element === 'string') {\n    element = document.querySelector(element);\n  }\n\n  if (!element || !element.nodeName) {\n    throw new Error('no element is specified to initialize PerfectScrollbar');\n  }\n\n  this.element = element;\n\n  element.classList.add(cls.main);\n\n  this.settings = defaultSettings();\n  for (var key in userSettings) {\n    this$1.settings[key] = userSettings[key];\n  }\n\n  this.containerWidth = null;\n  this.containerHeight = null;\n  this.contentWidth = null;\n  this.contentHeight = null;\n\n  var focus = function () { return element.classList.add(cls.state.focus); };\n  var blur = function () { return element.classList.remove(cls.state.focus); };\n\n  this.isRtl = get(element).direction === 'rtl';\n  this.isNegativeScroll = (function () {\n    var originalScrollLeft = element.scrollLeft;\n    var result = null;\n    element.scrollLeft = -1;\n    result = element.scrollLeft < 0;\n    element.scrollLeft = originalScrollLeft;\n    return result;\n  })();\n  this.negativeScrollAdjustment = this.isNegativeScroll\n    ? element.scrollWidth - element.clientWidth\n    : 0;\n  this.event = new EventManager();\n  this.ownerDocument = element.ownerDocument || document;\n\n  this.scrollbarXRail = div(cls.element.rail('x'));\n  element.appendChild(this.scrollbarXRail);\n  this.scrollbarX = div(cls.element.thumb('x'));\n  this.scrollbarXRail.appendChild(this.scrollbarX);\n  this.scrollbarX.setAttribute('tabindex', 0);\n  this.event.bind(this.scrollbarX, 'focus', focus);\n  this.event.bind(this.scrollbarX, 'blur', blur);\n  this.scrollbarXActive = null;\n  this.scrollbarXWidth = null;\n  this.scrollbarXLeft = null;\n  var railXStyle = get(this.scrollbarXRail);\n  this.scrollbarXBottom = parseInt(railXStyle.bottom, 10);\n  if (isNaN(this.scrollbarXBottom)) {\n    this.isScrollbarXUsingBottom = false;\n    this.scrollbarXTop = toInt(railXStyle.top);\n  } else {\n    this.isScrollbarXUsingBottom = true;\n  }\n  this.railBorderXWidth =\n    toInt(railXStyle.borderLeftWidth) + toInt(railXStyle.borderRightWidth);\n  // Set rail to display:block to calculate margins\n  set(this.scrollbarXRail, { display: 'block' });\n  this.railXMarginWidth =\n    toInt(railXStyle.marginLeft) + toInt(railXStyle.marginRight);\n  set(this.scrollbarXRail, { display: '' });\n  this.railXWidth = null;\n  this.railXRatio = null;\n\n  this.scrollbarYRail = div(cls.element.rail('y'));\n  element.appendChild(this.scrollbarYRail);\n  this.scrollbarY = div(cls.element.thumb('y'));\n  this.scrollbarYRail.appendChild(this.scrollbarY);\n  this.scrollbarY.setAttribute('tabindex', 0);\n  this.event.bind(this.scrollbarY, 'focus', focus);\n  this.event.bind(this.scrollbarY, 'blur', blur);\n  this.scrollbarYActive = null;\n  this.scrollbarYHeight = null;\n  this.scrollbarYTop = null;\n  var railYStyle = get(this.scrollbarYRail);\n  this.scrollbarYRight = parseInt(railYStyle.right, 10);\n  if (isNaN(this.scrollbarYRight)) {\n    this.isScrollbarYUsingRight = false;\n    this.scrollbarYLeft = toInt(railYStyle.left);\n  } else {\n    this.isScrollbarYUsingRight = true;\n  }\n  this.scrollbarYOuterWidth = this.isRtl ? outerWidth(this.scrollbarY) : null;\n  this.railBorderYWidth =\n    toInt(railYStyle.borderTopWidth) + toInt(railYStyle.borderBottomWidth);\n  set(this.scrollbarYRail, { display: 'block' });\n  this.railYMarginHeight =\n    toInt(railYStyle.marginTop) + toInt(railYStyle.marginBottom);\n  set(this.scrollbarYRail, { display: '' });\n  this.railYHeight = null;\n  this.railYRatio = null;\n\n  this.reach = {\n    x:\n      element.scrollLeft <= 0\n        ? 'start'\n        : element.scrollLeft >= this.contentWidth - this.containerWidth\n          ? 'end'\n          : null,\n    y:\n      element.scrollTop <= 0\n        ? 'start'\n        : element.scrollTop >= this.contentHeight - this.containerHeight\n          ? 'end'\n          : null,\n  };\n\n  this.isAlive = true;\n\n  this.settings.handlers.forEach(function (handlerName) { return handlers[handlerName](this$1); });\n\n  this.lastScrollTop = element.scrollTop; // for onScroll only\n  this.lastScrollLeft = element.scrollLeft; // for onScroll only\n  this.event.bind(this.element, 'scroll', function (e) { return this$1.onScroll(e); });\n  updateGeometry(this);\n};\n\nPerfectScrollbar.prototype.update = function update () {\n  if (!this.isAlive) {\n    return;\n  }\n\n  // Recalcuate negative scrollLeft adjustment\n  this.negativeScrollAdjustment = this.isNegativeScroll\n    ? this.element.scrollWidth - this.element.clientWidth\n    : 0;\n\n  // Recalculate rail margins\n  set(this.scrollbarXRail, { display: 'block' });\n  set(this.scrollbarYRail, { display: 'block' });\n  this.railXMarginWidth =\n    toInt(get(this.scrollbarXRail).marginLeft) +\n    toInt(get(this.scrollbarXRail).marginRight);\n  this.railYMarginHeight =\n    toInt(get(this.scrollbarYRail).marginTop) +\n    toInt(get(this.scrollbarYRail).marginBottom);\n\n  // Hide scrollbars not to affect scrollWidth and scrollHeight\n  set(this.scrollbarXRail, { display: 'none' });\n  set(this.scrollbarYRail, { display: 'none' });\n\n  updateGeometry(this);\n\n  processScrollDiff(this, 'top', 0, false, true);\n  processScrollDiff(this, 'left', 0, false, true);\n\n  set(this.scrollbarXRail, { display: '' });\n  set(this.scrollbarYRail, { display: '' });\n};\n\nPerfectScrollbar.prototype.onScroll = function onScroll (e) {\n  if (!this.isAlive) {\n    return;\n  }\n\n  updateGeometry(this);\n  processScrollDiff(this, 'top', this.element.scrollTop - this.lastScrollTop);\n  processScrollDiff(\n    this,\n    'left',\n    this.element.scrollLeft - this.lastScrollLeft\n  );\n\n  this.lastScrollTop = this.element.scrollTop;\n  this.lastScrollLeft = this.element.scrollLeft;\n};\n\nPerfectScrollbar.prototype.destroy = function destroy () {\n  if (!this.isAlive) {\n    return;\n  }\n\n  this.event.unbindAll();\n  remove(this.scrollbarX);\n  remove(this.scrollbarY);\n  remove(this.scrollbarXRail);\n  remove(this.scrollbarYRail);\n  this.removePsClasses();\n\n  // unset elements\n  this.element = null;\n  this.scrollbarX = null;\n  this.scrollbarY = null;\n  this.scrollbarXRail = null;\n  this.scrollbarYRail = null;\n\n  this.isAlive = false;\n};\n\nPerfectScrollbar.prototype.removePsClasses = function removePsClasses () {\n  this.element.className = this.element.className\n    .split(' ')\n    .filter(function (name) { return !name.match(/^ps([-_].+|)$/); })\n    .join(' ');\n};\n\nexport default PerfectScrollbar;\n","function select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', 'select'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('select'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.select);\n        global.clipboardAction = mod.exports;\n    }\n})(this, function (module, _select) {\n    'use strict';\n\n    var _select2 = _interopRequireDefault(_select);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var ClipboardAction = function () {\n        /**\n         * @param {Object} options\n         */\n        function ClipboardAction(options) {\n            _classCallCheck(this, ClipboardAction);\n\n            this.resolveOptions(options);\n            this.initSelection();\n        }\n\n        /**\n         * Defines base properties passed from constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(ClipboardAction, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = options.action;\n                this.container = options.container;\n                this.emitter = options.emitter;\n                this.target = options.target;\n                this.text = options.text;\n                this.trigger = options.trigger;\n\n                this.selectedText = '';\n            }\n        }, {\n            key: 'initSelection',\n            value: function initSelection() {\n                if (this.text) {\n                    this.selectFake();\n                } else if (this.target) {\n                    this.selectTarget();\n                }\n            }\n        }, {\n            key: 'selectFake',\n            value: function selectFake() {\n                var _this = this;\n\n                var isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n                this.removeFake();\n\n                this.fakeHandlerCallback = function () {\n                    return _this.removeFake();\n                };\n                this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n                this.fakeElem = document.createElement('textarea');\n                // Prevent zooming on iOS\n                this.fakeElem.style.fontSize = '12pt';\n                // Reset box model\n                this.fakeElem.style.border = '0';\n                this.fakeElem.style.padding = '0';\n                this.fakeElem.style.margin = '0';\n                // Move element out of screen horizontally\n                this.fakeElem.style.position = 'absolute';\n                this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n                // Move element to the same position vertically\n                var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n                this.fakeElem.style.top = yPosition + 'px';\n\n                this.fakeElem.setAttribute('readonly', '');\n                this.fakeElem.value = this.text;\n\n                this.container.appendChild(this.fakeElem);\n\n                this.selectedText = (0, _select2.default)(this.fakeElem);\n                this.copyText();\n            }\n        }, {\n            key: 'removeFake',\n            value: function removeFake() {\n                if (this.fakeHandler) {\n                    this.container.removeEventListener('click', this.fakeHandlerCallback);\n                    this.fakeHandler = null;\n                    this.fakeHandlerCallback = null;\n                }\n\n                if (this.fakeElem) {\n                    this.container.removeChild(this.fakeElem);\n                    this.fakeElem = null;\n                }\n            }\n        }, {\n            key: 'selectTarget',\n            value: function selectTarget() {\n                this.selectedText = (0, _select2.default)(this.target);\n                this.copyText();\n            }\n        }, {\n            key: 'copyText',\n            value: function copyText() {\n                var succeeded = void 0;\n\n                try {\n                    succeeded = document.execCommand(this.action);\n                } catch (err) {\n                    succeeded = false;\n                }\n\n                this.handleResult(succeeded);\n            }\n        }, {\n            key: 'handleResult',\n            value: function handleResult(succeeded) {\n                this.emitter.emit(succeeded ? 'success' : 'error', {\n                    action: this.action,\n                    text: this.selectedText,\n                    trigger: this.trigger,\n                    clearSelection: this.clearSelection.bind(this)\n                });\n            }\n        }, {\n            key: 'clearSelection',\n            value: function clearSelection() {\n                if (this.trigger) {\n                    this.trigger.focus();\n                }\n\n                window.getSelection().removeAllRanges();\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.removeFake();\n            }\n        }, {\n            key: 'action',\n            set: function set() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n                this._action = action;\n\n                if (this._action !== 'copy' && this._action !== 'cut') {\n                    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n                }\n            },\n            get: function get() {\n                return this._action;\n            }\n        }, {\n            key: 'target',\n            set: function set(target) {\n                if (target !== undefined) {\n                    if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n                        if (this.action === 'copy' && target.hasAttribute('disabled')) {\n                            throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n                        }\n\n                        if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n                            throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n                        }\n\n                        this._target = target;\n                    } else {\n                        throw new Error('Invalid \"target\" value, use a valid Element');\n                    }\n                }\n            },\n            get: function get() {\n                return this._target;\n            }\n        }]);\n\n        return ClipboardAction;\n    }();\n\n    module.exports = ClipboardAction;\n});","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n","var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","var is = require('./is');\nvar delegate = require('delegate');\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', './clipboard-action', 'tiny-emitter', 'good-listener'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n        global.clipboard = mod.exports;\n    }\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n    'use strict';\n\n    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n    var _goodListener2 = _interopRequireDefault(_goodListener);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    function _possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n\n    var Clipboard = function (_Emitter) {\n        _inherits(Clipboard, _Emitter);\n\n        /**\n         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n         * @param {Object} options\n         */\n        function Clipboard(trigger, options) {\n            _classCallCheck(this, Clipboard);\n\n            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\n\n            _this.resolveOptions(options);\n            _this.listenClick(trigger);\n            return _this;\n        }\n\n        /**\n         * Defines if attributes would be resolved using internal setter functions\n         * or custom functions that were passed in the constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(Clipboard, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n                this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n                this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n                this.container = _typeof(options.container) === 'object' ? options.container : document.body;\n            }\n        }, {\n            key: 'listenClick',\n            value: function listenClick(trigger) {\n                var _this2 = this;\n\n                this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n                    return _this2.onClick(e);\n                });\n            }\n        }, {\n            key: 'onClick',\n            value: function onClick(e) {\n                var trigger = e.delegateTarget || e.currentTarget;\n\n                if (this.clipboardAction) {\n                    this.clipboardAction = null;\n                }\n\n                this.clipboardAction = new _clipboardAction2.default({\n                    action: this.action(trigger),\n                    target: this.target(trigger),\n                    text: this.text(trigger),\n                    container: this.container,\n                    trigger: trigger,\n                    emitter: this\n                });\n            }\n        }, {\n            key: 'defaultAction',\n            value: function defaultAction(trigger) {\n                return getAttributeValue('action', trigger);\n            }\n        }, {\n            key: 'defaultTarget',\n            value: function defaultTarget(trigger) {\n                var selector = getAttributeValue('target', trigger);\n\n                if (selector) {\n                    return document.querySelector(selector);\n                }\n            }\n        }, {\n            key: 'defaultText',\n            value: function defaultText(trigger) {\n                return getAttributeValue('text', trigger);\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.listener.destroy();\n\n                if (this.clipboardAction) {\n                    this.clipboardAction.destroy();\n                    this.clipboardAction = null;\n                }\n            }\n        }], [{\n            key: 'isSupported',\n            value: function isSupported() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n                var actions = typeof action === 'string' ? [action] : action;\n                var support = !!document.queryCommandSupported;\n\n                actions.forEach(function (action) {\n                    support = support && !!document.queryCommandSupported(action);\n                });\n\n                return support;\n            }\n        }]);\n\n        return Clipboard;\n    }(_tinyEmitter2.default);\n\n    /**\n     * Helper function to retrieve attribute value.\n     * @param {String} suffix\n     * @param {Element} element\n     */\n    function getAttributeValue(suffix, element) {\n        var attribute = 'data-clipboard-' + suffix;\n\n        if (!element.hasAttribute(attribute)) {\n            return;\n        }\n\n        return element.getAttribute(attribute);\n    }\n\n    module.exports = Clipboard;\n});","import PerfectScrollbar from 'perfect-scrollbar';\nimport Clipboard from 'clipboard';\nimport Constants from '../configuration/Constants';\n\n/**\n * Smart guide\n * @typedef {Object} SmartGuide\n * @property {Editor} editor - A reference to the current editor.\n * @property {String} wordToChange - Word to change following a click on a word.\n * @property {String} lastWord - Keep the last word of the previous export to compare with the new and scroll if it's different.\n * @property {String} previousLabelExport - Keep the previous label export to know if we should repopulate the prompter text.\n * @property {PerfectScrollbar} perfectScrollbar - Perfect Scrollbar used to get gestures from smart guide using touch-action none anyway and get scrolling too.\n * @property {Object} elements - All the HTML elements of the smart guide.\n * @property {Number} smartGuideTimeOutId - Id of the setTimeOut from fade out animation to clear.\n * @property {String} randomString - Random string used in case of multiple smart guide.\n */\n\n/**\n * Create all the smart guide HTML elements.\n */\nfunction createHTMLElements(randomString) {\n  /**\n   * The smart guide element.\n   * @type {HTMLDivElement}\n   */\n  const smartGuideElement = document.createElement('div');\n  smartGuideElement.id = 'smartguide' + randomString;\n  smartGuideElement.classList.add('smartguide');\n\n  /**\n   * The prompter text element that contains the text to get the overflow working.\n   * @type {HTMLDivElement}\n   */\n  const textElement = document.createElement('div');\n  textElement.id = 'prompter-text' + randomString;\n  textElement.classList.add('prompter-text');\n  textElement.setAttribute('touch-action', 'none');\n\n  /**\n   * The text container element that contains the text element.\n   * @type {HTMLDivElement}\n   */\n  const textContainer = document.createElement('div');\n  textContainer.id = 'prompter-text-container' + randomString;\n  textContainer.classList.add('prompter-text-container');\n  textContainer.appendChild(textElement);\n\n  /**\n   * The actions menu represented by the ellipsis character.\n   * @type {HTMLDivElement}\n   */\n  const ellipsisElement = document.createElement('div');\n  ellipsisElement.id = 'ellipsis' + randomString;\n  ellipsisElement.classList.add('ellipsis');\n  ellipsisElement.innerHTML = '...';\n\n  /**\n   * The tag element.\n   * @type {HTMLDivElement}\n   */\n  const tagElement = document.createElement('div');\n  tagElement.id = 'tag-icon' + randomString;\n  tagElement.classList.add('tag-icon');\n  tagElement.innerHTML = '&#182;';\n\n  /**\n   * The candidates element that contains the candidates for a word.\n   * @type {HTMLDivElement}\n   */\n  const candidatesElement = document.createElement('div');\n  candidatesElement.id = 'candidates' + randomString;\n  candidatesElement.classList.add('candidates');\n\n  /**\n   * The menu element that contains the actions.\n   * @type {HTMLDivElement}\n   */\n  const menuElement = document.createElement('div');\n  menuElement.id = 'more-menu' + randomString;\n  menuElement.classList.add('more-menu');\n\n  /**\n   * The convert button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const convertElement = document.createElement('button');\n  convertElement.classList.add('options-label-button');\n  convertElement.id = 'convert' + randomString;\n  convertElement.innerHTML = 'Convert';\n\n  /**\n   * The copy button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const copyElement = document.createElement('button');\n  copyElement.classList.add('options-label-button');\n  copyElement.id = 'copy' + randomString;\n  copyElement.innerHTML = 'Copy';\n\n  /**\n   * The delete button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const deleteElement = document.createElement('button');\n  deleteElement.classList.add('options-label-button');\n  deleteElement.id = 'delete' + randomString;\n  deleteElement.innerHTML = 'Delete';\n\n  return {\n    smartGuideElement,\n    textElement,\n    textContainer,\n    candidatesElement,\n    menuElement,\n    tagElement,\n    ellipsisElement,\n    convertElement,\n    copyElement,\n    deleteElement,\n  };\n}\n\n/**\n * Check if node is in shadow dom\n * @param {Node} node - A node element.\n * @returns {boolean} true if is in shadow dom, false otherwise.\n */\nfunction isInShadow(node) {\n  let parent = (node && node.parentNode);\n  while (parent) {\n    if (parent.toString() === '[object ShadowRoot]') {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n}\n\n/**\n * Show the actions of the action menu.\n * @param {Event} evt - Event used to insert the option div using the event's target.\n * @param {Object} elements - All the elements of the smart guide.\n * @param {SmartGuide} smartGuide\n */\nfunction showActions(evt, elements) {\n  const elementsRef = elements;\n\n  const insertActions = () => {\n    elementsRef.menuElement.appendChild(elementsRef.convertElement);\n    elementsRef.menuElement.appendChild(elementsRef.copyElement);\n    elementsRef.menuElement.appendChild(elementsRef.deleteElement);\n\n    const parent = evt.target.parentNode;\n    parent.insertBefore(elementsRef.menuElement, evt.target);\n  };\n\n  const positionActions = () => {\n    // 48 to get the boundary of smart guide element.\n    const left = evt.target.offsetLeft - 68;\n    elementsRef.menuElement.style.left = `${left}px`;\n  };\n\n  const isMenuInDocument = document.contains(elementsRef.menuElement);\n  if (!isInShadow(elementsRef.menuElement) && !isMenuInDocument) {\n    elementsRef.menuElement.style.display = 'flex';\n    positionActions();\n    insertActions();\n  } else if (elementsRef.menuElement.style.display === 'none') {\n    positionActions();\n    elementsRef.menuElement.style.display = 'flex';\n  }\n}\n\n/**\n * Show the candidates of the clicked word.\n * @param {Event} evt - Event used to determine the clicked word.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction showCandidates(evt, editor, smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n\n  if (evt.target.id !== `prompter-text${smartGuide.randomString}`) {\n    const id = evt.target.id.replace('word-', '').replace(smartGuide.randomString, '');\n    const words = JSON.parse(editor.exports[Constants.Exports.JIIX]).words;\n    smartGuideRef.wordToChange = words[id];\n    smartGuideRef.wordToChange.id = id;\n    elementsRef.candidatesElement.innerHTML = '';\n    if (smartGuideRef.wordToChange && smartGuideRef.wordToChange.candidates) {\n      elementsRef.candidatesElement.style.display = 'flex';\n      smartGuideRef.wordToChange.candidates.forEach((word, index) => {\n        if (smartGuideRef.wordToChange.label === word) {\n          elementsRef.candidatesElement.innerHTML += `<span id=\"cdt-${index}${smartGuide.randomString}\" class=\"selected-word\">${word}</span>`;\n        } else {\n          elementsRef.candidatesElement.innerHTML += `<span id=\"cdt-${index}${smartGuide.randomString}\">${word}</span>`;\n        }\n      });\n      // get the parent parent of word to insert just before smart guide, 48 to get the boundary of smart guide element.\n      const top = 48;\n      const left = evt.target.getBoundingClientRect().left - 60;\n      elementsRef.candidatesElement.style.top = `${top}px`;\n      elementsRef.candidatesElement.style.left = `${left}px`;\n\n      const parent = evt.target.parentNode.parentNode.parentNode;\n      parent.insertBefore(elementsRef.candidatesElement, evt.target.parentNode.parentNode);\n    }\n  }\n}\n\n/**\n * Call the import_ function of the editor to import the modified Jiix with the new label.\n * @param {Event} evt - Event to determine the clicked candidate.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction clickCandidate(evt, editor, smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n  const candidate = evt.target.innerText;\n\n  if (candidate !== smartGuideRef.wordToChange.label && smartGuideRef.wordToChange.candidates.includes(candidate)) {\n    const jiixToImport = JSON.parse(editor.exports[Constants.Exports.JIIX]);\n    jiixToImport.words[smartGuideRef.wordToChange.id].label = candidate;\n    // eslint-disable-next-line no-underscore-dangle\n    editor.import_(JSON.stringify(jiixToImport), Constants.Exports.JIIX);\n  }\n  elementsRef.candidatesElement.style.display = 'none';\n}\n\n/**\n * Add the listeners to the smart guide elements.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction addListeners(editor, smartGuide) {\n  const elementsRef = smartGuide.elements;\n\n  elementsRef.textElement.addEventListener('click', evt => showCandidates(evt, editor, smartGuide));\n  elementsRef.candidatesElement.addEventListener('click', evt => clickCandidate(evt, editor, smartGuide));\n  elementsRef.ellipsisElement.addEventListener('click', evt => showActions(evt, elementsRef));\n  elementsRef.copyElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none';\n  });\n  elementsRef.convertElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none';\n    editor.convert();\n  });\n  elementsRef.deleteElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none';\n    editor.clear();\n  });\n}\n\n/**\n * Call mutation observer to trigger fade out animation.\n * @param {number} [duration=10000] - the duration in milliseconds before calling the fade out animation.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction callFadeOutObserver(duration = 10000, smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n  // eslint-disable-next-line no-undef\n  const observer = new MutationObserver((mutations) => {\n    mutations.forEach(() => {\n      if (smartGuideRef.smartGuideTimeOutId) {\n        clearTimeout(smartGuideRef.smartGuideTimeOutId);\n      }\n      if (elementsRef.candidatesElement.style.display === 'none' && elementsRef.menuElement.style.display === 'none') {\n        smartGuideRef.smartGuideTimeOutId = setTimeout(() => {\n          elementsRef.smartGuideElement.classList.add('smartguide-out');\n          elementsRef.smartGuideElement.classList.remove('smartguide-in');\n        }, duration);\n      } else if (!document.contains(elementsRef.candidatesElement) && !document.contains(elementsRef.menuElement)) {\n        smartGuideRef.smartGuideTimeOutId = setTimeout(() => {\n          elementsRef.smartGuideElement.classList.add('smartguide-out');\n          elementsRef.smartGuideElement.classList.remove('smartguide-in');\n        }, duration);\n      }\n    });\n  });\n  observer.observe(elementsRef.smartGuideElement, { childList: true, subtree: true, attributes: true });\n}\n\n/**\n * Create a new smart guide\n * @param {Editor} editor - A reference to the editor.\n * @returns {SmartGuide} New smart guide\n */\nexport function createSmartGuide(editor) {\n  const randomString = '-' + Math.random().toString(10).substring(2, 12);\n  const elements = createHTMLElements(randomString);\n\n  /**\n   * Clipboard from clipboard.js used to get copy across all browsers.\n   * @type {Clipboard}\n   */\n  const clipboard = new Clipboard(elements.copyElement);\n  const perfectScrollbar = new PerfectScrollbar(elements.textContainer, { suppressScrollY: true, scrollXMarginOffset: 1 });\n\n  const smartGuide = {\n    editor,\n    wordToChange: '',\n    lastWord: '',\n    previousLabelExport: ' ',\n    perfectScrollbar,\n    elements,\n    smartGuideTimeOutId: 0,\n    randomString\n  };\n  addListeners(editor, smartGuide);\n\n  if (editor.configuration.recognitionParams.v4.text.smartGuideFadeOut.enable) {\n    callFadeOutObserver(editor.configuration.recognitionParams.v4.text.smartGuideFadeOut.duration, smartGuide);\n  }\n\n  return smartGuide;\n}\n\nexport function resize(smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n\n  const mmToPixels = 3.779527559;\n  let left = smartGuideRef.editor.configuration.recognitionParams.v4.text.margin.left * mmToPixels;\n\n  const maxWidthTextContainer = smartGuideRef.editor.domElement.clientWidth - left - elementsRef.tagElement.offsetWidth - 35 - left;\n\n  // Assign a max width to the smartguide based on the editor width, the left position and a small margin for the ellipsis (48px)\n  elementsRef.textContainer.style.width = `${maxWidthTextContainer}px`;\n  elementsRef.textContainer.style.maxWidth = `${maxWidthTextContainer}px`;\n\n  left = elementsRef.tagElement.offsetWidth;\n  left += maxWidthTextContainer;\n  elementsRef.ellipsisElement.style.left = `${left}px`;\n\n  elementsRef.smartGuideElement.style.width = `${elementsRef.tagElement.offsetWidth + elementsRef.textContainer.offsetWidth + elementsRef.ellipsisElement.offsetWidth}px`;\n  smartGuideRef.perfectScrollbar.update();\n}\n\n/**\n * Insert the smart guide HTML elements in the DOM.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nexport function insertSmartGuide(smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n\n  const insertSmartGuideElement = (left, top) => {\n    elementsRef.smartGuideElement.style.top = `${top}px`;\n    elementsRef.smartGuideElement.style.left = `${left}px`;\n    elementsRef.smartGuideElement.style.visibility = 'hidden';\n\n    const parent = smartGuideRef.editor.domElement;\n    parent.insertBefore(elementsRef.smartGuideElement, smartGuideRef.editor.loader);\n  };\n  const insertTag = () => {\n    elementsRef.smartGuideElement.appendChild(elementsRef.tagElement);\n  };\n  const insertTextContainer = (left, maxWidth) => {\n    elementsRef.textContainer.style.left = `${left}px`;\n\n    // Assign a max width to the smartguide based on the editor width, the left position and a small margin for the ellipsis (48px)\n    elementsRef.textContainer.style.width = `${maxWidth}px`;\n    elementsRef.textContainer.style.maxWidth = `${maxWidth}px`;\n\n    elementsRef.smartGuideElement.appendChild(elementsRef.textContainer);\n  };\n  const insertEllipsis = (left) => {\n    elementsRef.ellipsisElement.style.left = `${left}px`;\n\n    elementsRef.smartGuideElement.appendChild(elementsRef.ellipsisElement);\n  };\n\n\n  // FIXME Use value from contentChanged when available\n\n  const mmToPixels = 3.779527559;\n\n  const marginTop = smartGuideRef.editor.configuration.recognitionParams.v4.text.margin.top * mmToPixels;\n  const marginLeft = smartGuideRef.editor.configuration.recognitionParams.v4.text.margin.left * mmToPixels;\n\n  // 12 is the space between line in mm\n  const top = marginTop - (12 * mmToPixels);\n  let left = marginLeft;\n\n  insertSmartGuideElement(left, top);\n  insertTag();\n\n  // 35 is the ellipsis element width\n  const maxWidthTextContainer = smartGuideRef.editor.domElement.clientWidth - left - elementsRef.tagElement.offsetWidth - 35 - left;\n  left = elementsRef.tagElement.offsetWidth;\n  insertTextContainer(left, maxWidthTextContainer);\n\n  left += maxWidthTextContainer;\n  insertEllipsis(left);\n\n  elementsRef.menuElement.style.display = 'none';\n  elementsRef.menuElement.appendChild(elementsRef.convertElement);\n  elementsRef.menuElement.appendChild(elementsRef.copyElement);\n  elementsRef.menuElement.appendChild(elementsRef.deleteElement);\n  elementsRef.smartGuideElement.appendChild(elementsRef.menuElement);\n\n  elementsRef.candidatesElement.style.display = 'none';\n  elementsRef.smartGuideElement.appendChild(elementsRef.candidatesElement);\n\n  // 48px as set in css\n  elementsRef.smartGuideElement.style.height = '48px';\n  elementsRef.smartGuideElement.style.width = `${elementsRef.tagElement.offsetWidth + elementsRef.textContainer.offsetWidth + elementsRef.ellipsisElement.offsetWidth}px`;\n  smartGuideRef.perfectScrollbar.update();\n}\n\n/**\n * Launch the smartguide.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n * @param {Object} exports -  The export from the editor.\n */\nexport function launchSmartGuide(smartGuide, exports) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n\n  const isSmartGuideInDocument = document.contains(elementsRef.smartGuideElement);\n\n  if (!isInShadow(elementsRef.smartGuideElement) && !isSmartGuideInDocument) {\n    insertSmartGuide(smartGuide);\n  }\n\n  const addAnimationToModifiedWord = (words) => {\n    if (smartGuideRef.tempWords && smartGuideRef.tempWords.length === words.length) {\n      const labelWordsArray = words.map(word => word.label);\n      const tempLabelWordsArray = smartGuideRef.tempWords.map(word => word.label);\n      const wordChangedId = labelWordsArray.indexOf(labelWordsArray.filter(a => tempLabelWordsArray.indexOf(a) === -1)[0]);\n      if (document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`) && wordChangedId > -1) {\n        document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`).classList.add('modified-word');\n        elementsRef.textContainer.scrollLeft = document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`).offsetLeft - 10;\n      }\n    }\n    smartGuideRef.tempWords = JSON.parse(exports[Constants.Exports.JIIX]).words;\n  };\n\n  const createWordSpan = (empty, index, word) => {\n    const span = document.createElement('span');\n    span.id = `word-${index}${smartGuide.randomString}`;\n    if (empty) {\n      span.innerHTML = '&nbsp;';\n    } else {\n      span.textContent = word.label;\n    }\n    return span;\n  };\n\n  // Possible optimisation ? Check if we can find a way to not repopulate the smartguide every time even if we now use Document fragment\n  const populatePrompter = (words) => {\n    elementsRef.textElement.innerHTML = '';\n    // We use a DocumentFragment to reflow the DOM only one time as it is not part of the DOM\n    const myFragment = document.createDocumentFragment();\n    words.forEach((word, index) => {\n      if (word.label === ' ' || word.label.includes('\\n')) {\n        myFragment.appendChild(createWordSpan(true, index));\n      } else if (index !== words.length - 1) {\n        myFragment.appendChild(createWordSpan(false, index, word));\n      } else {\n        elementsRef.textElement.appendChild(myFragment);\n        smartGuideRef.perfectScrollbar.update();\n        if (smartGuideRef.lastWord === '') {\n          smartGuideRef.lastWord = word;\n        }\n        const span = createWordSpan(false, index, word);\n        // This is used to scroll to last word if last word is modified\n        if ((smartGuideRef.lastWord.candidates !== word.candidates) && (smartGuideRef.lastWord.label !== word.label)) {\n          span.classList.add('added-word');\n          elementsRef.textElement.appendChild(span);\n          elementsRef.textContainer.scrollLeft = span.offsetLeft;\n          smartGuideRef.lastWord = word;\n        } else {\n          elementsRef.textElement.appendChild(span);\n          elementsRef.textContainer.scrollLeft = span.offsetLeft;\n        }\n      }\n    });\n  };\n\n  if (exports && JSON.parse(exports[Constants.Exports.JIIX]).words.length > 0) {\n    elementsRef.smartGuideElement.classList.add('smartguide-in');\n    elementsRef.smartGuideElement.classList.remove('smartguide-out');\n    elementsRef.candidatesElement.style.display = 'none';\n    elementsRef.menuElement.style.display = 'none';\n    if (smartGuideRef.previousLabelExport && smartGuideRef.previousLabelExport !== JSON.parse(exports[Constants.Exports.JIIX]).label) {\n      const words = JSON.parse(exports[Constants.Exports.JIIX]).words;\n      populatePrompter(words);\n      addAnimationToModifiedWord(words);\n    }\n    smartGuideRef.previousLabelExport = JSON.parse(exports[Constants.Exports.JIIX]).label;\n    // This is required by clipboard.js to get the text to be copied.\n    elementsRef.copyElement.setAttribute('data-clipboard-text', JSON.parse(exports[Constants.Exports.JIIX]).label);\n  } else {\n    elementsRef.smartGuideElement.classList.add('smartguide-out');\n    elementsRef.smartGuideElement.classList.remove('smartguide-in');\n  }\n\n  return smartGuideRef;\n}\n","/* eslint-disable no-undef */\nimport { editorLogger as logger } from '../configuration/LoggerConfig';\nimport * as InkModel from '../model/InkModel';\n\n/**\n * Function to copy past to inject ink during tutorial.\n * @param editorParam\n * @param strokes\n * @param delayBetweenStrokes\n * @param lastOneDelay\n */\nexport function inkImporter(editorParam, strokes, delayBetweenStrokes, lastOneDelay) {\n  const editor = editorParam;\n  logger.debug('inkImporter start importing =>', strokes);\n  const origGrabber = Object.assign({}, editor.behavior.grabber);\n  origGrabber.detach = editor.behavior.grabber.detach;\n  editor.behavior.grabber = {};\n  const actions = [];\n  strokes.forEach((stroke) => {\n    if (stroke.convert) {\n      actions.push({ action: 'convert', value: true });\n    } else if (stroke.setDelay) {\n      actions.push({ action: 'setDelay', value: stroke.setDelay });\n    } else {\n      if (stroke.color) {\n        actions.push({ action: 'setColor', value: stroke.color });\n      }\n      stroke.X.forEach((x, idx) => {\n        let action = 'move';\n        if (idx === 0) {\n          action = 'down';\n        } else if (idx === (stroke.X.length - 1)) {\n          action = 'up';\n        }\n        actions.push({ action, point: { x: stroke.X[idx], y: stroke.Y[idx] } });\n      });\n    }\n  });\n  logger.debug('Array of actions =>', actions);\n  const play = (actionsArray, position, delay) => {\n    if (position < actionsArray.length) {\n      const currentAction = actionsArray[position];\n      let nextDelay = delay;\n      if (currentAction.action === 'convert') {\n        editor.convert();\n      } else if (currentAction.action === 'setDelay') {\n        nextDelay = currentAction.value;\n      } else if (currentAction.action === 'setColor') {\n        editor.penStyle = {\n          color: currentAction.value,\n        };\n      } else {\n        currentAction.point.t = new Date().getTime();\n        if (currentAction.action === 'down') {\n          editor.pointerDown(currentAction.point);\n        } else if (currentAction.action === 'up') {\n          editor.pointerUp(currentAction.point);\n        } else if (currentAction.action === 'move') {\n          editor.pointerMove(currentAction.point);\n        }\n      } if (lastOneDelay && position === actionsArray.map(x => x.action).lastIndexOf('down') - 1) {\n        setTimeout(() => {\n          play(actionsArray, position + 1, nextDelay);\n        }, lastOneDelay);\n      } else if (position === actionsArray.length - 1) {\n        const event = new Event('drawEnded');\n        document.dispatchEvent(event);\n        editor.behavior.grabber = origGrabber;\n      } else {\n        setTimeout(() => {\n          play(actionsArray, position + 1, nextDelay);\n        }, nextDelay);\n      }\n    }\n  };\n  play(actions, 0, delayBetweenStrokes);\n}\n\n\nexport function importStrokeGroups(editorParam, strokeGroups) {\n  strokeGroups.forEach((group) => {\n    group.strokes.forEach((strokeFromGroup) => {\n      InkModel.addStroke(editorParam.model, strokeFromGroup);\n      InkModel.addStrokeToGroup(editorParam.model, strokeFromGroup, group.penStyle);\n    });\n  });\n  editorParam.renderer.drawModel(editorParam.rendererContext, editorParam.model, editorParam.stroker);\n}\n","/* eslint-disable no-underscore-dangle */\nimport { editorLogger as logger } from './configuration/LoggerConfig';\nimport * as DefaultBehaviors from './configuration/DefaultBehaviors';\nimport * as DefaultConfiguration from './configuration/DefaultConfiguration';\nimport * as DefaultStyles from './configuration/DefaultPenStyle';\nimport * as DefaultTheme from './configuration/DefaultTheme';\nimport * as InkModel from './model/InkModel';\nimport * as UndoRedoContext from './model/UndoRedoContext';\nimport * as UndoRedoManager from './model/UndoRedoManager';\nimport * as ModelStats from './util/ModelStats';\nimport * as ImageRenderer from './renderer/canvas/ImageRenderer';\nimport * as RecognizerContext from './model/RecognizerContext';\nimport * as SmartGuide from './smartguide/SmartGuide';\nimport Constants from './configuration/Constants';\nimport * as eastereggs from './eastereggs/InkImporter';\n\n\n/**\n * Trigger callbacks\n * @param {Editor} editor\n * @param {Object} data\n * @param {...String} types\n * @return {Model}\n */\nfunction triggerCallbacks(editor, data, ...types) {\n  const editorRef = editor;\n  types.forEach((type) => {\n    switch (type) {\n      case Constants.EventType.RENDERED:\n        break; // Internal use only\n      case Constants.EventType.UNDO:\n      case Constants.EventType.REDO:\n      case Constants.EventType.CLEAR:\n      case Constants.EventType.CONVERT:\n      case Constants.EventType.EXPORT:\n        editor.callbacks.forEach(callback => callback.call(editor.domElement, type));\n        break;\n      case Constants.EventType.LOADED:\n      case Constants.EventType.CHANGED:\n        editor.callbacks.forEach(callback => callback.call(editor.domElement, type, {\n          initialized: editor.initialized,\n          canUndo: editor.canUndo,\n          canRedo: editor.canRedo,\n          canClear: editor.canClear,\n          isEmpty: editor.isEmpty,\n          possibleUndoCount: editor.possibleUndoCount,\n          undoStackIndex: editor.undoStackIndex,\n          canConvert: editor.canConvert,\n          canExport: editor.canExport\n        }));\n        break;\n      case Constants.EventType.EXPORTED:\n        window.clearTimeout(editorRef.notifyTimer);\n        editorRef.notifyTimer = window.setTimeout(() => {\n          editor.callbacks.forEach(callback => callback.call(editor.domElement, type, {\n            exports: editor.exports\n          }));\n        }, editorRef.configuration.processDelay);\n        break;\n      case Constants.EventType.SUPPORTED_IMPORT_MIMETYPES:\n        editor.callbacks.forEach(callback => callback.call(editor.domElement, type, {\n          mimeTypes: editor.supportedImportMimeTypes\n        }));\n        break;\n      case Constants.EventType.ERROR:\n        editor.callbacks.forEach(callback => callback.call(editor.domElement, type, data));\n        break;\n      case Constants.EventType.IDLE:\n        editor.callbacks.forEach(callback => callback.call(editor.domElement, type, {\n          idle: editor.idle\n        }));\n        break;\n      default:\n        logger.debug(`No valid trigger configured for ${type}`);\n        break;\n    }\n  });\n}\n\n/**\n * Check if a clear is required, and does it if it is\n * @param {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} resetFunc\n * @param {function(recognizerContext: RecognizerContext, model: Model, callback: RecognizerCallback)} func\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nfunction manageResetState(resetFunc, func, recognizerContext, model, callback, ...params) {\n  // If strokes moved in the undo redo stack then a clear is mandatory before sending strokes.\n  if (resetFunc && RecognizerContext.isResetRequired(recognizerContext, model)) {\n    logger.debug('Reset is needed');\n    resetFunc(recognizerContext, model, (err, resetedModel, ...types) => {\n      if (err) {\n        callback(err, resetedModel, ...types);\n      } else {\n        func(recognizerContext, resetedModel, callback, ...params);\n      }\n    });\n  } else {\n    func(recognizerContext, model, callback, ...params);\n  }\n}\n\n/**\n * Check if the trigger in parameter is valid.\n * @param {Editor} editor\n * @param {String} type\n * @param {String} [trigger]\n * @return {Boolean}\n */\nfunction isTriggerValid(editor, type, trigger = editor.configuration.triggers[type]) {\n  if (editor.recognizer &&\n    editor.recognizer.getInfo().availableTriggers[type].includes(trigger)) {\n    return true;\n  }\n  logger.error(`${trigger} is not a valid trigger for ${type}`);\n  return false;\n}\n\n/**\n * Manage recognized model\n * @param {Editor} editor\n * @param {Model} model\n * @param {...String} types\n */\nfunction manageRecognizedModel(editor, model, ...types) {\n  const editorRef = editor;\n  const modelRef = model;\n  logger.debug(`model changed callback on ${types} event(s)`, model);\n  if (modelRef.creationTime === editor.model.creationTime) {\n    // Merge recognized model if relevant and return current editor model\n    if ((modelRef.rawStrokes.length === editor.model.rawStrokes.length) &&\n      (modelRef.lastPositions.lastSentPosition >= editor.model.lastPositions.lastReceivedPosition)) {\n      editorRef.model = InkModel.mergeModels(editorRef.model, modelRef);\n      if (InkModel.needRedraw(editorRef.model) || types.includes(Constants.EventType.RENDERED)) {\n        editor.renderer.drawModel(editor.rendererContext, editorRef.model, editor.stroker);\n      }\n    } else {\n      editorRef.model = modelRef;\n      editor.renderer.drawModel(editor.rendererContext, editorRef.model, editor.stroker);\n    }\n    triggerCallbacks(editor, undefined, ...types);\n  }\n\n  if (editor.configuration.recognitionParams.type === 'TEXT'\n    && editor.configuration.recognitionParams.apiVersion === 'V4'\n    && editor.configuration.recognitionParams.protocol !== 'REST'\n    && editor.configuration.recognitionParams.v4.text.mimeTypes.includes(Constants.Exports.JIIX)\n    && editor.configuration.recognitionParams.v4.text.smartGuide) {\n    // eslint-disable-next-line no-use-before-define\n    launchSmartGuide(editorRef, modelRef.exports);\n  }\n\n  if ((InkModel.extractPendingStrokes(model).length > 0) &&\n    (!editor.recognizer.addStrokes) && // FIXME: Ugly hack to avoid double export (addStrokes + export)\n    (editor.configuration.triggers.exportContent !== Constants.Trigger.DEMAND)) {\n    /* eslint-disable no-use-before-define */\n    launchExport(editor, model);\n    /* eslint-enable no-use-before-define */\n  }\n}\n\n/**\n * Recognizer callback\n * @param {Editor} editor\n * @param {Object} error\n * @param {Model} model\n * @param {...String} events\n */\nfunction recognizerCallback(editor, error, model, ...events) {\n  const editorRef = editor;\n\n  const handleResult = (err, res, ...types) => {\n    if (err) {\n      if (err.type !== 'close') {\n        logger.error('Error while firing the recognition', err.stack || err); // Handle any error from all above steps\n      }\n      if (\n        // IInk error managment before refactor\n        (err.message === 'Invalid application key.') || (err.message === 'Invalid HMAC') ||\n        // CDK error managment\n        (err.error &&\n          err.error.result &&\n          err.error.result.error &&\n          (err.error.result.error === 'InvalidApplicationKeyException' || err.error.result.error === 'InvalidHMACSignatureException')) ||\n        // IInk error managment after refactor\n        (err.code && err.code === 'access.not.granted')) {\n        editorRef.error.innerText = Constants.Error.WRONG_CREDENTIALS;\n      } else if (err.message === 'Session is too old. Max Session Duration Reached' ||\n        (err.code && err.code === 'session.too.old')) {\n        editorRef.error.innerText = Constants.Error.TOO_OLD;\n      } else if ((err.message || err.code === 1006) && editorRef.error.style.display === 'none') {\n        editorRef.error.innerText = Constants.Error.NOT_REACHABLE;\n      }\n      if ((editorRef.error.innerText === Constants.Error.TOO_OLD || err.code === 1000 || err.reason === 'CLOSE_RECOGNIZER') && RecognizerContext.canReconnect(editor.recognizerContext)) {\n        logger.info('Reconnection is available', err.stack || err);\n        editorRef.error.style.display = 'none';\n      } else {\n        editorRef.error.style.display = 'initial';\n        triggerCallbacks(editor, err, Constants.EventType.ERROR, ...types);\n      }\n    } else {\n      manageRecognizedModel(editorRef, res, ...[...events, ...types].filter((el, i, a) => i === a.indexOf(el))); // Remove duplicate events\n    }\n  };\n\n  logger.debug('recognition callback');\n  if (editor.undoRedoManager.updateModel && !error) {\n    editor.undoRedoManager.updateModel(editor.undoRedoContext, model, handleResult);\n  } else {\n    handleResult(error, model, ...events);\n  }\n}\n\n/**\n * Launch the recognition with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} [trigger]\n */\nfunction addStrokes(editor, model, trigger = editor.configuration.triggers.addStrokes) {\n  if (editor.recognizer && editor.recognizer.addStrokes) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        // Firing addStrokes only if recognizer is configure to do it\n        if (isTriggerValid(editor, 'addStrokes', trigger)) {\n          manageResetState(editor.recognizer.reset, editor.recognizer.addStrokes, editor.recognizerContext, model, (err, res, ...types) => {\n            recognizerCallback(editor, err, res, ...types);\n          });\n        }\n      });\n  }\n}\n\n/**\n * Launch smartguide.\n * @param {Editor} editor\n * @param {Object} exports\n */\nfunction launchSmartGuide(editor, exports) {\n  const editorRef = editor;\n  editorRef.smartGuide = SmartGuide.launchSmartGuide(editor.smartGuide, exports);\n}\n\n/**\n * Launch ink import.\n * @param {Editor} editor\n * @param {Model} model\n * @param {PointerEvents} events\n */\nfunction launchPointerEvents(editor, model, events) {\n  if (editor.recognizer && editor.recognizer.pointerEvents) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.pointerEvents(editor.recognizerContext, model, events, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        });\n      });\n  }\n}\n\n/**\n * Launch the recognition with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} [requestedMimeTypes]\n * @param {String} [trigger]\n */\nfunction launchExport(editor, model, requestedMimeTypes, trigger = editor.configuration.triggers.exportContent) {\n  if (editor.recognizer && editor.recognizer.export_) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        // Firing export only if recognizer is configure to do it\n        if (isTriggerValid(editor, 'exportContent', trigger)) {\n          const editorRef = editor;\n          window.clearTimeout(editor.exportTimer);\n          editorRef.exportTimer = window.setTimeout(() => {\n            manageResetState(editor.recognizer.reset, editor.recognizer.export_, editor.recognizerContext, model, (err, res, ...types) => {\n              recognizerCallback(editor, err, res, ...types);\n            }, requestedMimeTypes);\n          }, trigger === Constants.Trigger.QUIET_PERIOD ? editor.configuration.triggerDelay : 0);\n        }\n      });\n  }\n}\n\n/**\n * Launch the import.\n * @param {Editor} editor\n * @param {Model} model\n * @param {Blob} data\n */\nfunction launchImport(editor, model, data) {\n  if (editor.recognizer && editor.recognizer.import_) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.import_(editor.recognizerContext, model, data, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        });\n      });\n  }\n}\n\nfunction launchGetSupportedImportMimeTypes(editor, model) {\n  if (editor.recognizer && editor.recognizer.getSupportedImportMimeTypes) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.getSupportedImportMimeTypes(editor.recognizerContext, model, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        });\n      });\n  }\n}\n\n/**\n * Launch the convert with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} conversionState\n */\nfunction launchConvert(editor, model, conversionState) {\n  if (editor.recognizer && editor.recognizer.convert) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.convert(editor.recognizerContext, model, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        }, conversionState);\n      });\n  }\n}\n\nfunction launchConfig(editor, model) {\n  if (editor.recognizer && editor.recognizer.sendConfiguration) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.sendConfiguration(editor.recognizerContext, model, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        });\n      });\n  }\n}\n\n/**\n * Launch the resize.\n * @param {Editor} editor\n * @param {Model} model\n */\nfunction launchResize(editor, model) {\n  if (editor.recognizer && editor.recognizer.resize) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        const editorRef = editor;\n        window.clearTimeout(editor.resizeTimer);\n        editorRef.resizeTimer = window.setTimeout(() => {\n          editor.recognizer.resize(editor.recognizerContext, model, (err, res, ...types) => {\n            recognizerCallback(editor, err, res, ...types);\n          }, editor.domElement);\n        }, editor.configuration.resizeTriggerDelay);\n      });\n    SmartGuide.resize(editor.smartGuide);\n  }\n}\n\n/**\n * Launch wait for idle\n * @param {Editor} editor\n * @param {Model} model\n */\nfunction launchWaitForIdle(editor, model) {\n  if (editor.recognizer && editor.recognizer.waitForIdle) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.waitForIdle(editor.recognizerContext, model, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        });\n      });\n  }\n}\n\n/**\n * Set pen style.\n * @param {Editor} editor\n * @param {Model} model\n */\nfunction setPenStyle(editor, model) {\n  if (editor.recognizer && editor.recognizer.setPenStyle) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.setPenStyle(editor.recognizerContext, model, editor.penStyle, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        });\n      });\n  }\n}\n\n/**\n * Set pen style.\n * @param {Editor} editor\n * @param {Model} model\n */\nfunction setPenStyleClasses(editor, model) {\n  if (editor.recognizer && editor.recognizer.setPenStyleClasses) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.setPenStyleClasses(editor.recognizerContext, model, editor.penStyleClasses, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        });\n      });\n  }\n}\n\n/**\n * Set theme.\n * @param {Editor} editor\n * @param {Model} model\n */\nfunction setTheme(editor, model) {\n  if (editor.recognizer && editor.recognizer.setTheme) {\n    editor.recognizerContext.initPromise\n      .then(() => {\n        editor.recognizer.setTheme(editor.recognizerContext, model, editor.theme, (err, res, ...types) => {\n          recognizerCallback(editor, err, res, ...types);\n        });\n      });\n  }\n}\n\n/**\n * Editor\n */\nexport class Editor {\n  /**\n   * @param {Element} element DOM element to attach this editor\n   * @param {Configuration} [configuration] Configuration to apply\n   * @param {Theme} [theme] Custom theme to apply\n   * @param {PenStyle} [penStyle] Custom style to apply\n   * @param {Behaviors} [behaviors] Custom behaviors to apply\n   */\n  constructor(element, configuration, penStyle, theme, behaviors) {\n    /**\n     * Inner reference to the DOM Element\n     * @type {Element}\n     */\n    this.domElement = element;\n    this.domElement.classList.add('ms-editor');\n\n    // eslint-disable-next-line no-undef\n    this.loader = document.createElement('div');\n    this.loader.classList.add('loader');\n    this.loader = this.domElement.appendChild(this.loader);\n\n    // eslint-disable-next-line no-undef\n    this.error = document.createElement('div');\n    this.error.classList.add('error-msg');\n    this.error = this.domElement.appendChild(this.error);\n\n    /**\n     * Launch export timer\n     * @type {Number}\n     */\n    this.exportTimer = undefined;\n\n    /**\n     * Launch resize timer\n     * @type {Number}\n     */\n    this.resizeTimer = undefined;\n\n    /**\n     * Notify delay timer\n     * @type {Number}\n     */\n    this.notifyTimer = undefined;\n\n\n    /**\n     * @private\n     * @type {Behaviors}\n     */\n    this.innerBehaviors = DefaultBehaviors.overrideDefaultBehaviors(behaviors);\n    this.configuration = configuration;\n    this.smartGuide = SmartGuide.createSmartGuide(this);\n\n    /**\n     * Pen color used only for pending stroke\n     * @type {string}\n     */\n    this.localTheme = '';\n\n    this.theme = theme;\n    this.penStyle = penStyle;\n    this.penStyleClasses = '';\n\n    this.domElement.editor = this;\n  }\n\n  /**\n   * Set the recognition parameters\n   * WARNING : Need to fire a clear if user have already input some strokes.\n   * @param {Configuration} configuration\n   */\n  set configuration(configuration) {\n    this.loader.style.display = 'initial';\n    this.error.style.display = 'none';\n    /**\n     * @private\n     * @type {Configuration}\n     */\n    this.innerConfiguration = DefaultConfiguration.overrideDefaultConfiguration(configuration);\n    this.setThemeForFont(this.innerConfiguration.recognitionParams.v4.lang);\n    this.behavior = this.behaviors.getBehaviorFromConfiguration(this.behaviors, this.innerConfiguration);\n  }\n\n  /**\n   * Get the current recognition parameters\n   * @return {Configuration}\n   */\n  get configuration() {\n    return this.innerConfiguration;\n  }\n\n  /**\n   * Set the pen style\n   * @param {PenStyle} penStyle\n   */\n  set penStyle(penStyle) {\n    /**\n     * @private\n     * @type {PenStyle}\n     */\n    this.innerPenStyle = DefaultStyles.overrideDefaultPenStyle(penStyle);\n    this.localPenStyle = this.innerPenStyle;\n    setPenStyle(this, this.model);\n  }\n\n  /**\n   * Get the pen style\n   * @return {PenStyle}\n   */\n  get penStyle() {\n    return this.innerPenStyle;\n  }\n\n  /**\n   * Set the pen style\n   * @param {String} penStyleClasses\n   */\n  set penStyleClasses(penStyleClasses) {\n    /**\n     * @private\n     * @type {String}\n     */\n    this.innerPenStyleClasses = penStyleClasses;\n    this.localPenStyle = this.theme[`.${this.innerPenStyleClasses}`];\n    setPenStyleClasses(this, this.model);\n  }\n\n  /**\n   * Get the pen style\n   * @return {String}\n   */\n  get penStyleClasses() {\n    return this.innerPenStyleClasses;\n  }\n\n  /**\n   * Set the theme\n   * @param {Theme} theme\n   */\n  set theme(theme) {\n    /**\n     * @private\n     * @type {Theme}\n     */\n    this.innerTheme = DefaultTheme.overrideDefaultTheme(theme);\n    setTheme(this, this.model);\n  }\n\n  /**\n   * Get the theme\n   * @return {Theme}\n   */\n  get theme() {\n    return this.innerTheme;\n  }\n\n  /**\n   * Get behaviors\n   * @return {Behaviors}\n   */\n  get behaviors() {\n    return this.innerBehaviors;\n  }\n\n  /**\n   * @private\n   * @param {Behavior} behavior\n   */\n  set behavior(behavior) {\n    if (behavior) {\n      if (this.grabber) { // Remove event handlers to avoid multiplication (detach grabber)\n        this.grabber.detach(this.domElement, this.grabberContext);\n      }\n      /**\n       * @private\n       * @type {Behavior}\n       */\n      this.innerBehavior = behavior;\n      this.renderer = this.innerBehavior.renderer;\n      this.recognizer = this.innerBehavior.recognizer;\n      /**\n       * Current grabber context\n       * @type {GrabberContext}\n       */\n      this.grabberContext = this.grabber.attach(this.domElement, this);\n    }\n  }\n\n  /**\n   * Get current behavior\n   * @return {Behavior}\n   */\n  get behavior() {\n    return this.innerBehavior;\n  }\n\n  /**\n   * Set the current recognizer\n   * @private\n   * @param {Recognizer} recognizer\n   */\n  set recognizer(recognizer) {\n    this.undoRedoContext = UndoRedoContext.createUndoRedoContext(this.configuration);\n    this.undoRedoManager = UndoRedoManager;\n\n    const initialize = (model) => {\n      /**\n       * @private\n       * @type {Recognizer}\n       */\n      this.innerRecognizer = recognizer;\n      if (this.innerRecognizer) {\n        /**\n         * Current recognition context\n         * @type {RecognizerContext}\n         */\n        this.recognizerContext = RecognizerContext.createEmptyRecognizerContext(this);\n        // FIXME: merge undo/redo manager with default recognizer\n        if (this.innerRecognizer.undo && this.innerRecognizer.redo && this.innerRecognizer.clear) {\n          this.undoRedoContext = this.recognizerContext;\n          this.undoRedoManager = this.innerRecognizer;\n        }\n\n        this.innerRecognizer.init(this.recognizerContext, model, (err, res, ...types) => {\n          logger.debug('Recognizer initialized', res);\n          this.loader.style.display = 'none';\n          recognizerCallback(this, err, res, ...types);\n        });\n      }\n    };\n\n    if (recognizer) {\n      if (this.innerRecognizer) {\n        this.innerRecognizer.close(this.recognizerContext, this.model, (err, res, ...types) => {\n          logger.info('Recognizer closed');\n          recognizerCallback(this, err, res, ...types);\n          initialize(InkModel.clearModel(res));\n        });\n      } else {\n        /**\n         * Current model\n         * @type {Model}\n         */\n        this.model = InkModel.createModel(this.configuration);\n\n        // INFO: Recognizer needs model to be initialized\n        initialize(this.model);\n      }\n    }\n  }\n\n  /**\n   * Get current recognizer\n   * @return {Recognizer}\n   */\n  get recognizer() {\n    return this.innerRecognizer;\n  }\n\n  /**\n   * Set the current renderer\n   * @private\n   * @param {Renderer} renderer\n   */\n  set renderer(renderer) {\n    if (renderer) {\n      if (this.innerRenderer) {\n        this.innerRenderer.detach(this.domElement, this.rendererContext);\n      }\n\n      /**\n       * @private\n       * @type {Renderer}\n       */\n      this.innerRenderer = renderer;\n      if (this.innerRenderer) {\n        /**\n         * Current rendering context\n         * @type {Object}\n         */\n        this.rendererContext = this.innerRenderer.attach(this.domElement, this.configuration.renderingParams.minHeight, this.configuration.renderingParams.minWidth);\n      }\n    }\n  }\n\n  /**\n   * Get current renderer\n   * @return {Renderer}\n   */\n  get renderer() {\n    return this.innerRenderer;\n  }\n\n  /**\n   * Get current grabber\n   * @return {Grabber}\n   */\n  get grabber() {\n    return this.behavior ? this.behavior.grabber : undefined;\n  }\n\n  /**\n   * Get current stroker\n   * @return {Stroker}\n   */\n  get stroker() {\n    return this.behavior ? this.behavior.stroker : undefined;\n  }\n\n  /**\n   * Get current callbacks\n   * @return {Array}\n   */\n  get callbacks() {\n    return this.behavior ? this.behavior.callbacks : undefined;\n  }\n\n  /**\n   * Get a PNG image data url from the data model\n   * @return {String}\n   */\n  get png() {\n    return ImageRenderer.getImage(this.model, this.stroker);\n  }\n\n  /**\n   * Get statistics to monitor what ink size is send to the server.\n   * @return {Stats}\n   */\n  getStats() {\n    return ModelStats.computeStats(this.model);\n  }\n\n  /**\n   * True if initialized, false otherwise\n   * @return {Boolean}\n   */\n  get initialized() {\n    return this.recognizerContext ? this.recognizerContext.initialized : false;\n  }\n\n  /**\n   * Handle a pointer down\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   * @param {String} [pointerType=mouse] Current pointer type\n   * @param {String} [pointerId] Current pointer id\n   */\n  pointerDown(point, pointerType = 'pen', pointerId) {\n    logger.trace('Pointer down', point);\n    window.clearTimeout(this.notifyTimer);\n    window.clearTimeout(this.exportTimer);\n    this.model = InkModel.initPendingStroke(this.model, point, Object.assign({ pointerType, pointerId }, this.theme.ink, this.localPenStyle));\n    this.renderer.drawCurrentStroke(this.rendererContext, this.model, this.stroker);\n    // Currently no recognition on pointer down\n  }\n\n  /**\n   * Handle a pointer move\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   */\n  pointerMove(point) {\n    logger.trace('Pointer move', point);\n    this.model = InkModel.appendToPendingStroke(this.model, point);\n    this.renderer.drawCurrentStroke(this.rendererContext, this.model, this.stroker);\n    // Currently no recognition on pointer move\n  }\n\n  /**\n   * Handle a pointer up\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   */\n  pointerUp(point) {\n    logger.trace('Pointer up', point);\n    this.model = InkModel.endPendingStroke(this.model, point, this.penStyle);\n    this.renderer.drawModel(this.rendererContext, this.model, this.stroker);\n\n    if (this.recognizer.addStrokes) {\n      addStrokes(this, this.model);\n    } else {\n      // Push model in undo redo manager\n      recognizerCallback(this, undefined, this.model);\n    }\n  }\n\n  removeStroke(stroke) {\n    this.model.strokeGroups.forEach((group) => {\n      const stringStrokes = group.strokes.map(strokeFromGroup => JSON.stringify(strokeFromGroup));\n      const strokeIndex = stringStrokes.indexOf(JSON.stringify(stroke));\n      if (strokeIndex !== -1) {\n        group.strokes.splice(strokeIndex, 1);\n      }\n    });\n    const stringRawStrokes = this.model.rawStrokes.map(strokes => JSON.stringify(strokes));\n    const strokeIndex = stringRawStrokes.indexOf(JSON.stringify(stroke));\n    if (strokeIndex !== -1) {\n      this.model.rawStrokes.splice(strokeIndex, 1);\n    }\n    this.renderer.drawModel(this.rendererContext, this.model, this.stroker);\n    recognizerCallback(this, undefined, this.model);\n    if (!(this.configuration.triggers.exportContent === 'DEMAND')) {\n      launchExport(this, this.model);\n    }\n  }\n\n  /**\n   * @Deprecated\n   * @param rawStrokes\n   * @param strokeGroups\n   */\n  reDraw(rawStrokes, strokeGroups) {\n    rawStrokes.forEach((stroke) => {\n      InkModel.addStroke(this.model, stroke);\n    });\n    strokeGroups.forEach((group) => {\n      group.strokes.forEach((strokeFromGroup) => {\n        InkModel.addStrokeToGroup(this.model, strokeFromGroup, group.penStyle);\n      });\n    });\n    this.renderer.drawModel(this.rendererContext, this.model, this.stroker);\n    recognizerCallback(this, undefined, this.model);\n  }\n\n  /**\n   * True if idle state\n   * @return {Boolean}\n   */\n  get idle() {\n    return this.recognizerContext.idle;\n  }\n\n  /**\n   * Wait for idle state.\n   */\n  waitForIdle() {\n    triggerCallbacks(this, undefined, Constants.EventType.IDLE);\n    launchWaitForIdle(this, this.model);\n  }\n\n  /**\n   * True if can undo, false otherwise.\n   * @return {Boolean}\n   */\n  get canUndo() {\n    return this.undoRedoContext.canUndo;\n  }\n\n  /**\n   * Undo the last action.\n   */\n  undo() {\n    logger.debug('Undo current model', this.model);\n    triggerCallbacks(this, undefined, Constants.EventType.UNDO);\n    this.undoRedoManager.undo(this.undoRedoContext, this.model, (err, res, ...types) => {\n      manageRecognizedModel(this, res, ...types);\n    });\n  }\n\n  /**\n   * True if can redo, false otherwise.\n   * @return {Boolean}\n   */\n  get canRedo() {\n    return this.undoRedoContext.canRedo;\n  }\n\n  /**\n   * Redo the last action.\n   */\n  redo() {\n    logger.debug('Redo current model', this.model);\n    triggerCallbacks(this, undefined, Constants.EventType.REDO);\n    this.undoRedoManager.redo(this.undoRedoContext, this.model, (err, res, ...types) => {\n      manageRecognizedModel(this, res, ...types);\n    });\n  }\n\n  /**\n   * True if empty, false otherwise\n   * @returns {boolean}\n   */\n  get isEmpty() {\n    return this.recognizerContext.isEmpty;\n  }\n\n  /**\n   * True if can clear, false otherwise.\n   * @return {Boolean}\n   */\n  get canClear() {\n    return this.canUndo && this.model.rawStrokes.length > 0;\n  }\n\n  /**\n   * Clear the output and the recognition result.\n   */\n  clear() {\n    logger.debug('Clear current model', this.model);\n    triggerCallbacks(this, undefined, Constants.EventType.CLEAR);\n    this.recognizer.clear(this.recognizerContext, this.model, (err, res, ...types) => {\n      recognizerCallback(this, err, res, ...types);\n    });\n  }\n\n  /**\n   * True if can convert, false otherwise.\n   * @return {Boolean}\n   */\n  get canConvert() {\n    return this.canUndo && this.canClear && this.recognizer && this.recognizer.convert;\n  }\n\n  /**\n   * Convert the current content\n   */\n  convert(conversionState = 'DIGITAL_EDIT') {\n    if (this.canConvert) {\n      triggerCallbacks(this, undefined, Constants.EventType.CONVERT);\n      launchConvert(this, this.model, conversionState);\n    }\n  }\n\n  /**\n   * Set the guides for text\n   * @param {Boolean} [enable]\n   */\n  setGuides(enable = true) {\n    this.configuration.recognitionParams.v4.text.guides.enable = enable;\n    launchConfig(this, this.model);\n  }\n\n  /**\n   * Return the position of the cursor identifying the current state in the internal iink undo/redo stack.\n   * @returns {Number}\n   */\n  get possibleUndoCount() {\n    return this.recognizerContext.possibleUndoCount;\n  }\n\n  /**\n   * The number of operations that it is currently possible to undo.\n   * @returns {Number}\n   */\n  get undoStackIndex() {\n    return this.recognizerContext.undoStackIndex;\n  }\n\n  /**\n   * True if can export, false otherwise.\n   * @return {Boolean}\n   */\n  get canExport() {\n    return this.canUndo && this.canClear && this.recognizer && this.recognizer.getInfo().availableTriggers.exportContent.includes(Constants.Trigger.DEMAND);\n  }\n\n  /**\n   * Explicitly ask to perform an export. You have to listen to events to get the content as this function is non blocking and does not have a return type.\n   * @param {Array<String>} requestedMimeTypes Requested mime-types. Be sure to ask all the types required by the listeners of exported event.\n   */\n  export_(requestedMimeTypes) {\n    if (this.canExport) {\n      triggerCallbacks(this, undefined, Constants.EventType.EXPORT);\n      launchExport(this, this.model, requestedMimeTypes, Constants.Trigger.DEMAND);\n    }\n  }\n\n  /**\n   * Import content.\n   * @param {Blob|*} data Data to import\n   * @param {String} [mimetype] Mimetype of the data, needed if data is not a Blob\n   */\n  import_(data, mimetype) {\n    triggerCallbacks(this, undefined, Constants.EventType.IMPORT);\n    launchImport(this, this.model, !(data instanceof Blob) ? new Blob([data], { type: mimetype }) : data);\n  }\n\n  /**\n   * Get supported import mime types\n   */\n  getSupportedImportMimeTypes() {\n    launchGetSupportedImportMimeTypes(this, this.model);\n  }\n\n  /**\n   * pointer events\n   * @param {PointerEvents} events\n   */\n  pointerEvents(events) {\n    launchPointerEvents(this, this.model, events);\n  }\n\n  /**\n   * Get current state exports\n   * @return {Object}\n   */\n  get exports() {\n    return this.model ? this.model.exports : undefined;\n  }\n\n  get supportedImportMimeTypes() {\n    return this.recognizerContext.supportedImportMimeTypes;\n  }\n\n  /**\n   * Function to call when the dom element link to the current ink paper has been resize.\n   */\n  resize() {\n    logger.debug('Resizing editor');\n    this.renderer.resize(this.rendererContext, this.model, this.stroker, this.configuration.renderingParams.minHeight, this.configuration.renderingParams.minWidth);\n    launchResize(this, this.model);\n  }\n\n  /**\n   * Set the theme (font family, font size and line height) depending on the language\n   * @param lang\n   */\n  setThemeForFont(lang) {\n    const defaultLang = !Object.keys(Constants.Languages).includes(lang);\n    const armenian = lang === 'hy_AM';\n    const fontFamily = defaultLang || armenian ? Constants.Languages.default : Constants.Languages[lang];\n    const lineHeight = defaultLang || armenian ? '1.2' : '1.8';\n    this.theme = {\n      '.text': {\n        'font-family': fontFamily,\n        'line-height': lineHeight\n      }\n    };\n  }\n\n  /**\n   * Detach event listeners from the DOM element created at editor creation.\n   */\n  unload() {\n    if (this.grabber) { // Remove event handlers to avoid multiplication (detach grabber)\n      this.grabber.detach(this.domElement, this.grabberContext);\n    }\n    if (this.innerRenderer) {\n      this.innerRenderer.detach(this.domElement, this.rendererContext);\n    }\n  }\n\n  /**\n   * Trigger the change callbacks (and by default send a change event).\n   */\n  forceChange() {\n    triggerCallbacks(this, undefined, Constants.EventType.CHANGED);\n  }\n\n  /* eslint-disable class-methods-use-this */\n  /**\n   * Get access to some easter egg features link ink injection. Use at your own risk (less tested and may be removed without notice).\n   */\n  get eastereggs() {\n    return eastereggs;\n  }\n  /* eslint-enable class-methods-use-this */\n}\n","import * as languagesJson from './configuration/languages.json';\nimport * as languagesJsonV3 from './configuration/languagesV3.json';\nimport { editorLogger as logger } from './configuration/LoggerConfig';\nimport { Editor } from './Editor';\nimport * as DefaultConfiguration from './configuration/DefaultConfiguration';\n\n/**\n * Attach an Editor to a DOMElement\n * @param {Element} element DOM element to attach an editor\n * @param {Configuration} [configuration] Configuration to apply\n * @param {PenStyle} [penStyle] Pen style to apply\n * @param {Theme} [theme] Theme to apply\n * @param {Behaviors} [behaviors] Custom behaviors to apply\n * @return {Editor} New editor\n */\nexport function register(element, configuration, penStyle, theme, behaviors) {\n  logger.debug('Registering a new editor');\n  return new Editor(element, configuration, penStyle, theme, behaviors);\n}\n\n/**\n * Return the list of available recognition languages\n * @param {Configuration} [configuration] Configuration to get the languages\n * @return {JSON} A list of available languages\n */\nexport function getAvailableLanguageList(configuration) {\n  const innerConfiguration = DefaultConfiguration.overrideDefaultConfiguration(configuration);\n  return innerConfiguration.recognitionParams.apiVersion === 'V4' ? languagesJson : languagesJsonV3;\n}\n","import Constants from './configuration/Constants';\nimport LoggerConfig from './configuration/LoggerConfig';\nimport DefaultConfiguration from './configuration/DefaultConfiguration';\nimport DefaultPenStyle from './configuration/DefaultPenStyle';\nimport DefaultTheme from './configuration/DefaultTheme';\nimport DefaultBehaviors from './configuration/DefaultBehaviors';\nimport * as InkModel from './model/InkModel';\nimport { Editor } from './Editor';\nimport { register, getAvailableLanguageList } from './EditorFacade';\nimport * as RecognizerContext from './model/RecognizerContext';\n\nconst MyScript = {\n  Constants,\n  // Default instantiations\n  DefaultConfiguration,\n  DefaultBehaviors,\n  DefaultPenStyle,\n  DefaultTheme,\n  // Helper functions\n  register,\n  getAvailableLanguageList,\n  // Internals\n  LoggerConfig,\n  Editor,\n  InkModel,\n  RecognizerContext,\n};\n\nexport {\n  MyScript as default,\n  Constants,\n  // Default instantiations\n  DefaultConfiguration,\n  DefaultBehaviors,\n  DefaultPenStyle,\n  DefaultTheme,\n  // Helper functions\n  register,\n  getAvailableLanguageList,\n  // Internals\n  LoggerConfig,\n  Editor,\n  InkModel,\n  RecognizerContext,\n};\n\n"],"names":["Constants","this","log","loglevel","editorLogger","getLogger","Logger","EDITOR","setDefaultLevel","LogLevel","ERROR","smartGuideLogger","SMARTGUIDE","modelLogger","MODEL","grabberLogger","GRABBER","rendererLogger","RENDERER","recognizerLogger","RECOGNIZER","callbackLogger","CALLBACK","utilLogger","UTIL","testLogger","typeOf","defaultConfiguration","undefined","overrideDefaultConfiguration","configuration","confRef","currentConfiguration","recognitionParams","server","useWindowLocation","scheme","window","location","protocol","slice","host","assign","debug","defaultPenStyle","parser","JsonCSS","overrideDefaultPenStyle","style","currentStyle","toCSS","penStyle","css","substring","length","defaultTheme","overrideDefaultTheme","theme","currentTheme","floatPrecisionArray","roundFloat","oneFloat","requestedFloatPrecision","floatPrecision","Math","round","extractPoint","event","domElement","offsetTop","offsetLeft","eventRef","changedTouches","rect","getBoundingClientRect","clientX","left","clientLeft","xyFloatPrecision","clientY","top","clientTop","Date","now","timestampFloatPrecision","attach","element","editor","mMaxDiffX","unfocus","getSelection","type","removeAllRanges","hideMenu","evt","moreMenuInDocument","document","querySelector","target","classList","contains","display","hideCandidates","candidatesInDocument","tagName","pointerDownHandler","pointerDownOnEditor","id","activePointerId","pointerId","trace","button","buttons","stopPropagation","pointerDown","pointerType","smartGuidePointerDown","downSmartGuidePoint","pointerMoveHandler","pointerMove","point","diffX","abs","x","diffY","y","max","cond1","cond2","pointerUpHandler","smartGuideIds","scrollbarClasses","pointerEnteredSmartGuide","relatedTarget","includes","className","pointerExitedSmartGuide","pointerMovedWords","pointerUp","context","listenerOptions","listeners","forEach","item","types","addEventListener","listener","options","detach","removeEventListener","drawStroke","stroke","stroker","ShapeSymbols","phi","angle","returnedAngle","PI","drawEllipseArc","centerPoint","maxRadius","minRadius","orientation","startAngle","sweepAngle","angleStep","z1","cos","z3","sin","z2","z4","n","floor","boundariesPoints","save","beginPath","i","alpha","atan2","cosAlpha","sinAlpha","moveTo","lineTo","push","restore","drawArrowHead","headPoint","beta","contextReference","fillStyle","strokeStyle","fill","drawShapeEllipse","shapeEllipse","points","center","beginDecoration","beginTangentAngle","endDecoration","endTangentAngle","drawLine","p1","p2","drawShapeLine","shapeLine","firstPoint","lastPoint","drawShapeSymbol","symbol","lineWidth","width","color","elementType","shape","candidates","selectedCandidateIndex","table","lines","line","data","error","ellipse","recognizedShape","primitives","primitive","TextSymbols","drawUnderline","underline","label","delta","topLeftPoint","firstCharacter","height","lastCharacter","drawText","font","textHeight","textAlign","justificationType","textBaseline","fillText","drawTextLine","textLine","underlineList","drawTextSymbol","MusicClefs","gap","xAnchor","yAnchor","MusicSymbols","createImage","clef","src","browserDocument","img","createElement","dataset","getMusicClefElements","Object","keys","map","key","svg","drawStaff","staff","count","canvas","drawClef","drawImage","parentElement","value","boundingBox","drawMusicSymbol","computeDistance","xArray","yArray","lastIndexPoint","distance","sqrt","pow","isNaN","computeLength","lArray","computePressure","ratio","pressure","parseFloat","filterPointByAcquisitionDelta","ret","createStrokeComponent","properties","defaultStroke","toJSON","t","toJSONV4","addPoint","strokeReference","p","l","start","end","slicedStroke","getPointByIndex","index","mergeBounds","boundsA","boundsB","min","minX","maxX","minY","maxY","getLineBounds","getEllipseBounds","getTextLineBounds","getClefBounds","getStrokeBounds","getSymbolsBounds","symbols","bounds","Number","MAX_VALUE","MIN_VALUE","boundsRef","filter","reduce","getDefaultMusicSymbols","defaultStaff","v3","musicParameter","defaultClef","getBoundingBox","getDefaultSymbols","RecognitionType","MUSIC","createModel","getTime","clearModel","model","modelReference","currentStroke","rawStrokes","strokeGroups","lastPositions","lastSentPosition","lastReceivedPosition","lastRenderedPosition","recognizedSymbols","exports","rawResults","convert","needRedraw","addStroke","addStrokeToGroup","strokePenStyle","lastGroup","strokes","newStrokeGroup","strokeCopy","extractPendingStrokes","position","initPendingStroke","dpi","pxWidth","StrokeComponent","appendToPendingStroke","endPendingStroke","getBorderCoordinates","modelBounds","defaultSymbols","extractStrokesFromInkRange","firstStroke","lastStroke","slicedStrokes","updateModelSentPosition","updateModelReceivedPosition","resetModelPositions","resetModelRendererPosition","updateModelRenderedPosition","extractPendingRecognizedSymbols","cloneModel","clonedModel","JSON","parse","stringify","mergeModels","models","a","b","modelRef","getInfo","getPixelRatio","getContext","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","detectPixelRatio","tempCanvas","canvasRatio","createCanvas","add","appendChild","resizeContent","elements","renderingCanvas","capturingCanvas","parentNode","clientWidth","minWidth","clientHeight","minHeight","pixelRatio","scale","resources","removeChild","res","resize","drawModel","drawSymbol","warn","drawCurrentStroke","capturingCanvasContext","clearRect","renderingCanvasContext","InkModel","computeLinksPoints","radius","computeMiddlePoint","point1","point2","computeAxeAngle","begin","renderArc","arc","renderLine","linkPoints1","linkPoints2","renderFinal","ARCSPLIT","linkPoints","newAngle","renderQuadratic","ctrl","linkPoints3","quadraticCurveTo","nbquadratics","closePath","matcher","selection","elementRef","fontSize","d3","select","remove","node","selectAll","attr","append","insertAdjacentSVG","html","container","ownerDocument","createElementNS","innerHTML","toLowerCase","insertBefore","firstChild","lastChild","nextSibling","symbolContext","updateView","patchUpdate","updates","update","svgElementSelector","layer","parent","insertAdjacentHTML","outerHTML","parentId","refId","name","e","pendingRecognizedSymbols","patch","pendingStrokes","svgPath","join","parts","classed","require$$0","require$$1","require$$2","require$$3","computeHmac","input","applicationKey","hmacKey","jsonInput","HmacSHA512","toString","Hex","req","result","responseText","transformRequest","obj","str","encodeURIComponent","xhr","url","recognizerContext","apiVersion","mimeType","pptxMimeType","recognizerContextRef","Promise","resolve","reject","request","XMLHttpRequest","open","withCredentials","setRequestHeader","CryptoHelper","isBlobType","startsWith","responseType","onerror","msg","recoverable","onload","status","response","Error","onreadystatechange","readyState","idle","send","then","post","createEmptyRecognizerContext","info","isResetRequired","updateRecognitionPositions","positions","instanceId","setRecognitionContext","recognitionContext","recognitionContexts","canReconnect","websocket","autoReconnect","currentReconnectionCount","maxRetryCount","shouldAttemptImmediateReconnect","LOST_CONNEXION_MESSAGE","CLOSE_RECOGNIZER_MESSAGE","postMessage","suffixUrl","buildMessage","NetworkInterface","recognizerContextReference","RecognizerContext","extractExports","textSegmentResult","selectedCandidateIdx","init","callback","initPromise","initialized","EventType","LOADED","reset","clear","CHANGED","EXPORTED","RENDERED","close","textRestV3Configuration","TEXT","Protocol","REST","Trigger","QUIET_PERIOD","DEMAND","buildInput","textParameter","inputUnits","components","hmac","textInput","resultCallback","Cdkv3CommonTextRecognizer","IDLE","export_","catch","err","results","root","extractRecognizedSymbols","strokeList","scratchOutResults","inkRanges","scratchOutResult","erasedInkRanges","concat","find","inkRange","component","mathRestV3Configuration","MATH","mathParameter","mathInput","Cdkv3CommonMathRecognizer","CdkCommonUtil","Cdkv3RestRecognizerUtil","getStyleFromInkRanges","extractShapeSymbols","segment","selectedCandidate","segments","analyzerRestV3Configuration","ANALYZER","parameter","analyzerParameter","analyzerInput","extractSymbols","extractRecognizedSymbolsFromAnalyzerResult","shapes","tables","textLines","CONVERTED","shapeRestV3Configuration","SHAPE","shapeParameter","shapeInput","buildReset","Cdkv3CommonShapeRecognizer","musicRestV3Configuration","musicInput","iinkRestConfiguration","DIAGRAM","RAWCONTENT","conversionState","buildTextConf","v4","text","lang","export","buildMathConf","math","buildDiagramConf","diagram","buildRawContentConf","recognition","buildData","dataConf","newStrokes","group","newPenStyle","DefaultPenStyle","newGroup","contentType","charAt","toUpperCase","DefaultTheme","requestedMimeTypes","callPostMessage","restConversionState","mimeTypes","infinitePing","websocketRef","pingLostCount","maxPingLost","pingDelay","addWebsocketAttributes","websocketConfiguration","socket","pingEnabled","maxPingLostCount","openWebSocket","WebSocket","onopen","websocketCallback","onclose","onmessage","parsedMessage","callBackParam","message","code","reason","buildHmacMessage","challenge","buildInitMessage","buildWebSocketCallback","destructuredPromise","destructurePromise","resolveParam","rejectParam","promise","buildUrl","commonCallback","reconnect","destructuredInitPromise","PromiseHelper","NetworkWSInterface","retry","func","params","sendMessage","mathWebSocketV3Configuration","WEBSOCKET","POINTER_UP","buildMathInput","buildResetMessage","mathCallback","Cdkv3WSWebsocketBuilder","CdkWSRecognizerUtil","err1","res1","logger","textWebSocketV3Configuration","buildTextInput","textCallback","hmacChallenge","sessionId","buildRestoreIInkSessionInput","buildNewContentPackageInput","iinkSessionId","contentPartCount","buildConfiguration","currentPartId","buildOpenContentPart","buildNewContentPart","partId","buildSetTheme","buildSetPenStyle","buildSetPenStyleClasses","penStyleClasses","canUndo","canRedo","empty","isEmpty","possibleUndoCount","undoStackIndex","supportedImportMimeTypes","readBlob","blob","fileReader","FileReader","readAsText","getDPI","IInkWebSocketV4Configuration","NEBO","renderingParams","triggers","exportContent","buildAddStrokes","buildUndo","buildRedo","buildClear","buildConvert","state","buildZoom","buildResize","buildExport","requestedMimeType","usedMimeType","buildImportFile","mimetype","buildImportChunk","lastChunk","buildPointerEvents","events","buildWaitForIdle","buildGetSupportedImportMimeTypes","iinkCallback","SUPPORTED_IMPORT_MIMETYPES","Cdkv4WSWebsocketBuilder","newContentPart","openContentPart","sendConfiguration","pointerEvents","addStrokes","undo","redo","noerr","newModel","import_","uuid","create","chunkSize","fileChunkSize","importFileId","blobPart","size","getSupportedImportMimeTypes","waitForIdle","zoom","setPenStyle","setPenStyleClasses","setTheme","eventCallback","dispatchEvent","CustomEvent","bubbles","composed","detail","defaultBehaviors","PointerEventGrabber","QuadraticCanvasStroker","QuadraticSVGStroker","CanvasRenderer","SVGRenderer","Cdkv3RestTextRecognizer","Cdkv3RestMathRecognizer","Cdkv3RestAnalyzerRecognizer","Cdkv3RestShapeRecognizer","Cdkv3RestMusicRecognizer","iinkRestRecognizer","Cdkv3WSTextRecognizer","Cdkv3WSMathRecognizer","Cdkv4WSInteractiveRecognizer","behaviors","behavior","grabber","strokerList","renderer","rendererList","recognizer","recognizerList","callbacks","overrideDefaultBehaviors","currentBehaviors","getBehaviorFromConfiguration","createUndoRedoContext","undoRedoMaxStackSize","updateUndoRedoState","undoRedoContext","undoRedoContextRef","currentPosition","stack","getModel","clone","updateModel","modelIndex","findIndex","modificationTime","splice","undoRedoContextReference","maxSize","shift","computeStats","stats","strokesCount","pointsCount","byteSize","humanSize","humanUnit","restMessage","toFixed","borderCoordinates","margin","getImage","renderStructure","translate","toDataURL","get","set","touch","closest","delegate","createHTMLElements","randomString","smartGuideElement","textElement","setAttribute","textContainer","ellipsisElement","tagElement","candidatesElement","menuElement","convertElement","copyElement","deleteElement","isInShadow","showActions","elementsRef","insertActions","positionActions","isMenuInDocument","showCandidates","smartGuide","smartGuideRef","replace","words","Exports","JIIX","wordToChange","word","clickCandidate","candidate","innerText","jiixToImport","addListeners","callFadeOutObserver","duration","observer","MutationObserver","mutations","smartGuideTimeOutId","setTimeout","observe","childList","subtree","attributes","createSmartGuide","random","clipboard","Clipboard","perfectScrollbar","PerfectScrollbar","suppressScrollY","scrollXMarginOffset","smartGuideFadeOut","enable","mmToPixels","maxWidthTextContainer","offsetWidth","maxWidth","insertSmartGuide","insertSmartGuideElement","visibility","loader","insertTag","insertTextContainer","insertEllipsis","marginTop","marginLeft","launchSmartGuide","isSmartGuideInDocument","addAnimationToModifiedWord","tempWords","labelWordsArray","tempLabelWordsArray","wordChangedId","indexOf","getElementById","scrollLeft","createWordSpan","span","textContent","populatePrompter","myFragment","createDocumentFragment","lastWord","previousLabelExport","inkImporter","editorParam","delayBetweenStrokes","lastOneDelay","origGrabber","actions","action","setDelay","X","idx","Y","play","actionsArray","delay","currentAction","nextDelay","lastIndexOf","Event","importStrokeGroups","strokeFromGroup","rendererContext","triggerCallbacks","editorRef","UNDO","REDO","CLEAR","CONVERT","EXPORT","call","canClear","canConvert","canExport","clearTimeout","notifyTimer","processDelay","manageResetState","resetFunc","resetedModel","isTriggerValid","trigger","availableTriggers","manageRecognizedModel","creationTime","recognizerCallback","handleResult","WRONG_CREDENTIALS","TOO_OLD","NOT_REACHABLE","el","undoRedoManager","SmartGuide","launchPointerEvents","launchExport","exportTimer","triggerDelay","launchImport","launchGetSupportedImportMimeTypes","launchConvert","launchConfig","launchResize","resizeTimer","resizeTriggerDelay","launchWaitForIdle","Editor","innerBehaviors","DefaultBehaviors","localTheme","ModelStats","ink","localPenStyle","stringStrokes","strokeIndex","stringRawStrokes","guides","IMPORT","Blob","defaultLang","Languages","armenian","fontFamily","default","lineHeight","grabberContext","innerRenderer","innerConfiguration","DefaultConfiguration","setThemeForFont","innerPenStyle","DefaultStyles","innerPenStyleClasses","innerTheme","innerBehavior","UndoRedoContext","UndoRedoManager","initialize","innerRecognizer","ImageRenderer","eastereggs","register","getAvailableLanguageList","languagesJson","languagesJsonV3","MyScript"],"mappings":"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U,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC;SAC9E,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,UAAU,E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"}