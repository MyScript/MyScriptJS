/*
 myscript - The JavaScript library for the MyScript Cloud recognition service
 Version: 1.1.0
 License: Apache-2.0
 */
!function(){function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:void 0};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent,Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound})}(),MyScript={},function(scope){function Point(obj){obj&&(this.x=obj.x,this.y=obj.y)}Point.prototype.getX=function(){return this.x},Point.prototype.setX=function(x){this.x=x},Point.prototype.getY=function(){return this.y},Point.prototype.setY=function(y){this.y=y},scope.Point=Point}(MyScript),function(scope){function QuadraticPoint(obj){scope.Point.call(this,obj),this.pressure=.5,this.distance=0,this.length=0,this.cos=0,this.sin=0,this.p1=new scope.Point(obj),this.p2=new scope.Point(obj),obj&&(this.pressure=obj.pressure,this.distance=obj.distance,this.length=obj.length,this.cos=obj.cos,this.sin=obj.sin,this.p1=new scope.Point(obj.p1),this.p2=new scope.Point(obj.p2))}QuadraticPoint.prototype=new scope.Point,QuadraticPoint.prototype.constructor=QuadraticPoint,QuadraticPoint.prototype.getPressure=function(){return this.pressure},QuadraticPoint.prototype.setPressure=function(pressure){this.pressure=pressure},QuadraticPoint.prototype.getDistance=function(){return this.distance},QuadraticPoint.prototype.setDistance=function(distance){this.distance=distance},QuadraticPoint.prototype.getLength=function(){return this.length},QuadraticPoint.prototype.setLength=function(length){this.length=length},QuadraticPoint.prototype.getCos=function(){return this.cos},QuadraticPoint.prototype.setCos=function(cos){this.cos=cos},QuadraticPoint.prototype.getSin=function(){return this.sin},QuadraticPoint.prototype.setSin=function(sin){this.sin=sin},QuadraticPoint.prototype.getP1=function(){return this.p1},QuadraticPoint.prototype.setP1=function(p1){this.p1=p1},QuadraticPoint.prototype.getP2=function(){return this.p2},QuadraticPoint.prototype.setP2=function(p2){this.p2=p2},scope.QuadraticPoint=QuadraticPoint}(MyScript),function(scope){function Rectangle(obj){obj&&(this.x=obj.x,this.y=obj.y,this.width=obj.width,this.height=obj.height)}Rectangle.prototype.getX=function(){return this.x},Rectangle.prototype.setX=function(x){this.x=x},Rectangle.prototype.getY=function(){return this.y},Rectangle.prototype.setY=function(y){this.y=y},Rectangle.prototype.getTopLeftPoint=function(){var point=new scope.Point;return point.setX(this.x),point.setY(this.y),point},Rectangle.prototype.setTopLeftPoint=function(topLeftPoint){this.x=topLeftPoint.getX(),this.y=topLeftPoint.getY()},Rectangle.prototype.getWidth=function(){return this.width},Rectangle.prototype.setWidth=function(width){this.width=width},Rectangle.prototype.getHeight=function(){return this.height},Rectangle.prototype.setHeight=function(height){this.height=height},scope.Rectangle=Rectangle}(MyScript),function(scope){function InkManager(){this.writing=!1,this.strokes=[],this.currentStroke=null,this.undoRedoStack=[]}InkManager.prototype.isWriting=function(){return this.writing},InkManager.prototype.getCurrentStroke=function(){return this.currentStroke},InkManager.prototype.startInkCapture=function(x,y,t){if(this.writing)throw new Error("Stroke capture already running");this.isRedoEmpty()||this.clearUndoRedoStack(),this.currentStroke=new scope.Stroke,this.currentStroke.addX(x),this.currentStroke.addY(y),this.currentStroke.addT(t),this.writing=!0},InkManager.prototype.continueInkCapture=function(x,y,t){if(!this.writing)throw new Error("Missing startInkCapture");this.currentStroke.addX(x),this.currentStroke.addY(y),this.currentStroke.addT(t)},InkManager.prototype.endInkCapture=function(){if(!this.writing)throw new Error("Missing startInkCapture");this.strokes.push(this.currentStroke),this.writing=!1},InkManager.prototype.clear=function(){this.writing=!1,this.strokes=[],this.currentStroke=null,this.undoRedoStack=[]},InkManager.prototype.isEmpty=function(){return 0===this.strokes.length},InkManager.prototype.isRedoEmpty=function(){return 0===this.undoRedoStack.length},InkManager.prototype.undo=function(){this.isEmpty()||this.undoRedoStack.push(this.strokes.pop())},InkManager.prototype.redo=function(){this.isRedoEmpty()||this.strokes.push(this.undoRedoStack.pop())},InkManager.prototype.getStrokes=function(){return this.strokes},InkManager.prototype.getUndoRedoStack=function(){return this.undoRedoStack},InkManager.prototype.clearUndoRedoStack=function(){this.undoRedoStack=[]},InkManager.prototype.copy=function(strokes,index){for(index;index<this.strokes.length;index++)strokes.push(this.strokes[index])},scope.InkManager=InkManager}(MyScript),function(scope){function PenParameters(){this.color="black",this.rectColor="rgba(0, 0, 0, 0.2)",this.font="Times New Roman",this.decoration="",this.width=4,this.pressureType="SIMULATED",this.alpha="1.0"}PenParameters.prototype.getColor=function(){return this.color},PenParameters.prototype.setColor=function(color){this.color=color},PenParameters.prototype.getRectColor=function(){return this.rectColor},PenParameters.prototype.setRectColor=function(rectColor){this.rectColor=rectColor},PenParameters.prototype.getFont=function(){return this.font},PenParameters.prototype.setFont=function(font){this.font=font},PenParameters.prototype.getDecoration=function(){return this.decoration},PenParameters.prototype.setDecoration=function(decoration){this.decoration=decoration},PenParameters.prototype.getWidth=function(){return this.width},PenParameters.prototype.setWidth=function(width){this.width=width},PenParameters.prototype.getPressureType=function(){return this.pressureType},PenParameters.prototype.setPressureType=function(pressureType){this.pressureType=pressureType},PenParameters.prototype.getAlpha=function(){return this.alpha},PenParameters.prototype.setAlpha=function(alpha){this.alpha=alpha},scope.PenParameters=PenParameters}(MyScript),function(scope){function RenderingParameters(){scope.PenParameters.call(this)}RenderingParameters.prototype=new scope.PenParameters,RenderingParameters.prototype.constructor=RenderingParameters,scope.RenderingParameters=RenderingParameters}(MyScript),function(scope){function MathUtils(){}MathUtils.getEllipseArcRect=function(center,maxRadius,minRadius,orientation,startAngle,sweepAngle){var angle,alpha,z1,z2,z3,z4,cosAlpha,sinAlpha,n,xList,yList,i,x,y,xMin,xMax,yMin,yMax,angleStep=.02,sortFloat=function(a,b){return a-b};for(z1=z2=Math.cos(orientation),z3=z4=Math.sin(orientation),z1*=maxRadius,z2*=minRadius,z3*=maxRadius,z4*=minRadius,n=Math.abs(sweepAngle)/angleStep,xList=[],yList=[],i=0;n>=i;i++)angle=startAngle+i/n*sweepAngle,alpha=Math.atan2(Math.sin(angle)/minRadius,Math.cos(angle)/maxRadius),cosAlpha=Math.cos(alpha),sinAlpha=Math.sin(alpha),x=center.x+z1*cosAlpha-z4*sinAlpha,y=center.y+z2*sinAlpha+z3*cosAlpha,xList.push(x),yList.push(y);return xList.sort(sortFloat),yList.sort(sortFloat),xMin=xList[0],xMax=xList[xList.length-1],yMin=yList[0],yMax=yList[yList.length-1],new scope.Rectangle({x:xMin,y:yMin,width:xMax-xMin,height:yMax-yMin})},MathUtils.getLineRect=function(firstPoint,lastPoint){var xFirst=firstPoint.x,xLast=lastPoint.x,xMin=Math.min(xFirst,xLast),xMax=Math.max(xFirst,xLast),yFirst=firstPoint.y,yLast=lastPoint.y,yMin=Math.min(yFirst,yLast),yMax=Math.max(yFirst,yLast);return new scope.Rectangle({x:xMin,y:yMin,width:xMax-xMin,height:yMax-yMin})},MathUtils.getBoundingRect=function(boundingBoxes){var xList=[],yList=[];for(var i in boundingBoxes){var rectangle=boundingBoxes[i];xList.push(rectangle.getX()),xList.push(rectangle.getX()+rectangle.getWidth()),yList.push(rectangle.getY()),yList.push(rectangle.getY()+rectangle.getHeight())}var xMin=Math.min.apply(Math,xList),xMax=Math.max.apply(Math,xList),yMin=Math.min.apply(Math,yList),yMax=Math.max.apply(Math,yList);return new scope.Rectangle({x:xMin,y:yMin,width:xMax-xMin,height:yMax-yMin})},MathUtils.getComputedSlope=function(pA,pB){return(pB.getY()-pA.getY())/(pB.getX()-pA.getX())},MathUtils.getSheathPoints=function(originPoint,slope,delta){var x=Math.sqrt(Math.pow(delta,2)/(1+1/Math.pow(slope,2))),y=-(1/slope)*x;return{p1:new scope.Point({x:x+originPoint.getX(),y:y+originPoint.getY()}),p2:new scope.Point({x:-x+originPoint.getX(),y:-y+originPoint.getY()})}},scope.MathUtils=MathUtils}(MyScript),function(scope){function AbstractWSMessage(obj){obj&&(this.type=obj.type)}AbstractWSMessage.prototype.getType=function(){return this.type},scope.AbstractWSMessage=AbstractWSMessage}(MyScript),function(scope){function AbstractComponent(){}AbstractComponent.prototype.getType=function(){return this.type},AbstractComponent.prototype.setType=function(type){this.type=type},AbstractComponent.prototype.getBoundingBox=function(){throw new Error("not implemented")},AbstractComponent.prototype.setBoundingBox=function(boundingBox){throw new Error("not implemented")},scope.AbstractComponent=AbstractComponent}(MyScript),function(scope){function Stroke(obj){scope.AbstractComponent.call(this),this.type="stroke",this.x=[],this.y=[],this.t=[],obj&&(this.x=obj.x,this.y=obj.y,this.t=obj.t)}Stroke.prototype=new scope.AbstractComponent,Stroke.prototype.constructor=Stroke,Stroke.prototype.getX=function(){return this.x},Stroke.prototype.setX=function(x){this.x=x},Stroke.prototype.addX=function(x){null!==x&&void 0!==x&&this.x.push(x)},Stroke.prototype.getY=function(){return this.y},Stroke.prototype.setY=function(y){this.y=y},Stroke.prototype.addY=function(y){null!==y&&void 0!==y&&this.y.push(y)},Stroke.prototype.getT=function(){return this.t},Stroke.prototype.setT=function(t){this.t=t},Stroke.prototype.addT=function(t){null!==t&&void 0!==t&&this.t.push(t)},Stroke.prototype.getLength=function(){return this.x.length},Stroke.prototype.getBoundingBox=function(){var boundingBox=new scope.Rectangle;return boundingBox.setX(Math.min.apply(Math,this.getX())),boundingBox.setY(Math.min.apply(Math,this.getY())),boundingBox.setWidth(Math.max.apply(Math,this.getX())-boundingBox.getX()),boundingBox.setHeight(Math.max.apply(Math,this.getY())-boundingBox.getY()),boundingBox},scope.Stroke=Stroke}(MyScript),function(scope){function StrokeComponent(obj){scope.Stroke.call(this),this.p=[],this.d=[],this.l=[],this.color=void 0,this.alpha=void 0,this.width=0,obj&&(this.p=obj.p,this.d=obj.p,this.l=obj.l,this.color=obj.color,this.alpha=obj.alpha,this.width=obj.width)}StrokeComponent.prototype=new scope.Stroke,StrokeComponent.prototype.constructor=StrokeComponent,StrokeComponent.prototype.toJSON=function(){return{type:this.type,x:this.x,y:this.y,t:this.t}},StrokeComponent.prototype.getP=function(){return this.p},StrokeComponent.prototype.setP=function(p){this.p=p},StrokeComponent.prototype.addP=function(p){null!==p&&void 0!==p&&this.p.push(p)},StrokeComponent.prototype.getD=function(){return this.d},StrokeComponent.prototype.setD=function(d){this.d=d},StrokeComponent.prototype.addD=function(d){null!==d&&void 0!==d&&this.d.push(d)},StrokeComponent.prototype.getL=function(){return this.l},StrokeComponent.prototype.setL=function(l){this.l=l},StrokeComponent.prototype.addL=function(l){null!==l&&void 0!==l&&this.l.push(l)},StrokeComponent.prototype.getColor=function(){return this.color},StrokeComponent.prototype.setColor=function(color){this.color=color},StrokeComponent.prototype.getAlpha=function(){return this.alpha},StrokeComponent.prototype.setAlpha=function(alpha){this.alpha=alpha},StrokeComponent.prototype.getWidth=function(){return this.width},StrokeComponent.prototype.setWidth=function(width){this.width=width},StrokeComponent.prototype.addPoint=function(x,y,t){this.filterPointByAcquisitionDelta(x,y)&&(this.addX(x),this.addY(y),this.addT(t),this.addP(this.computeP(x,y)),this.addD(this.computeD(x,y)),this.addL(this.computeL(x,y)))},StrokeComponent.prototype.getLastIndexPoint=function(){return this.x.length-1},StrokeComponent.prototype.getPointByIndex=function(index){var point;return void 0!==index&&index>=0&&index<this.getLength()&&(point={x:this.getX()[index],y:this.getY()[index],t:this.getT()[index],p:this.getP()[index],d:this.getD()[index],l:this.getL()[index]}),point},StrokeComponent.prototype.computeD=function(x,y){var distance=Math.sqrt(Math.pow(y-this.getY()[this.getLastIndexPoint()-1],2)+Math.pow(x-this.getX()[this.getLastIndexPoint()-1],2));return isNaN(distance)&&(distance=0),distance},StrokeComponent.prototype.computeL=function(x,y){var length=this.getL()[this.getLastIndexPoint()-1]+this.computeD(x,y);return isNaN(length)&&(length=0),length},StrokeComponent.prototype.computeP=function(x,y){var ratio=1,distance=this.computeD(x,y),length=this.computeL(x,y);10>distance?ratio=.2+Math.pow(.1*distance,.4):distance>length-10&&(ratio=.2+Math.pow(.1*(length-distance),.4));var pressure=ratio*Math.max(.1,1-.1*Math.sqrt(distance));return isNaN(parseFloat(pressure))&&(pressure=.5),pressure},StrokeComponent.prototype.filterPointByAcquisitionDelta=function(x,y){var delta=2+this.getWidth()/4,ret=!1;return(0===this.getLength()||Math.abs(this.getX()[this.getLastIndexPoint()]-x)>=delta||Math.abs(this.getY()[this.getLastIndexPoint()]-y)>=delta)&&(ret=!0),ret},scope.StrokeComponent=StrokeComponent}(MyScript),function(scope){function CharacterInputComponent(){scope.AbstractComponent.call(this),this.type="inputCharacter",this.alternates=[]}CharacterInputComponent.prototype=new scope.AbstractComponent,CharacterInputComponent.prototype.constructor=CharacterInputComponent,CharacterInputComponent.prototype.getAlternates=function(){return this.alternates},CharacterInputComponent.prototype.setAlternates=function(alternates){this.alternates=alternates},CharacterInputComponent.prototype.addAlternate=function(alternate){this.alternates.push(alternate)},CharacterInputComponent.prototype.getBoundingBox=function(){return this.boundingBox},CharacterInputComponent.prototype.setBoundingBox=function(boundingBox){this.boundingBox=boundingBox},scope.CharacterInputComponent=CharacterInputComponent}(MyScript),function(scope){function CharacterInputComponentAlternate(alternate,probability){this.alternate=alternate,this.probability=probability}CharacterInputComponentAlternate.prototype.getAlternate=function(){return this.alternate},CharacterInputComponentAlternate.prototype.setAlternate=function(alternate){this.alternate=alternate},CharacterInputComponentAlternate.prototype.getProbability=function(){return this.probability},CharacterInputComponentAlternate.prototype.setProbability=function(probability){this.probability=probability},scope.CharacterInputComponentAlternate=CharacterInputComponentAlternate}(MyScript),function(scope){function AbstractParameter(){}scope.AbstractParameter=AbstractParameter}(MyScript),function(scope){function AbstractRecognitionInput(){}scope.AbstractRecognitionInput=AbstractRecognitionInput}(MyScript),function(scope){function AbstractRecognitionData(){}AbstractRecognitionData.prototype.getApplicationKey=function(){return this.applicationKey},AbstractRecognitionData.prototype.setApplicationKey=function(applicationKey){this.applicationKey=applicationKey},AbstractRecognitionData.prototype.getInstanceId=function(){return this.instanceId},AbstractRecognitionData.prototype.setInstanceId=function(instanceId){this.instanceId=instanceId},AbstractRecognitionData.prototype.getHmac=function(){return this.hmac},AbstractRecognitionData.prototype.setHmac=function(hmac){this.hmac=hmac},scope.AbstractRecognitionData=AbstractRecognitionData}(MyScript),function(scope){function RecognitionLanguagesData(){}RecognitionLanguagesData.prototype=new scope.AbstractRecognitionData,RecognitionLanguagesData.prototype.constructor=RecognitionLanguagesData,RecognitionLanguagesData.prototype.getInputMode=function(){return this.inputMode},RecognitionLanguagesData.prototype.setInputMode=function(inputMode){this.inputMode=inputMode},scope.RecognitionLanguagesData=RecognitionLanguagesData}(MyScript),function(scope){function AbstractStartRequestWSMessage(obj){this.type="start",scope.AbstractWSMessage.call(this,obj)}AbstractStartRequestWSMessage.prototype=new scope.AbstractWSMessage,AbstractStartRequestWSMessage.prototype.constructor=AbstractStartRequestWSMessage,scope.AbstractStartRequestWSMessage=AbstractStartRequestWSMessage}(MyScript),function(scope){function AbstractContinueRequestWSMessage(obj){this.type="continue",scope.AbstractWSMessage.call(this,obj)}AbstractContinueRequestWSMessage.prototype=new scope.AbstractWSMessage,AbstractContinueRequestWSMessage.prototype.constructor=AbstractContinueRequestWSMessage,AbstractContinueRequestWSMessage.prototype.getInstanceId=function(){return this.instanceId},AbstractContinueRequestWSMessage.prototype.setInstanceId=function(instanceId){this.instanceId=instanceId},scope.AbstractContinueRequestWSMessage=AbstractContinueRequestWSMessage}(MyScript),function(scope){function ChallengeRequestWSMessage(obj){this.type="hmac",scope.AbstractWSMessage.call(this,obj)}ChallengeRequestWSMessage.prototype=new scope.AbstractWSMessage,ChallengeRequestWSMessage.prototype.constructor=ChallengeRequestWSMessage,ChallengeRequestWSMessage.prototype.getChallenge=function(){return this.challenge},ChallengeRequestWSMessage.prototype.setChallenge=function(challenge){this.challenge=challenge},ChallengeRequestWSMessage.prototype.getApplicationKey=function(){return this.applicationKey},ChallengeRequestWSMessage.prototype.setApplicationKey=function(applicationKey){this.applicationKey=applicationKey},ChallengeRequestWSMessage.prototype.getHmacSignature=function(){return this.hmac},ChallengeRequestWSMessage.prototype.setHmacSignature=function(hmac){this.hmac=hmac},scope.ChallengeRequestWSMessage=ChallengeRequestWSMessage}(MyScript),function(scope){function InitRequestWSMessage(obj){this.type="applicationKey",scope.AbstractWSMessage.call(this,obj)}InitRequestWSMessage.prototype=new scope.AbstractWSMessage,InitRequestWSMessage.prototype.constructor=InitRequestWSMessage,InitRequestWSMessage.prototype.getApplicationKey=function(){return this.applicationKey},InitRequestWSMessage.prototype.setApplicationKey=function(applicationKey){this.applicationKey=applicationKey},scope.InitRequestWSMessage=InitRequestWSMessage}(MyScript),function(scope){function ResetRequestWSMessage(obj){this.type="reset",scope.AbstractWSMessage.call(this,obj)}ResetRequestWSMessage.prototype=new scope.AbstractWSMessage,ResetRequestWSMessage.prototype.constructor=ResetRequestWSMessage,scope.ResetRequestWSMessage=ResetRequestWSMessage}(MyScript),function(scope){function AbstractTextInputComponent(){scope.AbstractComponent.call(this)}AbstractTextInputComponent.prototype=new scope.AbstractComponent,AbstractTextInputComponent.prototype.constructor=AbstractTextInputComponent,AbstractTextInputComponent.prototype.getBoundingBox=function(){return this.boundingBox},AbstractTextInputComponent.prototype.setBoundingBox=function(boundingBox){this.boundingBox=boundingBox},scope.AbstractTextInputComponent=AbstractTextInputComponent}(MyScript),function(scope){function CharInputComponent(){this.type="char"}CharInputComponent.prototype=new scope.AbstractTextInputComponent,CharInputComponent.prototype.constructor=CharInputComponent,CharInputComponent.prototype.getCharacter=function(){return this.character},CharInputComponent.prototype.setCharacter=function(character){this.character=character},CharInputComponent.prototype.getLabel=function(){return this.character},CharInputComponent.prototype.setLabel=function(label){this.character=label},scope.CharInputComponent=CharInputComponent}(MyScript),function(scope){function StringInputComponent(){this.type="string"}StringInputComponent.prototype=new scope.AbstractTextInputComponent,StringInputComponent.prototype.constructor=StringInputComponent,StringInputComponent.prototype.getString=function(){return this.string},StringInputComponent.prototype.setString=function(string){this.string=string},StringInputComponent.prototype.getLabel=function(){return this.string},StringInputComponent.prototype.setLabel=function(label){this.string=label},scope.StringInputComponent=StringInputComponent}(MyScript),function(scope){function TextInputUnit(){this.textInputType="MULTI_LINE_TEXT",this.components=[]}TextInputUnit.prototype.getInputType=function(){return this.textInputType},TextInputUnit.prototype.setInputType=function(inputType){this.textInputType=inputType},TextInputUnit.prototype.getComponents=function(inkRange){return inkRange&&inkRange instanceof scope.TextInkRange?this.components.slice(inkRange.getStartComponent(),inkRange.getEndComponent()+1):this.components},TextInputUnit.prototype.setComponents=function(components){this.components=components},scope.TextInputUnit=TextInputUnit}(MyScript),function(scope){function TextParameter(obj){scope.AbstractParameter.call(this,obj),this.textProperties=new scope.TextProperties}TextParameter.prototype=new scope.AbstractParameter,TextParameter.prototype.constructor=TextParameter,TextParameter.prototype.getLanguage=function(){return this.language},TextParameter.prototype.setLanguage=function(language){this.language=language},TextParameter.prototype.getInputMode=function(){return this.textInputMode},TextParameter.prototype.setInputMode=function(inputMode){this.textInputMode=inputMode},TextParameter.prototype.getContentTypes=function(){return this.contentTypes},TextParameter.prototype.setContentTypes=function(contentTypes){this.contentTypes=contentTypes},TextParameter.prototype.getSubsetKnowledges=function(){return this.subsetKnowledges},TextParameter.prototype.setSubsetKnowledges=function(subsetKnowledges){this.subsetKnowledges=subsetKnowledges},TextParameter.prototype.getUserResources=function(){return this.userResources},TextParameter.prototype.setUserResources=function(userResources){this.userResources=userResources},TextParameter.prototype.getUserLkWords=function(){return this.userLkWords},TextParameter.prototype.setUserLkWords=function(userLkWords){this.userLkWords=userLkWords},TextParameter.prototype.getResultDetail=function(){return this.resultDetail},TextParameter.prototype.setResultDetail=function(resultDetail){this.resultDetail=resultDetail},TextParameter.prototype.getTextProperties=function(){return this.textProperties},TextParameter.prototype.setTextProperties=function(textProperties){this.textProperties=textProperties},scope.TextParameter=TextParameter}(MyScript),function(scope){function TextProperties(){}TextProperties.prototype.getTextCandidateListSize=function(){return this.textCandidateListSize},TextProperties.prototype.setTextCandidateListSize=function(textCandidateListSize){this.textCandidateListSize=textCandidateListSize},TextProperties.prototype.getWordCandidateListSize=function(){return this.wordCandidateListSize},TextProperties.prototype.setWordCandidateListSize=function(wordCandidateListSize){this.wordCandidateListSize=wordCandidateListSize},TextProperties.prototype.getWordPredictionListSize=function(){return this.wordPredictionListSize},TextProperties.prototype.setWordPredictionListSize=function(wordPredictionListSize){this.wordPredictionListSize=wordPredictionListSize},TextProperties.prototype.getWordCompletionListSize=function(){return this.wordCompletionListSize},TextProperties.prototype.setWordCompletionListSize=function(wordCompletionListSize){this.wordCompletionListSize=wordCompletionListSize},TextProperties.prototype.getCharacterCandidateListSize=function(){return this.characterCandidateListSize},TextProperties.prototype.setCharacterCandidateListSize=function(characterCandidateListSize){this.characterCandidateListSize=characterCandidateListSize},TextProperties.prototype.getDiscardCaseVariations=function(){return this.discardCaseVariations},TextProperties.prototype.setDiscardCaseVariations=function(discardCaseVariations){this.discardCaseVariations=discardCaseVariations},TextProperties.prototype.getDiscardAccentuationVariations=function(){return this.discardAccentuationVariations},TextProperties.prototype.setDiscardAccentuationVariations=function(discardAccentuationVariations){this.discardAccentuationVariations=discardAccentuationVariations},TextProperties.prototype.getDisableSpatialOrdering=function(){return this.disableSpatialOrdering},TextProperties.prototype.setDisableSpatialOrdering=function(disableSpatialOrdering){this.disableSpatialOrdering=disableSpatialOrdering},TextProperties.prototype.getGlyphDistortion=function(){return this.glyphDistortion},TextProperties.prototype.setGlyphDistortion=function(glyphDistortion){this.glyphDistortion=glyphDistortion},TextProperties.prototype.getEnableOutOfLexicon=function(){return this.enableOutOfLexicon},TextProperties.prototype.setEnableOutOfLexicon=function(enableOutOfLexicon){this.enableOutOfLexicon=enableOutOfLexicon},TextProperties.prototype.getSpellingDistortion=function(){return this.spellingDistortion},TextProperties.prototype.setSpellingDistortion=function(spellingDistortion){this.spellingDistortion=spellingDistortion},scope.TextProperties=TextProperties}(MyScript),function(scope){function TextRecognitionInput(){}TextRecognitionInput.prototype=new scope.AbstractRecognitionInput,TextRecognitionInput.prototype.constructor=TextRecognitionInput,TextRecognitionInput.prototype.getParameters=function(){return this.textParameter},TextRecognitionInput.prototype.setParameters=function(parameters){this.textParameter=parameters},TextRecognitionInput.prototype.getInputUnits=function(inkRange){return inkRange&&inkRange instanceof scope.TextInkRange?this.inputUnits.slice(inkRange.getStartUnit(),inkRange.getEndUnit()+1):this.inputUnits},TextRecognitionInput.prototype.setInputUnits=function(inputUnits){this.inputUnits=inputUnits},scope.TextRecognitionInput=TextRecognitionInput}(MyScript),function(scope){function TextRecognitionData(){}TextRecognitionData.prototype=new scope.AbstractRecognitionData,TextRecognitionData.prototype.constructor=TextRecognitionData,TextRecognitionData.prototype.getTextRecognitionInput=function(){return this.textInput},TextRecognitionData.prototype.setTextRecognitionInput=function(input){this.textInput=JSON.stringify(input)},scope.TextRecognitionData=TextRecognitionData}(MyScript),function(scope){function TextStartRequestWSMessage(obj){scope.AbstractStartRequestWSMessage.call(this,obj)}TextStartRequestWSMessage.prototype=new scope.AbstractStartRequestWSMessage,TextStartRequestWSMessage.prototype.constructor=TextStartRequestWSMessage,TextStartRequestWSMessage.prototype.getParameters=function(){return this.textParameter},TextStartRequestWSMessage.prototype.setParameters=function(parameters){this.textParameter=parameters},TextStartRequestWSMessage.prototype.getInputUnits=function(){return this.inputUnits},TextStartRequestWSMessage.prototype.setInputUnits=function(inputUnits){this.inputUnits=inputUnits},scope.TextStartRequestWSMessage=TextStartRequestWSMessage}(MyScript),function(scope){function TextContinueRequestWSMessage(obj){scope.AbstractContinueRequestWSMessage.call(this,obj)}TextContinueRequestWSMessage.prototype=new scope.AbstractContinueRequestWSMessage,TextContinueRequestWSMessage.prototype.constructor=TextContinueRequestWSMessage,TextContinueRequestWSMessage.prototype.getInputUnits=function(){return this.inputUnits},TextContinueRequestWSMessage.prototype.setInputUnits=function(inputUnits){this.inputUnits=inputUnits},scope.TextContinueRequestWSMessage=TextContinueRequestWSMessage}(MyScript),function(scope){function ShapeParameter(obj){scope.AbstractParameter.call(this,obj)}ShapeParameter.prototype=new scope.AbstractParameter,ShapeParameter.prototype.constructor=ShapeParameter,ShapeParameter.prototype.getRejectDetectionSensitivity=function(){return this.rejectDetectionSensitivity},ShapeParameter.prototype.setRejectDetectionSensitivity=function(rejectDetectionSensitivity){this.rejectDetectionSensitivity=rejectDetectionSensitivity},ShapeParameter.prototype.hasBeautification=function(){return this.doBeautification},ShapeParameter.prototype.setBeautification=function(doBeautification){this.doBeautification=doBeautification},ShapeParameter.prototype.getUserResources=function(){return this.userResources},ShapeParameter.prototype.setUserResources=function(userResources){this.userResources=userResources},scope.ShapeParameter=ShapeParameter}(MyScript),function(scope){function ShapeRecognitionInput(){}ShapeRecognitionInput.prototype=new scope.AbstractRecognitionInput,ShapeRecognitionInput.prototype.constructor=ShapeRecognitionInput,ShapeRecognitionInput.prototype.getComponents=function(){return this.components},ShapeRecognitionInput.prototype.setComponents=function(components){this.components=components},ShapeRecognitionInput.prototype.getDoBeautification=function(){return this.doBeautification},ShapeRecognitionInput.prototype.setDoBeautification=function(doBeautification){this.doBeautification=doBeautification},ShapeRecognitionInput.prototype.getRejectDetectionSensitivity=function(){return this.rejectDetectionSensitivity},ShapeRecognitionInput.prototype.setRejectDetectionSensitivity=function(rejectDetectionSensitivity){this.rejectDetectionSensitivity=rejectDetectionSensitivity},scope.ShapeRecognitionInput=ShapeRecognitionInput}(MyScript),function(scope){function ShapeRecognitionData(){}ShapeRecognitionData.prototype=new scope.AbstractRecognitionData,ShapeRecognitionData.prototype.constructor=ShapeRecognitionData,ShapeRecognitionData.prototype.getShapeRecognitionInput=function(){return this.shapeInput},ShapeRecognitionData.prototype.setShapeRecognitionInput=function(input){this.shapeInput=JSON.stringify(input)},scope.ShapeRecognitionData=ShapeRecognitionData}(MyScript),function(scope){function MathParameter(obj){scope.AbstractParameter.call(this,obj),this.resultTypes=[],this.userResources=[]}MathParameter.prototype=new scope.AbstractParameter,MathParameter.prototype.constructor=MathParameter,MathParameter.prototype.getResultTypes=function(){return this.resultTypes},MathParameter.prototype.setResultTypes=function(resultTypes){this.resultTypes=resultTypes},MathParameter.prototype.isColumnar=function(){return this.columnarOperation},MathParameter.prototype.setColumnar=function(columnar){this.columnarOperation=columnar},MathParameter.prototype.getUserResources=function(){return this.userResources},MathParameter.prototype.setUserResources=function(userResources){this.userResources=userResources},MathParameter.prototype.getScratchOutDetectionSensitivity=function(){return this.scratchOutDetectionSensitivity},MathParameter.prototype.setScratchOutDetectionSensitivity=function(scratchOutDetectionSensitivity){this.scratchOutDetectionSensitivity=scratchOutDetectionSensitivity},scope.MathParameter=MathParameter}(MyScript),function(scope){function MathRecognitionInput(){}MathRecognitionInput.prototype=new scope.AbstractRecognitionInput,MathRecognitionInput.prototype.constructor=MathRecognitionInput,MathRecognitionInput.prototype.getComponents=function(){return this.components},MathRecognitionInput.prototype.setComponents=function(components){this.components=components},MathRecognitionInput.prototype.getResultTypes=function(){return this.resultTypes},MathRecognitionInput.prototype.setResultTypes=function(resultTypes){this.resultTypes=resultTypes},MathRecognitionInput.prototype.isColumnar=function(){return this.columnarOperation},MathRecognitionInput.prototype.setColumnar=function(columnar){this.columnarOperation=columnar},MathRecognitionInput.prototype.getUserResources=function(){return this.userResources},MathRecognitionInput.prototype.setUserResources=function(userResources){this.userResources=userResources},MathRecognitionInput.prototype.getScratchOutDetectionSensitivity=function(){return this.scratchOutDetectionSensitivity;
},MathRecognitionInput.prototype.setScratchOutDetectionSensitivity=function(scratchOutDetectionSensitivity){this.scratchOutDetectionSensitivity=scratchOutDetectionSensitivity},scope.MathRecognitionInput=MathRecognitionInput}(MyScript),function(scope){function MathRecognitionData(){}MathRecognitionData.prototype=new scope.AbstractRecognitionData,MathRecognitionData.prototype.constructor=MathRecognitionData,MathRecognitionData.prototype.getMathRecognitionInput=function(){return this.mathInput},MathRecognitionData.prototype.setMathRecognitionInput=function(input){this.mathInput=JSON.stringify(input)},scope.MathRecognitionData=MathRecognitionData}(MyScript),function(scope){function MathStartRequestWSMessage(obj){scope.AbstractStartRequestWSMessage.call(this,obj)}MathStartRequestWSMessage.prototype=new scope.AbstractStartRequestWSMessage,MathStartRequestWSMessage.prototype.constructor=MathStartRequestWSMessage,MathStartRequestWSMessage.prototype.getParameters=function(){return this.parameters},MathStartRequestWSMessage.prototype.setParameters=function(parameters){this.parameters=parameters},MathStartRequestWSMessage.prototype.getComponents=function(){return this.components},MathStartRequestWSMessage.prototype.setComponents=function(components){this.components=components},scope.MathStartRequestWSMessage=MathStartRequestWSMessage}(MyScript),function(scope){function MathContinueRequestWSMessage(obj){this.type="continue",scope.AbstractContinueRequestWSMessage.call(this,obj)}MathContinueRequestWSMessage.prototype=new scope.AbstractContinueRequestWSMessage,MathContinueRequestWSMessage.prototype.constructor=MathContinueRequestWSMessage,MathContinueRequestWSMessage.prototype.getComponents=function(){return this.components},MathContinueRequestWSMessage.prototype.setComponents=function(components){this.components=components},scope.MathContinueRequestWSMessage=MathContinueRequestWSMessage}(MyScript),function(scope){function AbstractMusicInputComponent(){scope.AbstractComponent.call(this)}AbstractMusicInputComponent.prototype=new scope.AbstractComponent,AbstractMusicInputComponent.prototype.constructor=AbstractMusicInputComponent,AbstractMusicInputComponent.prototype.getBoundingBox=function(){return this.boundingBox},AbstractMusicInputComponent.prototype.setBoundingBox=function(boundingBox){this.boundingBox=boundingBox},scope.AbstractMusicInputComponent=AbstractMusicInputComponent}(MyScript),function(scope){function MusicAccidentalInputComponent(){this.type="accidental"}MusicAccidentalInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicAccidentalInputComponent.prototype.constructor=MusicAccidentalInputComponent,MusicAccidentalInputComponent.prototype.getValue=function(){return this.value},MusicAccidentalInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicAccidentalInputComponent=MusicAccidentalInputComponent}(MyScript),function(scope){function MusicArpeggiateInputComponent(){this.type="arpeggiate"}MusicArpeggiateInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicArpeggiateInputComponent.prototype.constructor=MusicArpeggiateInputComponent,MusicArpeggiateInputComponent.prototype.getValue=function(){return this.value},MusicArpeggiateInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicArpeggiateInputComponent=MusicArpeggiateInputComponent}(MyScript),function(scope){function MusicBarInputComponent(){this.type="bar",this.value=new scope.MusicBar}MusicBarInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicBarInputComponent.prototype.constructor=MusicBarInputComponent,MusicBarInputComponent.prototype.getValue=function(){return this.value},MusicBarInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicBarInputComponent=MusicBarInputComponent}(MyScript),function(scope){function MusicBeamInputComponent(){this.type="beam",this.value=new scope.MusicBeam}MusicBeamInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicBeamInputComponent.prototype.constructor=MusicBeamInputComponent,MusicBeamInputComponent.prototype.getValue=function(){return this.value},MusicBeamInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicBeamInputComponent=MusicBeamInputComponent}(MyScript),function(scope){function MusicClefInputComponent(){this.type="clef",this.value=new scope.MusicClef}MusicClefInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicClefInputComponent.prototype.constructor=MusicClefInputComponent,MusicClefInputComponent.prototype.getValue=function(){return this.value},MusicClefInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicClefInputComponent=MusicClefInputComponent}(MyScript),function(scope){function MusicDecorationInputComponent(){this.type="decoration",this.value=new scope.MusicDecoration}MusicDecorationInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicDecorationInputComponent.prototype.constructor=MusicDecorationInputComponent,MusicDecorationInputComponent.prototype.getValue=function(){return this.value},MusicDecorationInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicDecorationInputComponent=MusicDecorationInputComponent}(MyScript),function(scope){function MusicDotsInputComponent(){this.type="dots"}MusicDotsInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicDotsInputComponent.prototype.constructor=MusicDotsInputComponent,MusicDotsInputComponent.prototype.getValue=function(){return this.value},MusicDotsInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicDotsInputComponent=MusicDotsInputComponent}(MyScript),function(scope){function MusicHeadInputComponent(){this.type="head"}MusicHeadInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicHeadInputComponent.prototype.constructor=MusicHeadInputComponent,MusicHeadInputComponent.prototype.getValue=function(){return this.value},MusicHeadInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicHeadInputComponent=MusicHeadInputComponent}(MyScript),function(scope){function MusicLedgerLineInputComponent(){this.type="ledgerLine"}MusicLedgerLineInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicLedgerLineInputComponent.prototype.constructor=MusicLedgerLineInputComponent,scope.MusicLedgerLineInputComponent=MusicLedgerLineInputComponent}(MyScript),function(scope){function MusicRestInputComponent(){this.type="rest"}MusicRestInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicRestInputComponent.prototype.constructor=MusicRestInputComponent,MusicRestInputComponent.prototype.getValue=function(){return this.value},MusicRestInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicRestInputComponent=MusicRestInputComponent}(MyScript),function(scope){function MusicStemInputComponent(){this.type="stem"}MusicStemInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicStemInputComponent.prototype.constructor=MusicStemInputComponent,MusicStemInputComponent.prototype.getValue=function(){return this.value},MusicStemInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicStemInputComponent=MusicStemInputComponent}(MyScript),function(scope){function MusicTieOrSlurInputComponent(){this.type="tieOrSlur"}MusicTieOrSlurInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicTieOrSlurInputComponent.prototype.constructor=MusicTieOrSlurInputComponent,MusicTieOrSlurInputComponent.prototype.getValue=function(){return this.value},MusicTieOrSlurInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicTieOrSlurInputComponent=MusicTieOrSlurInputComponent}(MyScript),function(scope){function MusicTimeSignatureInputComponent(){this.type="timeSignature"}MusicTimeSignatureInputComponent.prototype=new scope.AbstractMusicInputComponent,MusicTimeSignatureInputComponent.prototype.constructor=MusicTimeSignatureInputComponent,MusicTimeSignatureInputComponent.prototype.getValue=function(){return this.value},MusicTimeSignatureInputComponent.prototype.setValue=function(value){this.value=value},scope.MusicTimeSignatureInputComponent=MusicTimeSignatureInputComponent}(MyScript),function(scope){function MusicStaff(){this.count=5,this.gap=20}MusicStaff.prototype.getCount=function(){return this.count},MusicStaff.prototype.setCount=function(count){this.count=count},MusicStaff.prototype.getTop=function(){return this.top},MusicStaff.prototype.setTop=function(top){this.top=top},MusicStaff.prototype.getGap=function(){return this.gap},MusicStaff.prototype.setGap=function(gap){this.gap=gap},scope.MusicStaff=MusicStaff}(MyScript),function(scope){function MusicParameter(obj){scope.AbstractParameter.call(this,obj),this.resultTypes=[],this.userResources=[]}MusicParameter.prototype=new scope.AbstractParameter,MusicParameter.prototype.constructor=MusicParameter,MusicParameter.prototype.getResultTypes=function(){return this.resultTypes},MusicParameter.prototype.setResultTypes=function(resultTypes){this.resultTypes=resultTypes},MusicParameter.prototype.getUserResources=function(){return this.userResources},MusicParameter.prototype.setUserResources=function(userResources){this.userResources=userResources},MusicParameter.prototype.getScratchOutDetectionSensitivity=function(){return this.scratchOutDetectionSensitivity},MusicParameter.prototype.setScratchOutDetectionSensitivity=function(scratchOutDetectionSensitivity){this.scratchOutDetectionSensitivity=scratchOutDetectionSensitivity},MusicParameter.prototype.getStaff=function(){return this.staff},MusicParameter.prototype.setStaff=function(staff){this.staff=staff},MusicParameter.prototype.getDivisions=function(){return this.divisions},MusicParameter.prototype.setDivisions=function(divisions){this.divisions=divisions},scope.MusicParameter=MusicParameter}(MyScript),function(scope){function MusicRecognitionInput(){}MusicRecognitionInput.prototype=new scope.AbstractRecognitionInput,MusicRecognitionInput.prototype.constructor=MusicRecognitionInput,MusicRecognitionInput.prototype.getComponents=function(){return this.components},MusicRecognitionInput.prototype.setComponents=function(components){this.components=components},MusicRecognitionInput.prototype.getResultTypes=function(){return this.resultTypes},MusicRecognitionInput.prototype.setResultTypes=function(resultTypes){this.resultTypes=resultTypes},MusicRecognitionInput.prototype.getUserResources=function(){return this.userResources},MusicRecognitionInput.prototype.setUserResources=function(userResources){this.userResources=userResources},MusicRecognitionInput.prototype.getScratchOutDetectionSensitivity=function(){return this.scratchOutDetectionSensitivity},MusicRecognitionInput.prototype.setScratchOutDetectionSensitivity=function(scratchOutDetectionSensitivity){this.scratchOutDetectionSensitivity=scratchOutDetectionSensitivity},MusicRecognitionInput.prototype.getStaff=function(){return this.staff},MusicRecognitionInput.prototype.setStaff=function(staff){this.staff=staff},MusicRecognitionInput.prototype.getDivisions=function(){return this.divisions},MusicRecognitionInput.prototype.setDivisions=function(divisions){this.divisions=divisions},scope.MusicRecognitionInput=MusicRecognitionInput}(MyScript),function(scope){function MusicRecognitionData(){}MusicRecognitionData.prototype=new scope.AbstractRecognitionData,MusicRecognitionData.prototype.constructor=MusicRecognitionData,MusicRecognitionData.prototype.getMusicRecognitionInput=function(){return this.musicInput},MusicRecognitionData.prototype.setMusicRecognitionInput=function(input){this.musicInput=JSON.stringify(input)},scope.MusicRecognitionData=MusicRecognitionData}(MyScript),function(scope){function AnalyzerParameter(obj){scope.AbstractParameter.call(this,obj),this.textParameter=new scope.TextParameter,this.textParameter.setLanguage("en_US"),this.textParameter.setInputMode("CURSIVE")}AnalyzerParameter.prototype=new scope.AbstractParameter,AnalyzerParameter.prototype.constructor=AnalyzerParameter,AnalyzerParameter.prototype.getTextParameters=function(){return this.textParameter},AnalyzerParameter.prototype.setTextParameters=function(parameters){this.textParameter=parameters},AnalyzerParameter.prototype.getCoordinateResolution=function(){return this.coordinateResolution},AnalyzerParameter.prototype.setCoordinateResolution=function(coordinateResolution){this.coordinateResolution=coordinateResolution},scope.AnalyzerParameter=AnalyzerParameter}(MyScript),function(scope){function AnalyzerRecognitionInput(){}AnalyzerRecognitionInput.prototype=new scope.AbstractRecognitionInput,AnalyzerRecognitionInput.prototype.constructor=AnalyzerRecognitionInput,AnalyzerRecognitionInput.prototype.getParameters=function(){return this.parameter},AnalyzerRecognitionInput.prototype.setParameters=function(parameters){this.parameter=parameters},AnalyzerRecognitionInput.prototype.getComponents=function(){return this.components},AnalyzerRecognitionInput.prototype.setComponents=function(components){this.components=components},scope.AnalyzerRecognitionInput=AnalyzerRecognitionInput}(MyScript),function(scope){function AnalyzerRecognitionData(){}AnalyzerRecognitionData.prototype=new scope.AbstractRecognitionData,AnalyzerRecognitionData.prototype.constructor=AnalyzerRecognitionData,AnalyzerRecognitionData.prototype.getAnalyzerRecognitionInput=function(){return this.analyzerInput},AnalyzerRecognitionData.prototype.setAnalyzerRecognitionInput=function(input){this.analyzerInput=JSON.stringify(input)},scope.AnalyzerRecognitionData=AnalyzerRecognitionData}(MyScript),function(scope){function AbstractResult(obj){obj&&(this.instanceId=obj.instanceId)}AbstractResult.prototype.getInstanceId=function(){return this.instanceId},AbstractResult.prototype.getDocument=function(){return this.result},scope.AbstractResult=AbstractResult}(MyScript),function(scope){function AbstractRecoResponseWSMessage(obj){scope.AbstractWSMessage.call(this,obj),obj&&(this.instanceId=obj.instanceId)}AbstractRecoResponseWSMessage.prototype=new scope.AbstractWSMessage,AbstractRecoResponseWSMessage.prototype.constructor=AbstractRecoResponseWSMessage,AbstractRecoResponseWSMessage.prototype.getInstanceId=function(){return this.instanceId},AbstractRecoResponseWSMessage.prototype.getDocument=function(){return this.result},scope.AbstractRecoResponseWSMessage=AbstractRecoResponseWSMessage}(MyScript),function(scope){function ChallengeResponseWSMessage(obj){scope.AbstractWSMessage.call(this,obj),obj&&(this.challenge=obj.challenge)}ChallengeResponseWSMessage.prototype=new scope.AbstractWSMessage,ChallengeResponseWSMessage.prototype.constructor=ChallengeResponseWSMessage,ChallengeResponseWSMessage.prototype.getChallenge=function(){return this.challenge},scope.ChallengeResponseWSMessage=ChallengeResponseWSMessage}(MyScript),function(scope){function ErrorResponseWSMessage(obj){scope.AbstractWSMessage.call(this,obj),obj&&(this.error=obj.error)}ErrorResponseWSMessage.prototype=new scope.AbstractWSMessage,ErrorResponseWSMessage.prototype.constructor=ErrorResponseWSMessage,ErrorResponseWSMessage.prototype.getError=function(){return this.error},scope.ErrorResponseWSMessage=ErrorResponseWSMessage}(MyScript),function(scope){function InitResponseWSMessage(obj){scope.AbstractWSMessage.call(this,obj)}InitResponseWSMessage.prototype=new scope.AbstractWSMessage,InitResponseWSMessage.prototype.constructor=InitResponseWSMessage,scope.InitResponseWSMessage=InitResponseWSMessage}(MyScript),function(scope){function ResetResponseWSMessage(obj){scope.AbstractWSMessage.call(this,obj)}ResetResponseWSMessage.prototype=new scope.AbstractWSMessage,ResetResponseWSMessage.prototype.constructor=ResetResponseWSMessage,scope.ResetResponseWSMessage=ResetResponseWSMessage}(MyScript),function(scope){function TextInkRange(obj){if(obj){var cpt=obj.split(/[:-]+/);this.startUnit=Number(cpt[0]),this.startComponent=Number(cpt[1]),this.startPoint=Number(cpt[2]),this.endUnit=Number(cpt[3]),this.endComponent=Number(cpt[4]),this.endPoint=Number(cpt[5])}}TextInkRange.prototype.getStartUnit=function(){return this.startUnit},TextInkRange.prototype.getEndUnit=function(){return this.endUnit},TextInkRange.prototype.getStartComponent=function(){return this.startComponent},TextInkRange.prototype.getEndComponent=function(){return this.endComponent},TextInkRange.prototype.getStartPoint=function(){return this.startPoint},TextInkRange.prototype.getEndPoint=function(){return this.endPoint},scope.TextInkRange=TextInkRange}(MyScript),function(scope){function TextCandidate(obj){if(this.flags=[],this.children=[],obj){this.label=obj.label,this.normalizedScore=obj.normalizedScore,this.spellingDistortionRatio=obj.spellingDistortionRatio;for(var i in obj.flags)this.flags.push(obj.flags[i]);for(var j in obj.children)this.children.push(new scope.TextSegment(obj.children[j]))}}TextCandidate.prototype.getLabel=function(){return this.label},TextCandidate.prototype.getNormalizedScore=function(){return this.normalizedScore},TextCandidate.prototype.getResemblanceScore=function(){return this.resemblanceScore},TextCandidate.prototype.getSpellingDistortionRatio=function(){return this.spellingDistortionRatio},TextCandidate.prototype.getFlags=function(){return this.flags},TextCandidate.prototype.getChildren=function(){return this.children},scope.TextCandidate=TextCandidate}(MyScript),function(scope){function TextDocument(obj){if(this.tagItems=[],this.wordCandidates=[],this.charCandidates=[],obj){obj.textSegmentResult&&(this.textSegmentResult=new scope.TextSegment(obj.textSegmentResult));for(var i in obj.tagItems)this.tagItems.push(new scope.TextTagItem(obj.tagItems[i]));for(var j in obj.wordCandidates)this.wordCandidates.push(new scope.TextSegment(obj.wordCandidates[j]));for(var k in obj.charCandidates)this.charCandidates.push(new scope.TextSegment(obj.charCandidates[k]))}}TextDocument.prototype.getTagItems=function(){return this.tagItems},TextDocument.prototype.getWordSegments=function(){return this.wordCandidates},TextDocument.prototype.getWordSegment=function(inkRanges){for(var i=0;i<this.getWordSegments().length;i++)if(JSON.stringify(this.getWordSegments()[i].getInkRanges())===JSON.stringify(inkRanges))return this.getWordSegments()[i];return void 0},TextDocument.prototype.getCharSegments=function(){return this.charCandidates},TextDocument.prototype.getCharSegment=function(inkRanges){for(var i=0;i<this.getCharSegments().length;i++)if(JSON.stringify(this.getCharSegments()[i].getInkRanges())===JSON.stringify(inkRanges))return this.getCharSegments()[i];return void 0},TextDocument.prototype.getTextSegment=function(){return this.textSegmentResult},TextDocument.prototype.hasScratchOutResults=function(){return!1},scope.TextDocument=TextDocument}(MyScript),function(scope){function TextResult(obj){scope.AbstractResult.call(this,obj),obj&&(this.result=new scope.TextDocument(obj.result))}TextResult.prototype=new scope.AbstractResult,TextResult.prototype.constructor=TextResult,TextResult.prototype.getTextDocument=function(){return this.result},scope.TextResult=TextResult}(MyScript),function(scope){function TextSegment(obj){if(this.candidates=[],this.inkRanges=[],obj){if(this.selectedCandidateIdx=obj.selectedCandidateIdx,obj.inkRanges){var ranges=obj.inkRanges.split(/[\s]+/);for(var j in ranges)this.inkRanges.push(new scope.TextInkRange(ranges[j]))}for(var i in obj.candidates)this.candidates.push(new scope.TextCandidate(obj.candidates[i]))}}TextSegment.prototype.getCandidates=function(){return this.candidates},TextSegment.prototype.getSelectedCandidateIdx=function(){return this.selectedCandidateIdx},TextSegment.prototype.getSelectedCandidate=function(){return this.getCandidates().length>0&&void 0!==this.getSelectedCandidateIdx()?this.getCandidates()[this.getSelectedCandidateIdx()]:void 0},TextSegment.prototype.getInkRanges=function(){return this.inkRanges},scope.TextSegment=TextSegment}(MyScript),function(scope){function TextTagItem(obj){if(this.inkRanges=[],obj&&(this.tagType=obj.tagType,obj.inkRanges)){var ranges=obj.inkRanges.split(/[\s]+/);for(var i in ranges)this.inkRanges.push(new scope.TextInkRange(ranges[i]))}}TextTagItem.prototype.getTagType=function(){return this.tagType},TextTagItem.prototype.getInkRanges=function(){return this.inkRanges},scope.TextTagItem=TextTagItem}(MyScript),function(scope){function TextResponseWSMessage(obj){scope.AbstractRecoResponseWSMessage.call(this,obj),obj&&(this.result=new scope.TextDocument(obj.result))}TextResponseWSMessage.prototype=new scope.AbstractRecoResponseWSMessage,TextResponseWSMessage.prototype.constructor=TextResponseWSMessage,TextResponseWSMessage.prototype.getTextDocument=function(){return this.result},scope.TextResponseWSMessage=TextResponseWSMessage}(MyScript),function(scope){function AbstractShapePrimitive(obj){obj&&(this.type=obj.type,this.beginDecoration=obj.beginDecoration,this.beginTangentAngle=obj.beginTangentAngle,this.endDecoration=obj.endDecoration,this.endTangentAngle=obj.endTangentAngle)}AbstractShapePrimitive.prototype.getType=function(){return this.type},AbstractShapePrimitive.prototype.isLine=function(){return"line"===this.type},AbstractShapePrimitive.prototype.isEllipse=function(){return"ellipse"===this.type},AbstractShapePrimitive.prototype.hasBeginDecoration=function(){return"undefined"!=typeof this.beginDecoration},AbstractShapePrimitive.prototype.hasEndDecoration=function(){return"undefined"!=typeof this.endDecoration},AbstractShapePrimitive.prototype.getBeginDecoration=function(){return this.beginDecoration},AbstractShapePrimitive.prototype.getEndDecoration=function(){return this.endDecoration},AbstractShapePrimitive.prototype.getBeginTangentAngle=function(){return this.beginTangentAngle},AbstractShapePrimitive.prototype.getEndTangentAngle=function(){return this.endTangentAngle},scope.AbstractShapePrimitive=AbstractShapePrimitive}(MyScript),function(scope){function ShapeCandidate(obj){obj&&(this.type=obj.type)}ShapeCandidate.prototype.getType=function(){return this.type},ShapeCandidate.prototype.isErased=function(){return"erased"===this.type},ShapeCandidate.prototype.isScratchOut=function(){return"scratchOut"===this.type},ShapeCandidate.prototype.isNotRecognized=function(){return"notRecognized"===this.type},ShapeCandidate.prototype.isRecognized=function(){return"recognizedShape"===this.type},scope.ShapeCandidate=ShapeCandidate}(MyScript),function(scope){function ShapeDocument(obj){if(this.segments=[],obj)for(var i in obj.segments)this.segments.push(new scope.ShapeSegment(obj.segments[i]))}ShapeDocument.prototype.getSegments=function(){return this.segments},ShapeDocument.prototype.hasScratchOutResults=function(){for(var i in this.getSegments()){var currentSeg=this.getSegments()[i];for(var j in currentSeg.getCandidates()){var currentCandidate=currentSeg.getCandidates()[j];if(currentCandidate instanceof scope.ShapeScratchOut)return!0}}return!1},scope.ShapeDocument=ShapeDocument}(MyScript),function(scope){function ShapeEllipse(obj){scope.AbstractShapePrimitive.call(this,obj),obj&&(this.center=new scope.Point(obj.center),this.minRadius=obj.minRadius,this.maxRadius=obj.maxRadius,this.orientation=obj.orientation,this.startAngle=obj.startAngle,this.sweepAngle=obj.sweepAngle)}ShapeEllipse.prototype=new scope.AbstractShapePrimitive,ShapeEllipse.prototype.constructor=ShapeEllipse,ShapeEllipse.prototype.getCenter=function(){return this.center},ShapeEllipse.prototype.getMinRadius=function(){return this.minRadius},ShapeEllipse.prototype.getMaxRadius=function(){return this.maxRadius},ShapeEllipse.prototype.getOrientation=function(){return this.orientation},ShapeEllipse.prototype.getStartAngle=function(){return this.startAngle},ShapeEllipse.prototype.getSweepAngle=function(){return this.sweepAngle},scope.ShapeEllipse=ShapeEllipse}(MyScript),function(scope){function ShapeErased(obj){scope.ShapeCandidate.call(this,obj)}ShapeErased.prototype=new scope.ShapeCandidate,ShapeErased.prototype.constructor=ShapeErased,scope.ShapeErased=ShapeErased}(MyScript),function(scope){function ShapeInkRange(obj){obj&&(this.firstStroke=obj.firstStroke,this.lastStroke=obj.lastStroke,this.firstPoint=obj.firstPoint,this.lastPoint=obj.lastPoint)}ShapeInkRange.prototype.getFirstStroke=function(){return this.firstStroke},ShapeInkRange.prototype.getLastStroke=function(){return this.lastStroke},ShapeInkRange.prototype.getFirstPoint=function(){return this.firstPoint},ShapeInkRange.prototype.getLastPoint=function(){return this.lastPoint},scope.ShapeInkRange=ShapeInkRange}(MyScript),function(scope){function ShapeLine(obj){scope.AbstractShapePrimitive.call(this,obj),obj&&(this.firstPoint=new scope.Point(obj.firstPoint),this.lastPoint=new scope.Point(obj.lastPoint))}ShapeLine.prototype=new scope.AbstractShapePrimitive,ShapeLine.prototype.constructor=ShapeLine,ShapeLine.prototype.getFirstPoint=function(){return this.firstPoint},ShapeLine.prototype.getLastPoint=function(){return this.lastPoint},scope.ShapeLine=ShapeLine}(MyScript),function(scope){function ShapeNotRecognized(obj){scope.ShapeCandidate.call(this,obj)}ShapeNotRecognized.prototype=new scope.ShapeCandidate,ShapeNotRecognized.prototype.constructor=ShapeNotRecognized,scope.ShapeNotRecognized=ShapeNotRecognized}(MyScript),function(scope){function ShapeRecognized(obj){if(scope.ShapeCandidate.call(this,obj),this.primitives=[],obj){this.label=obj.label,this.normalizedRecognitionScore=obj.normalizedRecognitionScore,this.resemblanceScore=obj.resemblanceScore;for(var i in obj.primitives)switch(obj.primitives[i].type){case"line":this.primitives.push(new scope.ShapeLine(obj.primitives[i]));break;case"ellipse":this.primitives.push(new scope.ShapeEllipse(obj.primitives[i]));break;default:throw new Error("Unknown shape primitive")}}}ShapeRecognized.prototype=new scope.ShapeCandidate,ShapeRecognized.prototype.constructor=ShapeRecognized,ShapeRecognized.prototype.getPrimitives=function(){return this.primitives},ShapeRecognized.prototype.getLabel=function(){return this.label},ShapeRecognized.prototype.getNormalizedRecognitionScore=function(){return this.normalizedRecognitionScore},ShapeRecognized.prototype.getResemblanceScore=function(){return this.resemblanceScore},scope.ShapeRecognized=ShapeRecognized}(MyScript),function(scope){function ShapeResult(obj){scope.AbstractResult.call(this,obj),obj&&(this.result=new scope.ShapeDocument(obj.result))}ShapeResult.prototype=new scope.AbstractResult,ShapeResult.prototype.constructor=ShapeResult,ShapeResult.prototype.getShapeDocument=function(){return this.result},scope.ShapeResult=ShapeResult}(MyScript),function(scope){function ShapeScratchOut(obj){if(scope.ShapeCandidate.call(this,obj),this.inkRanges=[],obj)for(var j in obj.inkRanges)this.inkRanges.push(new scope.ShapeInkRange(obj.inkRanges[j]))}ShapeScratchOut.prototype=new scope.ShapeCandidate,ShapeScratchOut.prototype.constructor=ShapeScratchOut,ShapeScratchOut.prototype.getInkRanges=function(){return this.inkRanges},scope.ShapeScratchOut=ShapeScratchOut}(MyScript),function(scope){function ShapeSegment(obj){if(this.inkRanges=[],this.candidates=[],obj){this.elementType=obj.elementType,this.uniqueID=obj.uniqueID,this.selectedCandidateIndex=obj.selectedCandidateIndex;for(var i in obj.candidates)switch(obj.candidates[i].type){case"erased":this.candidates.push(new scope.ShapeErased(obj.candidates[i]));break;case"scratchOut":this.candidates.push(new scope.ShapeScratchOut(obj.candidates[i]));break;case"recognizedShape":this.candidates.push(new scope.ShapeRecognized(obj.candidates[i]));break;default:this.candidates.push(new scope.ShapeNotRecognized(obj.candidates[i]))}for(var j in obj.inkRanges)this.inkRanges.push(new scope.ShapeInkRange(obj.inkRanges[j]))}}ShapeSegment.prototype.getElementType=function(){return this.elementType},ShapeSegment.prototype.getUniqueId=function(){return this.uniqueID},ShapeSegment.prototype.getInkRanges=function(){return this.inkRanges},ShapeSegment.prototype.getSelectedCandidateIdx=function(){return this.selectedCandidateIndex},ShapeSegment.prototype.getCandidates=function(){return this.candidates},ShapeSegment.prototype.getSelectedCandidate=function(){return this.getCandidates().length>0&&void 0!==this.getSelectedCandidateIdx()?this.getCandidates()[this.getSelectedCandidateIdx()]:void 0},scope.ShapeSegment=ShapeSegment}(MyScript),function(scope){function MathNode(obj){obj&&(this.name=obj.name,this.type=obj.type)}MathNode.prototype.getName=function(){return this.name},MathNode.prototype.getType=function(){return this.type},scope.MathNode=MathNode}(MyScript),function(scope){function MathNonTerminalNode(obj){if(scope.MathNode.call(this,obj),this.candidates=[],obj){this.selectedCandidate=obj.selectedCandidate;for(var i in obj.candidates)switch(obj.candidates[i].type){case"nonTerminalNode":this.candidates.push(new scope.MathNonTerminalNode(obj.candidates[i]));break;case"terminalNode":this.candidates.push(new scope.MathTerminalNode(obj.candidates[i]));break;case"rule":this.candidates.push(new scope.MathRuleNode(obj.candidates[i]));break;case"cell":this.candidates.push(new scope.MathCellNonTerminalNode(obj.candidates[i]));break;case"border":this.candidates.push(new scope.MathBorderNonTerminalNode(obj.candidates[i]));break;case"table":this.candidates.push(new scope.MathTableRuleNode(obj.candidates[i]));break;default:throw new Error("Unknown math node type: "+obj.candidates[i].type)}}}MathNonTerminalNode.prototype=new scope.MathNode,MathNonTerminalNode.prototype.constructor=MathNonTerminalNode,MathNonTerminalNode.prototype.getCandidates=function(){return this.candidates},MathNonTerminalNode.prototype.getSelectedCandidateIdx=function(){return this.selectedCandidate},MathNonTerminalNode.prototype.getSelectedCandidate=function(){return this.getCandidates().length>0&&void 0!==this.getSelectedCandidateIdx()?this.getCandidates()[this.getSelectedCandidateIdx()]:void 0},MathNonTerminalNode.prototype.getInkRanges=function(){if(this.getSelectedCandidate())return this.getSelectedCandidate().getInkRanges();throw new Error("No selected candidate")},scope.MathNonTerminalNode=MathNonTerminalNode}(MyScript),function(scope){function MathResultElement(obj){obj&&(this.type=obj.type)}MathResultElement.prototype.getType=function(){return this.type},MathResultElement.prototype.isLaTex=function(){return"LATEX"===this.type},MathResultElement.prototype.isMathMl=function(){return"MATHML"===this.type},MathResultElement.prototype.isSymbolTree=function(){return"SYMBOLTREE"===this.type},scope.MathResultElement=MathResultElement}(MyScript),function(scope){"use strict";function MathRuleNode(obj){if(scope.MathNode.call(this,obj),this.children=[],obj){this.name=obj.name;for(var i in obj.children)switch(obj.children[i].type){case"nonTerminalNode":this.children.push(new scope.MathNonTerminalNode(obj.children[i]));break;case"terminalNode":this.children.push(new scope.MathTerminalNode(obj.children[i]));break;case"rule":this.children.push(new scope.MathRuleNode(obj.children[i]));break;case"cell":this.children.push(new scope.MathCellNonTerminalNode(obj.children[i]));break;case"border":this.children.push(new scope.MathBorderNonTerminalNode(obj.children[i]));break;case"table":this.children.push(new scope.MathTableRuleNode(obj.children[i]));break;default:throw new Error("Unknown math node type: "+obj.children[i].type)}}}MathRuleNode.prototype=new scope.MathNode,MathRuleNode.prototype.constructor=MathRuleNode,MathRuleNode.prototype.getName=function(){return this.name},MathRuleNode.prototype.getChildren=function(){return this.children},MathRuleNode.prototype.getInkRanges=function(){var inkRanges=[];for(var i in this.getChildren()){var childInkRanges=this.getChildren()[i].getInkRanges();for(var j in childInkRanges)inkRanges.push(childInkRanges[j])}return inkRanges},scope.MathRuleNode=MathRuleNode}(MyScript),function(scope){function MathDocument(obj){if(this.results=[],this.scratchOutResults=[],obj){for(var i in obj.results){var result=obj.results[i];switch(result.type){case"MATHML":
this.results.push(new scope.MathMathMLResultElement(result));break;case"LATEX":this.results.push(new scope.MathLaTexResultElement(result));break;case"SYMBOLTREE":this.results.push(new scope.MathSymbolTreeResultElement(result));break;default:throw new Error("Unknown math result type: "+result.type)}}for(var j in obj.scratchOutResults)this.scratchOutResults.push(new scope.MathScratchOut(obj.scratchOutResults[j]))}}MathDocument.prototype.getResultElements=function(){return this.results},MathDocument.prototype.getScratchOutResults=function(){return this.scratchOutResults},MathDocument.prototype.hasScratchOutResults=function(){return this.getScratchOutResults()&&this.getScratchOutResults().length>0?!0:!1},scope.MathDocument=MathDocument}(MyScript),function(scope){function MathInkRange(obj){obj&&(this.component=obj.component,this.firstItem=obj.firstItem,this.lastItem=obj.lastItem)}MathInkRange.prototype.getComponent=function(){return this.component},MathInkRange.prototype.getFirstItem=function(){return this.firstItem},MathInkRange.prototype.getLastItem=function(){return this.lastItem},scope.MathInkRange=MathInkRange}(MyScript),function(scope){function MathLaTexResultElement(obj){scope.MathResultElement.call(this,obj),obj&&(this.value=obj.value)}MathLaTexResultElement.prototype=new scope.MathResultElement,MathLaTexResultElement.prototype.constructor=MathLaTexResultElement,MathLaTexResultElement.prototype.getValue=function(){return this.value},scope.MathLaTexResultElement=MathLaTexResultElement}(MyScript),function(scope){function MathMathMLResultElement(obj){scope.MathResultElement.call(this,obj),obj&&(this.value=obj.value)}MathMathMLResultElement.prototype=new scope.MathResultElement,MathMathMLResultElement.prototype.constructor=MathMathMLResultElement,MathMathMLResultElement.prototype.getValue=function(){return this.value},scope.MathMathMLResultElement=MathMathMLResultElement}(MyScript),function(scope){function MathResult(obj){scope.AbstractResult.call(this,obj),obj&&(this.result=new scope.MathDocument(obj.result))}MathResult.prototype=new scope.AbstractResult,MathResult.prototype.constructor=MathResult,MathResult.prototype.getMathDocument=function(){return this.result},scope.MathResult=MathResult}(MyScript),function(scope){function MathScratchOut(obj){if(this.inkRanges=[],this.erasedInkRanges=[],obj){for(var i in obj.inkRanges)this.inkRanges.push(new scope.MathInkRange(obj.inkRanges[i]));for(var j in obj.erasedInkRanges)this.erasedInkRanges.push(new scope.MathInkRange(obj.erasedInkRanges[j]))}}MathScratchOut.prototype.getInkRanges=function(){return this.inkRanges},MathScratchOut.prototype.getErasedInkRanges=function(){return this.erasedInkRanges},scope.MathScratchOut=MathScratchOut}(MyScript),function(scope){function MathSymbolTreeResultElement(obj){if(scope.MathResultElement.call(this,obj),obj){if(!obj.root)throw new Error("Missing root");switch(obj.root.type){case"nonTerminalNode":this.root=new scope.MathNonTerminalNode(obj.root);break;case"terminalNode":this.root=new scope.MathTerminalNode(obj.root);break;case"rule":this.root=new scope.MathRuleNode(obj.root);break;case"cell":this.root=new scope.MathCellNonTerminalNode(obj.root);break;case"border":this.root=new scope.MathBorderNonTerminalNode(obj.root);break;case"table":this.root=new scope.MathTableRuleNode(obj.root);break;default:throw new Error("Unknown math node type: "+obj.root.type)}this.value=JSON.stringify(obj.root,null,"  ")}}MathSymbolTreeResultElement.prototype=new scope.MathResultElement,MathSymbolTreeResultElement.prototype.constructor=MathSymbolTreeResultElement,MathSymbolTreeResultElement.prototype.getRoot=function(){return this.root},MathSymbolTreeResultElement.prototype.getInkRanges=function(){if(this.getRoot())return this.getRoot().getInkRanges();throw new Error("No selected candidate")},MathSymbolTreeResultElement.prototype.getValue=function(){return this.value},scope.MathSymbolTreeResultElement=MathSymbolTreeResultElement}(MyScript),function(scope){function MathTerminalNode(obj){if(scope.MathNode.call(this,obj),this.candidates=[],this.inkRanges=[],obj){this.selectedCandidate=obj.selectedCandidate;for(var i in obj.candidates)this.candidates.push(new scope.MathTerminalNodeCandidate(obj.candidates[i]));for(var j in obj.inkRanges)this.inkRanges.push(new scope.MathInkRange(obj.inkRanges[j]))}}MathTerminalNode.prototype=new scope.MathNode,MathTerminalNode.prototype.constructor=MathTerminalNode,MathTerminalNode.prototype.getCandidates=function(){return this.candidates},MathTerminalNode.prototype.getInkRanges=function(){return this.inkRanges},MathTerminalNode.prototype.getSelectedCandidateIdx=function(){return this.selectedCandidate},MathTerminalNode.prototype.getSelectedCandidate=function(){return this.getCandidates().length>0&&void 0!==this.getSelectedCandidateIdx()?this.getCandidates()[this.getSelectedCandidateIdx()]:void 0},scope.MathTerminalNode=MathTerminalNode}(MyScript),function(scope){function MathTerminalNodeCandidate(obj){obj&&(this.label=obj.label,this.normalizedRecognitionScore=obj.normalizedRecognitionScore)}MathTerminalNodeCandidate.prototype.getLabel=function(){return this.label},MathTerminalNodeCandidate.prototype.getNormalizedRecognitionScore=function(){return this.normalizedRecognitionScore},scope.MathTerminalNodeCandidate=MathTerminalNodeCandidate}(MyScript),function(scope){function MathBorderData(obj){obj&&(this.position=obj.position,this.start=obj.start,this.stop=obj.stop,this.type=obj.type)}MathBorderData.prototype.getPosition=function(){return this.position},MathBorderData.prototype.getStart=function(){return this.start},MathBorderData.prototype.getStop=function(){return this.stop},MathBorderData.prototype.getType=function(){return this.type},scope.MathBorderData=MathBorderData}(MyScript),function(scope){function MathBorderNonTerminalNode(obj){scope.MathNonTerminalNode.call(this,obj),obj&&(this.data=new scope.MathBorderData(obj.data))}MathBorderNonTerminalNode.prototype=new scope.MathNonTerminalNode,MathBorderNonTerminalNode.prototype.constructor=MathBorderNonTerminalNode,MathBorderNonTerminalNode.prototype.getData=function(){return this.data},scope.MathBorderNonTerminalNode=MathBorderNonTerminalNode}(MyScript),function(scope){function MathCellData(obj){obj&&(this.columnStart=obj.columnStart,this.columnStop=obj.columnStop,this.rowStart=obj.rowStart,this.rowStop=obj.rowStop)}MathCellData.prototype.getColumnStart=function(){return this.columnStart},MathCellData.prototype.getColumnStop=function(){return this.columnStop},MathCellData.prototype.getRowStart=function(){return this.rowStart},MathCellData.prototype.getRowStop=function(){return this.rowStop},scope.MathCellData=MathCellData}(MyScript),function(scope){function MathCellNonTerminalNode(obj){scope.MathNonTerminalNode.call(this,obj),obj&&(this.data=new scope.MathCellData(obj.data))}MathCellNonTerminalNode.prototype=new scope.MathNonTerminalNode,MathCellNonTerminalNode.prototype.constructor=MathCellNonTerminalNode,MathCellNonTerminalNode.prototype.getData=function(){return this.data},scope.MathCellNonTerminalNode=MathCellNonTerminalNode}(MyScript),function(scope){function MathTableData(obj){obj&&(this.columnCount=obj.columnCount,this.rowCount=obj.rowCount)}MathTableData.prototype.getColumnCount=function(){return this.columnCount},MathTableData.prototype.getRowCount=function(){return this.rowCount},scope.MathTableData=MathTableData}(MyScript),function(scope){function MathTableRuleNode(obj){scope.MathRuleNode.call(this,obj),obj&&(this.data=new scope.MathTableData(obj.data))}MathTableRuleNode.prototype=new scope.MathRuleNode,MathTableRuleNode.prototype.constructor=MathTableRuleNode,MathTableRuleNode.prototype.getData=function(){return this.data},scope.MathTableRuleNode=MathTableRuleNode}(MyScript),function(scope){function MathResponseWSMessage(obj){scope.AbstractRecoResponseWSMessage.call(this,obj),obj&&(this.result=new scope.MathDocument(obj.result))}MathResponseWSMessage.prototype=new scope.AbstractRecoResponseWSMessage,MathResponseWSMessage.prototype.constructor=MathResponseWSMessage,MathResponseWSMessage.prototype.getMathDocument=function(){return this.result},scope.MathResponseWSMessage=MathResponseWSMessage}(MyScript),function(scope){function MusicElement(obj){obj&&(this.inputRanges=[],this.elementType=obj.elementType,this.inputRanges=obj.inputRanges)}MusicElement.prototype.getElementType=function(){return this.elementType},MusicElement.prototype.getInputRanges=function(){return this.inputRanges},scope.MusicElement=MusicElement}(MyScript),function(scope){function MusicResultElement(obj){obj&&(this.type=obj.type)}MusicResultElement.prototype.getType=function(){return this.type},MusicResultElement.prototype.isMusicXML=function(){return"MUSICXML"===this.type},MusicResultElement.prototype.isScoreTree=function(){return"SCORETREE"===this.type},scope.MusicResultElement=MusicResultElement}(MyScript),function(scope){function MusicAccidental(obj){scope.MusicElement.call(this,obj),obj&&(this.type=obj.type)}MusicAccidental.prototype=new scope.MusicElement,MusicAccidental.prototype.constructor=MusicAccidental,MusicAccidental.prototype.getType=function(){return this.type},scope.MusicAccidental=MusicAccidental}(MyScript),function(scope){function MusicAnnotation(obj){scope.MusicElement.call(this,obj),obj&&(this.label=obj.label)}MusicAnnotation.prototype=new scope.MusicElement,MusicAnnotation.prototype.constructor=MusicAnnotation,MusicAnnotation.prototype.getLabel=function(){return this.label},scope.MusicAnnotation=MusicAnnotation}(MyScript),function(scope){function MusicArpeggiate(obj){scope.MusicElement.call(this,obj),obj&&(this.type=obj.type)}MusicArpeggiate.prototype=new scope.MusicElement,MusicArpeggiate.prototype.constructor=MusicArpeggiate,MusicArpeggiate.prototype.getType=function(){return this.type},scope.MusicArpeggiate=MusicArpeggiate}(MyScript),function(scope){function MusicBar(obj){if(scope.MusicElement.call(this,obj),this.decorations=[],obj){this.repeatDirection=obj.repeatDirection,this.style=obj.style;for(var i in obj.decorations)this.decorations.push(new scope.MusicDecoration(obj.decorations[i]))}}MusicBar.prototype=new scope.MusicElement,MusicBar.prototype.constructor=MusicBar,MusicBar.prototype.getRepeatDirection=function(){return this.repeatDirection},MusicBar.prototype.setRepeatDirection=function(repeatDirection){this.repeatDirection=repeatDirection},MusicBar.prototype.getStyle=function(){return this.style},MusicBar.prototype.setStyle=function(style){this.style=style},MusicBar.prototype.getDecorations=function(){return this.decorations},MusicBar.prototype.setDecorations=function(decorations){this.decorations=decorations},scope.MusicBar=MusicBar}(MyScript),function(scope){function MusicBeam(obj){scope.MusicElement.call(this,obj),obj&&(this.gap=obj.gap,this.slope=obj.slope,this.placement=obj.placement,this.leftCount=obj.leftCount,this.rightCount=obj.rightCount)}MusicBeam.prototype=new scope.MusicElement,MusicBeam.prototype.constructor=MusicBeam,MusicBeam.prototype.getGap=function(){return this.gap},MusicBeam.prototype.setGap=function(gap){this.gap=gap},MusicBeam.prototype.getSlope=function(){return this.slope},MusicBeam.prototype.setSlope=function(slope){this.slope=slope},MusicBeam.prototype.getPlacement=function(){return this.placement},MusicBeam.prototype.setPlacement=function(placement){this.placement=placement},MusicBeam.prototype.getLeftCount=function(){return this.leftCount},MusicBeam.prototype.setLeftCount=function(leftCount){this.leftCount=leftCount},MusicBeam.prototype.getRightCount=function(){return this.rightCount},MusicBeam.prototype.setRightCount=function(rightCount){this.rightCount=rightCount},scope.MusicBeam=MusicBeam}(MyScript),function(scope){function MusicChord(obj){if(scope.MusicElement.call(this,obj),this.decorations=[],this.notes=[],this.beamTypes=[],this.ledgerLines=[],this.startSlurs=[],this.stopSlurs=[],obj){this.duration=obj.duration,this.arpeggiate=new scope.MusicArpeggiate(obj.arpeggiate),this.startBeam=new scope.MusicBeam(obj.startBeam),this.stopBeam=new scope.MusicBeam(obj.stopBeam),this.stem=new scope.MusicStem(obj.stem);for(var i in obj.decorations)this.decorations.push(new scope.MusicDecoration(obj.decorations[i]));for(var j in obj.notes)this.notes.push(new scope.MusicNote(obj.notes[j]));for(var k in obj.beamTypes)this.beamTypes.push(obj.beamTypes[k]);for(var l in obj.ledgerLines)this.ledgerLines.push(new scope.MusicLedgerLine(obj.ledgerLines[l]));for(var m in obj.startSlurs)this.startSlurs.push(new scope.MusicSlur(obj.startSlurs[m]));for(var n in obj.stopSlurs)this.stopSlurs.push(new scope.MusicSlur(obj.stopSlurs[n]))}}MusicChord.prototype=new scope.MusicElement,MusicChord.prototype.constructor=MusicChord,MusicChord.prototype.getDuration=function(){return this.duration},MusicChord.prototype.getArpeggiate=function(){return this.arpeggiate},MusicChord.prototype.getStartBeam=function(){return this.startBeam},MusicChord.prototype.getStopBeam=function(){return this.stopBeam},MusicChord.prototype.getStem=function(){return this.stem},MusicChord.prototype.getDecorations=function(){return this.decorations},MusicChord.prototype.getNotes=function(){return this.notes},MusicChord.prototype.getBeamTypes=function(){return this.beamTypes},MusicChord.prototype.getLedgerLines=function(){return this.ledgerLines},MusicChord.prototype.getStartSlurs=function(){return this.startSlurs},MusicChord.prototype.getStopSlurs=function(){return this.stopSlurs},scope.MusicChord=MusicChord}(MyScript),function(scope){function MusicClef(obj){scope.MusicElement.call(this,obj),this.symbol="G",this.octave=0,obj&&(this.line=obj.line,this.yAnchor=obj.yAnchor,this.octave=obj.octave,this.symbol=obj.symbol)}MusicClef.prototype=new scope.MusicElement,MusicClef.prototype.constructor=MusicClef,MusicClef.prototype.getYAnchor=function(){return this.yAnchor},MusicClef.prototype.setYAnchor=function(yAnchor){this.yAnchor=yAnchor},MusicClef.prototype.getLine=function(){return this.line},MusicClef.prototype.setLine=function(line){this.line=line},MusicClef.prototype.getOctave=function(){return this.octave},MusicClef.prototype.setOctave=function(octave){this.octave=octave},MusicClef.prototype.getSymbol=function(){return this.symbol},MusicClef.prototype.setSymbol=function(symbol){this.symbol=symbol},scope.MusicClef=MusicClef}(MyScript),function(scope){function MusicDecoration(obj){scope.MusicElement.call(this,obj),obj&&(this.symbol=obj.symbol,this.placement=obj.placement)}MusicDecoration.prototype=new scope.MusicElement,MusicDecoration.prototype.constructor=MusicDecoration,MusicDecoration.prototype.getSymbol=function(){return this.symbol},MusicDecoration.prototype.setSymbol=function(symbol){this.symbol=symbol},MusicDecoration.prototype.getPlacement=function(){return this.placement},MusicDecoration.prototype.setPlacement=function(placement){this.placement=placement},scope.MusicDecoration=MusicDecoration}(MyScript),function(scope){function MusicDocument(obj){if(this.results=[],this.scratchOutResults=[],obj){for(var i in obj.results)switch(obj.results[i].type){case"MUSICXML":this.results.push(new scope.MusicXMLResultElement(obj.results[i]));break;default:this.results.push(new scope.MusicScoreTreeResultElement(obj.results[i]))}for(var j in obj.scratchOutResults)this.scratchOutResults.push(new scope.MusicScratchOut(obj.scratchOutResults[j]))}}MusicDocument.prototype.getResultElements=function(){return this.results},MusicDocument.prototype.getScratchOutResults=function(){return this.scratchOutResults},MusicDocument.prototype.hasScratchOutResults=function(){return this.getScratchOutResults()&&this.getScratchOutResults().length>0?!0:!1},scope.MusicDocument=MusicDocument}(MyScript),function(scope){function MusicDots(obj){scope.MusicElement.call(this,obj),obj&&(this.count=obj.count)}MusicDots.prototype=new scope.MusicElement,MusicDots.prototype.constructor=MusicDots,MusicDots.prototype.getCount=function(){return this.count},scope.MusicDots=MusicDots}(MyScript),function(scope){function MusicHead(obj){scope.MusicElement.call(this,obj),obj&&(this.type=obj.type)}MusicHead.prototype=new scope.MusicElement,MusicHead.prototype.constructor=MusicHead,MusicHead.prototype.getType=function(){return this.type},scope.MusicHead=MusicHead}(MyScript),function(scope){function MusicInputRange(obj){obj&&(this.component=obj.component,this.firstItem=obj.firstItem,this.lastItem=obj.lastItem)}MusicInputRange.prototype.getComponent=function(){return this.component},MusicInputRange.prototype.getFirstItem=function(){return this.firstItem},MusicInputRange.prototype.getLastItem=function(){return this.lastItem},scope.MusicInputRange=MusicInputRange}(MyScript),function(scope){function MusicKeySignature(obj){if(scope.MusicElement.call(this,obj),this.accidentals=[],obj){this.signature=new scope.MusicKeySignatureData(obj.signature);for(var i in obj.accidentals)this.accidentals.push(new scope.MusicAccidental(obj.accidentals[i]))}}MusicKeySignature.prototype=new scope.MusicElement,MusicKeySignature.prototype.constructor=MusicKeySignature,MusicKeySignature.prototype.getSignature=function(){return this.signature},MusicKeySignature.prototype.getAccidentals=function(){return this.accidentals},scope.MusicKeySignature=MusicKeySignature}(MyScript),function(scope){function MusicKeySignatureData(obj){obj&&(this.fifths=obj.fifths,this.cancel=obj.cancel)}MusicKeySignatureData.prototype.getFifths=function(){return this.fifths},MusicKeySignatureData.prototype.getCancel=function(){return this.cancel},scope.MusicKeySignatureData=MusicKeySignatureData}(MyScript),function(scope){function MusicLedgerLine(obj){scope.MusicElement.call(this,obj)}MusicLedgerLine.prototype=new scope.MusicElement,MusicLedgerLine.prototype.constructor=MusicLedgerLine,scope.MusicLedgerLine=MusicLedgerLine}(MyScript),function(scope){function MusicNote(obj){if(scope.MusicElement.call(this,obj),this.decorations=[],this.beamTypes=[],this.ledgerLines=[],this.startSlurs=[],this.stopSlurs=[],obj){this.accidental=new scope.MusicAccidental(obj.accidental),this.dots=new scope.MusicDots(obj.dots),this.duration=obj.duration,this.head=new scope.MusicHead(obj.head),this.line=obj.line,this.pitch=new scope.MusicPitchData(obj.pitch),this.startBeam=new scope.MusicBeam(obj.startBeam),this.stopBeam=new scope.MusicBeam(obj.stopBeam),this.stem=new scope.MusicStem(obj.stem),this.startTie=new scope.MusicTie(obj.startTie),this.stopTie=new scope.MusicTie(obj.stopTie),this.startTuplet=new scope.MusicTuplet(obj.startTuplet),this.stopTuplet=new scope.MusicTuplet(obj.stopTuplet),this.timeModification=new scope.MusicTimeModificationData(obj.timeModification),this.type=obj.type;for(var i in obj.decorations)this.decorations.push(new scope.MusicDecoration(obj.decorations[i]));for(var j in obj.beamTypes)this.beamTypes.push(obj.beamTypes[j]);for(var k in obj.ledgerLines)this.ledgerLines.push(new scope.MusicLedgerLine(obj.ledgerLines[k]));for(var l in obj.startSlurs)this.startSlurs.push(new scope.MusicSlur(obj.startSlurs[l]));for(var m in obj.stopSlurs)this.stopSlurs.push(new scope.MusicSlur(obj.stopSlurs[m]))}}MusicNote.prototype=new scope.MusicElement,MusicNote.prototype.constructor=MusicNote,MusicNote.prototype.getAccidental=function(){return this.accidental},MusicNote.prototype.getDots=function(){return this.dots},MusicNote.prototype.getDuration=function(){return this.duration},MusicNote.prototype.getHead=function(){return this.head},MusicNote.prototype.getLine=function(){return this.line},MusicNote.prototype.getPitch=function(){return this.pitch},MusicNote.prototype.getStartBeam=function(){return this.startBeam},MusicNote.prototype.getStopBeam=function(){return this.stopBeam},MusicNote.prototype.getStem=function(){return this.stem},MusicNote.prototype.getStartTie=function(){return this.startTie},MusicNote.prototype.getStopTie=function(){return this.stopTie},MusicNote.prototype.getStartTuplet=function(){return this.startTuplet},MusicNote.prototype.getStopTuplet=function(){return this.stopTuplet},MusicNote.prototype.getTimeModification=function(){return this.timeModification},MusicNote.prototype.getType=function(){return this.type},MusicNote.prototype.getDecorations=function(){return this.decorations},MusicNote.prototype.getBeamTypes=function(){return this.beamTypes},MusicNote.prototype.getLedgerLines=function(){return this.ledgerLines},MusicNote.prototype.getStartSlurs=function(){return this.startSlurs},MusicNote.prototype.getStopSlurs=function(){return this.stopSlurs},scope.MusicNote=MusicNote}(MyScript),function(scope){function MusicPart(obj){if(this.elements=[],obj)for(var i in obj.elements)switch(obj.elements[i].elementType){case"accidental":this.elements.push(new scope.MusicAccidental(obj.elements[i]));break;case"annotation":this.elements.push(new scope.MusicAnnotation(obj.elements[i]));break;case"arpeggiate":this.elements.push(new scope.MusicArpeggiate(obj.elements[i]));break;case"bar":this.elements.push(new scope.MusicBar(obj.elements[i]));break;case"beam":this.elements.push(new scope.MusicBeam(obj.elements[i]));break;case"chord":this.elements.push(new scope.MusicChord(obj.elements[i]));break;case"clef":this.elements.push(new scope.MusicClef(obj.elements[i]));break;case"decoration":this.elements.push(new scope.MusicDecoration(obj.elements[i]));break;case"dots":this.elements.push(new scope.MusicDots(obj.elements[i]));break;case"head":this.elements.push(new scope.MusicHead(obj.elements[i]));break;case"keySignature":this.elements.push(new scope.MusicKeySignature(obj.elements[i]));break;case"ledgerLine":this.elements.push(new scope.MusicLedgerLine(obj.elements[i]));break;case"note":this.elements.push(new scope.MusicNote(obj.elements[i]));break;case"rest":this.elements.push(new scope.MusicRest(obj.elements[i]));break;case"slur":this.elements.push(new scope.MusicSlur(obj.elements[i]));break;case"stem":this.elements.push(new scope.MusicStem(obj.elements[i]));break;case"tie":this.elements.push(new scope.MusicTie(obj.elements[i]));break;case"timeSignature":this.elements.push(new scope.MusicTimeSignature(obj.elements[i]));break;case"tuplet":this.elements.push(new scope.MusicTuplet(obj.elements[i]));break;case"tupletBracket":this.elements.push(new scope.MusicTupletBracket(obj.elements[i]));break;default:throw new Error("Unknown music element")}}MusicPart.prototype.getElements=function(){return this.elements},scope.MusicPart=MusicPart}(MyScript),function(scope){function MusicPitchData(obj){obj&&(this.alteration=obj.alteration,this.octave=obj.octave,this.step=obj.step)}MusicPitchData.prototype.getAlteration=function(){return this.alteration},MusicPitchData.prototype.getOctave=function(){return this.octave},MusicPitchData.prototype.getStep=function(){return this.step},scope.MusicPitchData=MusicPitchData}(MyScript),function(scope){function MusicRest(obj){if(scope.MusicElement.call(this,obj),this.decorations=[],this.startSlurs=[],this.stopSlurs=[],obj){this.type=obj.type,this.dots=new scope.MusicDots(obj.dots),this.startTuplet=new scope.MusicTuplet(obj.startTuplet),this.stopTuplet=new scope.MusicTuplet(obj.stopTuplet),this.timeModification=new scope.MusicTimeModificationData(obj.timeModification),this.duration=obj.duration;for(var i in obj.decorations)this.decorations.push(new scope.MusicDecoration(obj.decorations[i]));for(var l in obj.startSlurs)this.startSlurs.push(new scope.MusicSlur(obj.startSlurs[l]));for(var m in obj.stopSlurs)this.stopSlurs.push(new scope.MusicSlur(obj.stopSlurs[m]))}}MusicRest.prototype=new scope.MusicElement,MusicRest.prototype.constructor=MusicRest,MusicRest.prototype.getType=function(){return this.type},MusicRest.prototype.getDots=function(){return this.dots},MusicRest.prototype.getStartTuplet=function(){return this.startTuplet},MusicRest.prototype.getStopTuplet=function(){return this.stopTuplet},MusicRest.prototype.getTimeModification=function(){return this.timeModification},MusicRest.prototype.getDuration=function(){return this.duration},MusicRest.prototype.getDecorations=function(){return this.decorations},MusicRest.prototype.getStartSlurs=function(){return this.startSlurs},MusicRest.prototype.getStopSlurs=function(){return this.stopSlurs},scope.MusicRest=MusicRest}(MyScript),function(scope){function MusicResult(obj){scope.AbstractResult.call(this,obj),obj&&(this.result=new scope.MusicDocument(obj.result))}MusicResult.prototype=new scope.AbstractResult,MusicResult.prototype.constructor=MusicResult,MusicResult.prototype.getMusicDocument=function(){return this.result},scope.MusicResult=MusicResult}(MyScript),function(scope){function MusicScore(obj){if(this.parts=[],obj)for(var i in obj.parts)this.parts.push(new scope.MusicPart(obj.parts[i]))}MusicScore.prototype.getParts=function(){return this.parts},scope.MusicScore=MusicScore}(MyScript),function(scope){function MusicScoreTreeResultElement(obj){scope.MusicResultElement.call(this,obj),obj&&(this.score=new scope.MusicScore(obj.score))}MusicScoreTreeResultElement.prototype=new scope.MusicResultElement,MusicScoreTreeResultElement.prototype.constructor=MusicScoreTreeResultElement,MusicScoreTreeResultElement.prototype.getScore=function(){return this.score},scope.MusicScoreTreeResultElement=MusicScoreTreeResultElement}(MyScript),function(scope){function MusicScratchOut(obj){if(this.inputRanges=[],this.erasedInputRanges=[],obj){for(var i in obj.inputRanges)this.inputRanges.push(new scope.MusicInputRange(obj.inputRanges[i]));for(var j in obj.erasedInputRanges)this.erasedInputRanges.push(new scope.MusicInputRange(obj.erasedInputRanges[j]))}}MusicScratchOut.prototype.getInputRanges=function(){return this.inputRanges},MusicScratchOut.prototype.getErasedInputRanges=function(){return this.erasedInputRanges},scope.MusicScratchOut=MusicScratchOut}(MyScript),function(scope){function MusicSlur(obj){scope.MusicElement.call(this,obj),obj&&(this.placement=obj.placement)}MusicSlur.prototype=new scope.MusicElement,MusicSlur.prototype.constructor=MusicSlur,MusicSlur.prototype.getPlacement=function(){return this.placement},scope.MusicSlur=MusicSlur}(MyScript),function(scope){function MusicStem(obj){scope.MusicElement.call(this,obj),obj&&(this.type=obj.type)}MusicStem.prototype=new scope.MusicElement,MusicStem.prototype.constructor=MusicStem,MusicStem.prototype.getType=function(){return this.type},scope.MusicStem=MusicStem}(MyScript),function(scope){function MusicTie(obj){scope.MusicElement.call(this,obj),obj&&(this.placement=obj.placement)}MusicTie.prototype=new scope.MusicElement,MusicTie.prototype.constructor=MusicTie,MusicTie.prototype.getPlacement=function(){return this.placement},scope.MusicTie=MusicTie}(MyScript),function(scope){function MusicTimeModificationData(obj){obj&&(this.actual=obj.actual,this.dots=obj.dots,this.normal=obj.normal,this.type=obj.type)}MusicTimeModificationData.prototype.getActual=function(){return this.actual},MusicTimeModificationData.prototype.getDots=function(){return this.dots},MusicTimeModificationData.prototype.getNormal=function(){return this.normal},MusicTimeModificationData.prototype.getType=function(){return this.type},scope.MusicTimeModificationData=MusicTimeModificationData}(MyScript),function(scope){function MusicTimeSignature(obj){scope.MusicElement.call(this,obj),obj&&(this.top=new scope.MusicAnnotation(obj.top),this.bottom=new scope.MusicAnnotation(obj.bottom),this.type=obj.type)}MusicTimeSignature.prototype=new scope.MusicElement,MusicTimeSignature.prototype.constructor=MusicTimeSignature,MusicTimeSignature.prototype.getTop=function(){return this.top},MusicTimeSignature.prototype.getBottom=function(){return this.bottom},MusicTimeSignature.prototype.getType=function(){return this.type},scope.MusicTimeSignature=MusicTimeSignature}(MyScript),function(scope){function MusicTupletBracket(obj){scope.MusicElement.call(this,obj),obj&&(this.type=obj.type)}MusicTupletBracket.prototype=new scope.MusicElement,MusicTupletBracket.prototype.constructor=MusicTupletBracket,MusicTupletBracket.prototype.getType=function(){return this.type},scope.MusicTupletBracket=MusicTupletBracket}(MyScript),function(scope){function MusicTuplet(obj){if(scope.MusicElement.call(this,obj),this.brackets=[],obj){this.placement=obj.placement,this.number=new scope.MusicAnnotation(obj.number);for(var i in obj.brackets)this.brackets.push(new scope.MusicTupletBracket(obj.brackets[i]))}}MusicTuplet.prototype=new scope.MusicElement,MusicTuplet.prototype.constructor=MusicTuplet,MusicTuplet.prototype.getPlacement=function(){return this.placement},MusicTuplet.prototype.getNumber=function(){return this.number},MusicTuplet.prototype.getBrackets=function(){return this.brackets},scope.MusicTuplet=MusicTuplet}(MyScript),function(scope){function MusicXMLResultElement(obj){scope.MusicResultElement.call(this,obj),obj&&(this.value=obj.value)}MusicXMLResultElement.prototype=new scope.MusicResultElement,MusicXMLResultElement.prototype.constructor=MusicXMLResultElement,MusicXMLResultElement.prototype.getValue=function(){return this.value},scope.MusicXMLResultElement=MusicXMLResultElement}(MyScript),function(scope){function AnalyzerElement(obj){obj&&(this.elementType=obj.elementType)}AnalyzerElement.prototype.getElementType=function(){return this.elementType},scope.AnalyzerElement=AnalyzerElement}(MyScript),function(scope){function AnalyzerCell(obj){scope.AnalyzerElement.call(this,obj),obj&&(this.data=new scope.AnalyzerCellData(obj.data))}AnalyzerCell.prototype=new scope.AnalyzerElement,AnalyzerCell.prototype.constructor=AnalyzerCell,AnalyzerCell.prototype.getData=function(){return this.data},scope.AnalyzerCell=AnalyzerCell}(MyScript),function(scope){function AnalyzerCellData(obj){obj&&(this.firstColumn=obj.firstColumn,this.lastColumn=obj.lastColumn,this.firstRow=obj.firstRow,this.lastRow=obj.lastRow,this.height=obj.height,this.width=obj.width,this.orientation=obj.orientation,this.topLeftPoint=new scope.Point(obj.topLeftPoint),this.topBorder=obj.topBorder,this.bottomBorder=obj.bottomBorder,this.leftBorder=obj.leftBorder,this.rightBorder=obj.rightBorder)}AnalyzerCellData.prototype.getFirstColumn=function(){return this.firstColumn},AnalyzerCellData.prototype.getLastColumn=function(){return this.lastColumn},AnalyzerCellData.prototype.getFirstRow=function(){return this.firstRow},AnalyzerCellData.prototype.getLastRow=function(){return this.lastRow},AnalyzerCellData.prototype.getHeight=function(){return this.height},AnalyzerCellData.prototype.getWidth=function(){return this.width},AnalyzerCellData.prototype.getOrientation=function(){return this.orientation},AnalyzerCellData.prototype.getTopLeftPoint=function(){return this.topLeftPoint},AnalyzerCellData.prototype.hasTopBorder=function(){return this.topBorder},AnalyzerCellData.prototype.hasBottomBorder=function(){return this.bottomBorder},AnalyzerCellData.prototype.hasLeftBorder=function(){return this.leftBorder},AnalyzerCellData.prototype.hasRightBorder=function(){return this.rightBorder},AnalyzerCellData.prototype.getBoundingBox=function(){var rectangle=new scope.Rectangle;return rectangle.setTopLeftPoint(this.getTopLeftPoint()),rectangle.setWidth(this.getWidth()),rectangle.setHeight(this.getHeight()),rectangle},scope.AnalyzerCellData=AnalyzerCellData}(MyScript),function(scope){function AnalyzerDocument(obj){if(scope.AnalyzerElement.call(this,obj),this.textLines=[],this.shapes=[],this.tables=[],this.groups=[],obj){for(var i in obj.textLines)this.textLines.push(new scope.AnalyzerTextLine(obj.textLines[i]));for(var j in obj.shapes)this.shapes.push(new scope.ShapeSegment(obj.shapes[j]));for(var k in obj.tables)this.tables.push(new scope.AnalyzerTable(obj.tables[k]));for(var l in obj.groups)this.groups.push(new scope.AnalyzerGroup(obj.groups[l]))}}AnalyzerDocument.prototype=new scope.AnalyzerElement,AnalyzerDocument.prototype.constructor=AnalyzerDocument,AnalyzerDocument.prototype.getTextLines=function(){return this.textLines},AnalyzerDocument.prototype.getShapes=function(){return this.shapes},AnalyzerDocument.prototype.getTables=function(){return this.tables},AnalyzerDocument.prototype.getGroups=function(){return this.groups;
},AnalyzerDocument.prototype.hasScratchOutResults=function(){for(var i in this.getShapes()){var currentSeg=this.getShapes()[i];for(var j in currentSeg.getCandidates()){var currentCandidate=currentSeg.getCandidates()[j];if(currentCandidate instanceof scope.ShapeScratchOut)return!0}}return!1},scope.AnalyzerDocument=AnalyzerDocument}(MyScript),function(scope){function AnalyzerElementReference(obj){obj&&(this.uniqueID=obj.uniqueID,this.type=obj.type)}AnalyzerElementReference.prototype.getUniqueId=function(){return this.uniqueID},AnalyzerElementReference.prototype.getType=function(){return this.type},scope.AnalyzerElementReference=AnalyzerElementReference}(MyScript),function(scope){function AnalyzerGroup(obj){if(scope.AnalyzerElement.call(this,obj),this.elementReferences=[],obj){this.type=obj.type,this.uniqueID=obj.uniqueID;for(var i in obj.elementReferences)this.elementReferences.push(new scope.AnalyzerElementReference(obj.elementReferences[i]))}}AnalyzerGroup.prototype=new scope.AnalyzerElement,AnalyzerGroup.prototype.constructor=AnalyzerGroup,AnalyzerGroup.prototype.getElementReferences=function(){return this.elementReferences},AnalyzerGroup.prototype.getType=function(){return this.type},AnalyzerGroup.prototype.getUniqueId=function(){return this.uniqueID},scope.AnalyzerGroup=AnalyzerGroup}(MyScript),function(scope){function AnalyzerInkRange(obj){obj&&(this.firstPoint=new scope.Point(obj.firstPoint),this.lastPoint=new scope.Point(obj.lastPoint),this.stroke=new scope.AnalyzerRecognizedStroke(obj.stroke))}AnalyzerInkRange.prototype.getFirstPoint=function(){return this.firstPoint},AnalyzerInkRange.prototype.getLastPoint=function(){return this.lastPoint},AnalyzerInkRange.prototype.getStroke=function(){return this.stroke},scope.AnalyzerInkRange=AnalyzerInkRange}(MyScript),function(scope){function AnalyzerLine(obj){scope.AnalyzerElement.call(this,obj),obj&&(this.data=new scope.AnalyzerLineData(obj.data))}AnalyzerLine.prototype=new scope.AnalyzerElement,AnalyzerLine.prototype.constructor=AnalyzerLine,AnalyzerLine.prototype.getData=function(){return this.data},scope.AnalyzerLine=AnalyzerLine}(MyScript),function(scope){function AnalyzerLineData(obj){obj&&(this.p1=new scope.Point(obj.p1),this.p2=new scope.Point(obj.p2))}AnalyzerLineData.prototype.getP1=function(){return this.p1},AnalyzerLineData.prototype.getP2=function(){return this.p2},scope.AnalyzerLineData=AnalyzerLineData}(MyScript),function(scope){function AnalyzerRecognizedStroke(obj){obj&&(this.type=obj.type,this.x=obj.x,this.y=obj.y)}AnalyzerRecognizedStroke.prototype.getType=function(){return this.type},AnalyzerRecognizedStroke.prototype.getX=function(){return this.x},AnalyzerRecognizedStroke.prototype.getY=function(){return this.y},scope.AnalyzerRecognizedStroke=AnalyzerRecognizedStroke}(MyScript),function(scope){function AnalyzerResult(obj){scope.AbstractResult.call(this,obj),obj&&(this.result=new scope.AnalyzerDocument(obj.result))}AnalyzerResult.prototype=new scope.AbstractResult,AnalyzerResult.prototype.constructor=AnalyzerResult,AnalyzerResult.prototype.getAnalyzerDocument=function(){return this.result},scope.AnalyzerResult=AnalyzerResult}(MyScript),function(scope){function AnalyzerStrokeType(obj){obj&&(this.inkRange=new scope.AnalyzerInkRange(obj.inkRange),this.type=obj.type)}AnalyzerStrokeType.prototype.getInkRange=function(){return this.inkRange},AnalyzerStrokeType.prototype.getType=function(){return this.type},scope.AnalyzerStrokeType=AnalyzerStrokeType}(MyScript),function(scope){function AnalyzerTable(obj){if(scope.AnalyzerElement.call(this,obj),this.lines=[],this.cells=[],this.inkRanges=[],obj){this.data=new scope.AnalyzerTableData(obj.data);for(var i in obj.lines)this.lines.push(new scope.AnalyzerLine(obj.lines[i]));for(var j in obj.cells)this.cells.push(new scope.AnalyzerCell(obj.cells[j]));for(var k in obj.inkRanges)this.inkRanges.push(new scope.AnalyzerInkRange(obj.inkRanges[k]))}}AnalyzerTable.prototype=new scope.AnalyzerElement,AnalyzerTable.prototype.constructor=AnalyzerTable,AnalyzerTable.prototype.getData=function(){return this.data},AnalyzerTable.prototype.getLines=function(){return this.lines},AnalyzerTable.prototype.getCells=function(){return this.cells},AnalyzerTable.prototype.getInkRanges=function(){return this.inkRanges},scope.AnalyzerTable=AnalyzerTable}(MyScript),function(scope){function AnalyzerTableData(obj){obj&&(this.columnCount=obj.columnCount,this.rowCount=obj.rowCount)}AnalyzerTableData.prototype.getColumnCount=function(){return this.columnCount},AnalyzerTableData.prototype.getRowCount=function(){return this.rowCount},scope.AnalyzerTableData=AnalyzerTableData}(MyScript),function(scope){function AnalyzerTextLine(obj){if(scope.AnalyzerElement.call(this,obj),this.inkRanges=[],this.underlineList=[],obj){this.data=new scope.AnalyzerTextLineData(obj.data),this.result=new scope.TextDocument(obj.result);for(var i in obj.inkRanges)this.inkRanges.push(new scope.AnalyzerInkRange(obj.inkRanges[i]));for(var j in obj.underlineList)this.underlineList.push(new scope.AnalyzerUnderline(obj.underlineList[j]))}}AnalyzerTextLine.prototype=new scope.AnalyzerElement,AnalyzerTextLine.prototype.constructor=AnalyzerTextLine,AnalyzerTextLine.prototype.getData=function(){return this.data},AnalyzerTextLine.prototype.getTextDocument=function(){return this.result},AnalyzerTextLine.prototype.getInkRanges=function(){return this.inkRanges},AnalyzerTextLine.prototype.getUnderlineList=function(){return this.underlineList},scope.AnalyzerTextLine=AnalyzerTextLine}(MyScript),function(scope){function AnalyzerTextLineData(obj){obj&&(this.baselinePos=obj.baselinePos,this.toMidline=obj.toMidline,this.orientation=obj.orientation,this.topLeftPoint=new scope.Point(obj.topLeftPoint),this.textHeight=obj.textHeight,this.justificationType=obj.justificationType,this.height=obj.height,this.width=obj.width)}AnalyzerTextLineData.prototype.getBaselinePos=function(){return this.baselinePos},AnalyzerTextLineData.prototype.getToMidline=function(){return this.toMidline},AnalyzerTextLineData.prototype.getOrientation=function(){return this.orientation},AnalyzerTextLineData.prototype.getTopLeftPoint=function(){return this.topLeftPoint},AnalyzerTextLineData.prototype.getTextHeight=function(){return this.textHeight},AnalyzerTextLineData.prototype.getJustificationType=function(){return this.justificationType},AnalyzerTextLineData.prototype.getHeight=function(){return this.height},AnalyzerTextLineData.prototype.getWidth=function(){return this.width},AnalyzerTextLineData.prototype.getBoundingBox=function(){var rectangle=new scope.Rectangle;return(this.getTopLeftPoint()||this.getWidth()||this.getHeight())&&(rectangle.setTopLeftPoint(this.getTopLeftPoint()),rectangle.setWidth(this.getWidth()),rectangle.setHeight(this.getHeight())),rectangle},scope.AnalyzerTextLineData=AnalyzerTextLineData}(MyScript),function(scope){function AnalyzerUnderline(obj){if(scope.AnalyzerElement.call(this,obj),this.inkRanges=[],obj){this.data=new scope.AnalyzerUnderlineData(obj.data);for(var i in obj.inkRanges)this.inkRanges.push(new scope.AnalyzerInkRange(obj.inkRanges[i]))}}AnalyzerUnderline.prototype=new scope.AnalyzerElement,AnalyzerUnderline.prototype.constructor=AnalyzerUnderline,AnalyzerUnderline.prototype.getData=function(){return this.data},AnalyzerUnderline.prototype.getInkRanges=function(){return this.inkRanges},scope.AnalyzerUnderline=AnalyzerUnderline}(MyScript),function(scope){function AnalyzerUnderlineData(obj){obj&&(this.firstCharacter=obj.firstCharacter,this.lastCharacter=obj.lastCharacter)}AnalyzerUnderlineData.prototype.getFirstCharacter=function(){return this.firstCharacter},AnalyzerUnderlineData.prototype.getLastCharacter=function(){return this.lastCharacter},scope.AnalyzerUnderlineData=AnalyzerUnderlineData}(MyScript),function(scope,Q){function NetworkInterface(){}NetworkInterface.parse=function(req){var result;try{result=JSON.parse(req.responseText)}catch(e){result=req.responseText}return result},NetworkInterface.transformRequest=function(obj){var str=[];for(var p in obj)"undefined"!=typeof obj[p]&&"function"!=typeof obj[p]&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")},NetworkInterface.prototype.xhr=function(type,url,data){function onStateChange(){4===request.readyState&&request.status>=200&&request.status<300&&deferred.resolve(NetworkInterface.parse(request))}function onLoad(){request.status>=200&&request.status<300?deferred.resolve(NetworkInterface.parse(request)):deferred.reject(new Error(request.responseText))}function onError(){deferred.reject(new Error("Can't XHR "+url))}function onProgress(event){deferred.notify(event.loaded/event.total)}var deferred=Q.defer(),request=new XMLHttpRequest;return request.open(type,url,!0),request.withCredentials=!0,request.setRequestHeader("Accept","application/json"),request.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),request.onload=onLoad,request.onerror=onError,request.onprogress=onProgress,request.onreadystatechange=onStateChange,request.send(NetworkInterface.transformRequest(data)),deferred.promise},NetworkInterface.prototype.get=function(src,params){return params&&(src+="?"+NetworkInterface.transformRequest(params)),this.xhr("GET",src).then(function(response){return response},function(response){throw response})},NetworkInterface.prototype.put=function(url,data){return this.xhr("PUT",url,data).then(function(response){return response},function(response){throw response})},NetworkInterface.prototype.post=function(url,data){return this.xhr("POST",url,data).then(function(response){return response},function(response){throw response})},NetworkInterface.prototype["delete"]=function(url,data){return this.xhr("DELETE",url,data).then(function(response){return response},function(response){throw response})},scope.NetworkInterface=NetworkInterface}(MyScript,Q),function(scope,Q){function NetworkWSInterface(url,callback){this._url=url,this._callback=callback}NetworkWSInterface.prototype.send=function(request){this._socket&&this._socket.send(JSON.stringify(request))},NetworkWSInterface.prototype.isClosed=function(){return this._socket?3===this._socket.readyState:!1},NetworkWSInterface.prototype.isClosing=function(){return this._socket?2===this._socket.readyState:!1},NetworkWSInterface.prototype.isOpen=function(){return this._socket?1===this._socket.readyState:!1},NetworkWSInterface.prototype.isConnecting=function(){return this._socket?0===this._socket.readyState:!1},NetworkWSInterface.prototype.close=function(code,reason){this._socket&&this._socket.close(code,reason)},NetworkWSInterface.prototype.open=function(){var self=this;this._socket=new WebSocket(this._url),this._socket.onopen=function(e){self._callback(e)},this._socket.onclose=function(e){self._callback(e)},this._socket.onerror=function(e){self._callback(e)},this._socket.onmessage=function(e){self._callback({type:e.type,data:JSON.parse(e.data)})}},scope.NetworkWSInterface=NetworkWSInterface}(MyScript,Q),function(scope,CryptoJS){function AbstractRecognizer(host){this.host="cloud.myscript.com",host&&this.setHost(host),this.http=new scope.NetworkInterface}AbstractRecognizer.prototype.getHost=function(){return this.host},AbstractRecognizer.prototype.setHost=function(host){void 0!==host&&(this.host=host)},AbstractRecognizer.prototype.getAvailableLanguageList=function(applicationKey,inputMode){var data=new scope.RecognitionLanguagesData;return data.setApplicationKey(applicationKey),data.setInputMode(inputMode),this.http.get("https://"+this.host+"/api/v3.0/recognition/rest/text/languages.json",data).then(function(response){return response.result},function(response){return response})},AbstractRecognizer.prototype.computeHmac=function(applicationKey,data,hmacKey){var jsonInput="object"==typeof data?JSON.stringify(data):data;return CryptoJS.HmacSHA512(jsonInput,applicationKey+hmacKey).toString(CryptoJS.enc.Hex)},scope.AbstractRecognizer=AbstractRecognizer}(MyScript,CryptoJS),function(scope){function AbstractWSRecognizer(host){scope.AbstractRecognizer.call(this,host)}AbstractWSRecognizer.prototype=new scope.AbstractRecognizer,AbstractWSRecognizer.prototype.constructor=AbstractWSRecognizer,AbstractWSRecognizer.prototype._init=function(endpoint,callback){this._wsInterface=new scope.NetworkWSInterface(endpoint,callback)},AbstractWSRecognizer.prototype.isClosed=function(){return this._wsInterface.isClosed()},AbstractWSRecognizer.prototype.isClosing=function(){return this._wsInterface.isClosing()},AbstractWSRecognizer.prototype.isOpen=function(){return this._wsInterface.isOpen()},AbstractWSRecognizer.prototype.isConnecting=function(){return this._wsInterface.isConnecting()},AbstractWSRecognizer.prototype.open=function(){this._wsInterface.open()},AbstractWSRecognizer.prototype.close=function(){this._wsInterface.close()},AbstractWSRecognizer.prototype.sendMessage=function(message){this._wsInterface.send(message)},AbstractWSRecognizer.prototype.initWSRecognition=function(applicationKey){var message=new scope.InitRequestWSMessage;message.setApplicationKey(applicationKey),this.sendMessage(message)},AbstractWSRecognizer.prototype.takeUpHmacChallenge=function(applicationKey,challenge,hmacKey){var message=new scope.ChallengeRequestWSMessage;message.setApplicationKey(applicationKey),message.setChallenge(challenge),hmacKey&&message.setHmacSignature(this.computeHmac(applicationKey,challenge,hmacKey)),this.sendMessage(message)},AbstractWSRecognizer.prototype.resetWSRecognition=function(){var message=new scope.ResetRequestWSMessage;this.sendMessage(message)},scope.AbstractWSRecognizer=AbstractWSRecognizer}(MyScript),function(scope){function TextRecognizer(host){scope.AbstractRecognizer.call(this,host),this.parameters=new scope.TextParameter,this.parameters.setLanguage("en_US"),this.parameters.setInputMode("CURSIVE")}TextRecognizer.prototype=new scope.AbstractRecognizer,TextRecognizer.prototype.constructor=TextRecognizer,TextRecognizer.prototype.getParameters=function(){return this.parameters},TextRecognizer.prototype.setParameters=function(parameters){this.parameters=parameters},TextRecognizer.prototype.doSimpleRecognition=function(applicationKey,instanceId,inputUnits,hmacKey,parameters){var input=new scope.TextRecognitionInput,params=this.getParameters();parameters&&(params=parameters),input.setParameters(params),input.setInputUnits(inputUnits);var data=new scope.TextRecognitionData;return data.setApplicationKey(applicationKey),data.setTextRecognitionInput(input),data.setInstanceId(instanceId),hmacKey&&data.setHmac(this.computeHmac(applicationKey,input,hmacKey)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/text/doSimpleRecognition.json",data).then(function(response){return new scope.TextResult(response)},function(response){throw response})},scope.TextRecognizer=TextRecognizer}(MyScript),function(scope){function TextWSRecognizer(callback,host){scope.AbstractWSRecognizer.call(this,host),this._endpoint="wss://"+this.getHost()+"/api/v3.0/recognition/ws/text",this.parameters=new scope.TextParameter,this.parameters.setLanguage("en_US"),this.parameters.setInputMode("CURSIVE"),this._init(this._endpoint,function(message){switch(message.type){case"open":callback(message);break;case"close":callback(message);break;case"error":callback(void 0,message);break;default:switch(message.data.type){case"init":message.data=new scope.InitResponseWSMessage(message.data),callback(message.data);break;case"reset":message.data=new scope.ResetResponseWSMessage(message.data),callback(message.data);break;case"error":message.data=new scope.ErrorResponseWSMessage(message.data),callback(void 0,message.data);break;case"hmacChallenge":message.data=new scope.ChallengeResponseWSMessage(message.data),callback(message.data);break;default:message.data=new scope.TextResponseWSMessage(message.data),callback(message.data)}}})}TextWSRecognizer.prototype=new scope.AbstractWSRecognizer,TextWSRecognizer.prototype.constructor=TextWSRecognizer,TextWSRecognizer.prototype.getParameters=function(){return this.parameters},TextWSRecognizer.prototype.setParameters=function(parameters){this.parameters=parameters},TextWSRecognizer.prototype.startWSRecognition=function(inputUnits,parameters){var message=new scope.TextStartRequestWSMessage,params=this.getParameters();parameters&&(params=parameters),message.setParameters(params),message.setInputUnits(inputUnits),this.sendMessage(message)},TextWSRecognizer.prototype.continueWSRecognition=function(inputUnits,instanceId){var message=new scope.TextContinueRequestWSMessage;message.setInputUnits(inputUnits),message.setInstanceId(instanceId),this.sendMessage(message)},scope.TextWSRecognizer=TextWSRecognizer}(MyScript),function(scope){function ShapeRecognizer(host){scope.AbstractRecognizer.call(this,host),this.parameters=new scope.ShapeParameter}ShapeRecognizer.prototype=new scope.AbstractRecognizer,ShapeRecognizer.prototype.constructor=ShapeRecognizer,ShapeRecognizer.prototype.getParameters=function(){return this.parameters},ShapeRecognizer.prototype.setParameters=function(parameters){this.parameters=parameters},ShapeRecognizer.prototype.doSimpleRecognition=function(applicationKey,instanceId,components,hmacKey,parameters){var input=new scope.ShapeRecognitionInput;input.setComponents(components);var params=this.getParameters();parameters&&(params=parameters),input.setDoBeautification(params.hasBeautification()),input.setRejectDetectionSensitivity(params.getRejectDetectionSensitivity());var data=new scope.ShapeRecognitionData;return data.setApplicationKey(applicationKey),data.setShapeRecognitionInput(input),data.setInstanceId(instanceId),hmacKey&&data.setHmac(this.computeHmac(applicationKey,input,hmacKey)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/shape/doSimpleRecognition.json",data).then(function(response){return new scope.ShapeResult(response)},function(response){throw response})},ShapeRecognizer.prototype.clearShapeRecognitionSession=function(applicationKey,instanceId){var data={instanceSessionId:instanceId};return this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/shape/clearSessionId.json",data).then(function(response){return response},function(response){throw response})},scope.ShapeRecognizer=ShapeRecognizer}(MyScript),function(scope){function MathRecognizer(host){scope.AbstractRecognizer.call(this,host),this.parameters=new scope.MathParameter}MathRecognizer.prototype=new scope.AbstractRecognizer,MathRecognizer.prototype.constructor=MathRecognizer,MathRecognizer.prototype.getParameters=function(){return this.parameters},MathRecognizer.prototype.setParameters=function(parameters){this.parameters=parameters},MathRecognizer.prototype.doSimpleRecognition=function(applicationKey,instanceId,components,hmacKey,parameters){var input=new scope.MathRecognitionInput;input.setComponents(components);var params=this.getParameters();parameters&&(params=parameters),input.setResultTypes(params.getResultTypes()),input.setColumnar(params.isColumnar()),input.setScratchOutDetectionSensitivity(params.getScratchOutDetectionSensitivity()),input.setUserResources(params.getUserResources());var data=new scope.MathRecognitionData;return data.setApplicationKey(applicationKey),data.setMathRecognitionInput(input),data.setInstanceId(instanceId),hmacKey&&data.setHmac(this.computeHmac(applicationKey,input,hmacKey)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/math/doSimpleRecognition.json",data).then(function(response){return new scope.MathResult(response)},function(response){throw response})},scope.MathRecognizer=MathRecognizer}(MyScript),function(scope){function MathWSRecognizer(callback,host){scope.AbstractWSRecognizer.call(this,host),this._endpoint="wss://"+this.getHost()+"/api/v3.0/recognition/ws/math",this.parameters=new scope.MathParameter,this._init(this._endpoint,function(message){switch(message.type){case"open":callback(message);break;case"close":callback(message);break;case"error":callback(void 0,message);break;default:switch(message.data.type){case"init":message.data=new scope.InitResponseWSMessage(message.data),callback(message.data);break;case"reset":message.data=new scope.ResetResponseWSMessage(message.data),callback(message.data);break;case"error":message.data=new scope.ErrorResponseWSMessage(message.data),callback(void 0,message.data);break;case"hmacChallenge":message.data=new scope.ChallengeResponseWSMessage(message.data),callback(message.data);break;default:message.data=new scope.MathResponseWSMessage(message.data),callback(message.data)}}})}MathWSRecognizer.prototype=new scope.AbstractWSRecognizer,MathWSRecognizer.prototype.constructor=MathWSRecognizer,MathWSRecognizer.prototype.getParameters=function(){return this.parameters},MathWSRecognizer.prototype.setParameters=function(parameters){this.parameters=parameters},MathWSRecognizer.prototype.startWSRecognition=function(components,parameters){var message=new scope.MathStartRequestWSMessage,params=this.getParameters();parameters&&(params=parameters),message.setParameters(params),message.setComponents(components),this.sendMessage(message)},MathWSRecognizer.prototype.continueWSRecognition=function(components,instanceId){var message=new scope.MathContinueRequestWSMessage;message.setComponents(components),message.setInstanceId(instanceId),this.sendMessage(message)},scope.MathWSRecognizer=MathWSRecognizer}(MyScript),function(scope){function MusicRecognizer(host){scope.AbstractRecognizer.call(this,host),this.parameters=new scope.MusicParameter}MusicRecognizer.prototype=new scope.AbstractRecognizer,MusicRecognizer.prototype.constructor=MusicRecognizer,MusicRecognizer.prototype.getParameters=function(){return this.parameters},MusicRecognizer.prototype.setParameters=function(parameters){this.parameters=parameters},MusicRecognizer.prototype.doSimpleRecognition=function(applicationKey,instanceId,components,hmacKey,parameters){var input=new scope.MusicRecognitionInput;input.setComponents(components);var params=this.getParameters();parameters&&(params=parameters),input.setStaff(params.getStaff()),input.setDivisions(params.getDivisions()),input.setResultTypes(params.getResultTypes()),input.setScratchOutDetectionSensitivity(params.getScratchOutDetectionSensitivity()),input.setUserResources(params.getUserResources());var data=new scope.MusicRecognitionData;return data.setApplicationKey(applicationKey),data.setMusicRecognitionInput(input),data.setInstanceId(instanceId),hmacKey&&data.setHmac(this.computeHmac(applicationKey,input,hmacKey)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/music/doSimpleRecognition.json",data).then(function(response){return new scope.MusicResult(response)},function(response){throw response})},scope.MusicRecognizer=MusicRecognizer}(MyScript),function(scope){function AnalyzerRecognizer(host){scope.AbstractRecognizer.call(this,host),this.parameters=new scope.AnalyzerParameter}AnalyzerRecognizer.prototype=new scope.AbstractRecognizer,AnalyzerRecognizer.prototype.constructor=AnalyzerRecognizer,AnalyzerRecognizer.prototype.getParameters=function(){return this.parameters},AnalyzerRecognizer.prototype.setParameters=function(parameters){this.parameters=parameters},AnalyzerRecognizer.prototype.doSimpleRecognition=function(applicationKey,instanceId,components,hmacKey,parameters){var input=new scope.AnalyzerRecognitionInput;input.setComponents(components);var params=this.getParameters();parameters&&(params=parameters),input.setParameters(params);var data=new scope.AnalyzerRecognitionData;return data.setApplicationKey(applicationKey),data.setAnalyzerRecognitionInput(input),data.setInstanceId(instanceId),hmacKey&&data.setHmac(this.computeHmac(applicationKey,input,hmacKey)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/analyzer/doSimpleRecognition.json",data).then(function(response){return new scope.AnalyzerResult(response)},function(response){return response})},scope.AnalyzerRecognizer=AnalyzerRecognizer}(MyScript),function(scope){function AbstractRenderer(context){this.penParameters=new scope.PenParameters,this.showBoundingBoxes=!1,this.typeset=!0,this.context=context,this.points=[],this.drawing=!1}function _computeLinksPoints(point,angle,width){var radius=point.p*width;return[{x:point.x-Math.sin(angle)*radius,y:point.y+Math.cos(angle)*radius},{x:point.x+Math.sin(angle)*radius,y:point.y-Math.cos(angle)*radius}]}function _computeMiddlePoint(point1,point2){return{x:(point2.x+point1.x)/2,y:(point2.y+point1.y)/2,p:(point2.p+point1.p)/2}}function _computeAxeAngle(begin,end){return Math.atan2(end.y-begin.y,end.x-begin.x)}function _fill(context,color,alpha){void 0!==color&&(context.globalAlpha=alpha,context.fillStyle=color,context.fill())}function _renderStroke(stroke,context){context.beginPath();var length=stroke.getLength(),width=stroke.getWidth(),firstPoint=stroke.getPointByIndex(0);if(3>length)context.arc(firstPoint.x,firstPoint.y,.2*width,0,2*Math.PI,!0);else{context.arc(firstPoint.x,firstPoint.y,width*firstPoint.p,0,2*Math.PI,!0),_renderLine(context,firstPoint,_computeMiddlePoint(firstPoint,stroke.getPointByIndex(1)),width);for(var nbquadratics=length-2,i=0;nbquadratics>i;i++)_renderQuadratic(context,_computeMiddlePoint(stroke.getPointByIndex(i),stroke.getPointByIndex(i+1)),_computeMiddlePoint(stroke.getPointByIndex(i+1),stroke.getPointByIndex(i+2)),stroke.getPointByIndex(i+1),width);_renderLine(context,_computeMiddlePoint(stroke.getPointByIndex(length-2),stroke.getPointByIndex(length-1)),stroke.getPointByIndex(length-1),width),_renderFinal(context,stroke.getPointByIndex(length-2),stroke.getPointByIndex(length-1),width)}context.closePath(),_fill(context,stroke.getColor(),stroke.getAlpha())}function _renderFinal(context,begin,end,width){var ARCSPLIT=6,angle=_computeAxeAngle(begin,end),linkPoints=_computeLinksPoints(end,angle,width);context.moveTo(linkPoints[0].x,linkPoints[0].y);for(var i=1;ARCSPLIT>=i;i++){var newAngle=angle-i*Math.PI/ARCSPLIT;context.lineTo(end.x-end.p*width*Math.sin(newAngle),end.y+end.p*width*Math.cos(newAngle))}}function _renderLine(context,begin,end,width){var linkPoints1=_computeLinksPoints(begin,_computeAxeAngle(begin,end),width),linkPoints2=_computeLinksPoints(end,_computeAxeAngle(begin,end),width);context.moveTo(linkPoints1[0].x,linkPoints1[0].y),context.lineTo(linkPoints2[0].x,linkPoints2[0].y),context.lineTo(linkPoints2[1].x,linkPoints2[1].y),context.lineTo(linkPoints1[1].x,linkPoints1[1].y)}function _renderQuadratic(context,begin,end,ctrl,width){var linkPoints1=_computeLinksPoints(begin,_computeAxeAngle(begin,ctrl),width),linkPoints2=_computeLinksPoints(end,_computeAxeAngle(ctrl,end),width),linkPoints3=_computeLinksPoints(ctrl,_computeAxeAngle(begin,end),width);context.moveTo(linkPoints1[0].x,linkPoints1[0].y),context.quadraticCurveTo(linkPoints3[0].x,linkPoints3[0].y,linkPoints2[0].x,linkPoints2[0].y),context.lineTo(linkPoints2[1].x,linkPoints2[1].y),context.quadraticCurveTo(linkPoints3[1].x,linkPoints3[1].y,linkPoints1[1].x,linkPoints1[1].y)}AbstractRenderer.prototype.getContext=function(){return this.context},AbstractRenderer.prototype._setContext=function(context){this.context=context},AbstractRenderer.prototype.getShowBoundingBoxes=function(){return this.showBoundingBoxes},AbstractRenderer.prototype.setShowBoundingBoxes=function(showBoundingBoxes){this.showBoundingBoxes=showBoundingBoxes},AbstractRenderer.prototype.getParameters=function(){return this.penParameters},AbstractRenderer.prototype.setParameters=function(penParameters){this.penParameters=penParameters},AbstractRenderer.prototype.isTypesetting=function(){return this.typeset},AbstractRenderer.prototype.setTypeset=function(typeset){this.typeset=typeset},AbstractRenderer.prototype.clear=function(){this.getContext().clearRect(0,0,this.getContext().canvas.width,this.getContext().canvas.height)},AbstractRenderer.prototype.drawRecognitionResult=function(components,recognitionResult,context,parameters){throw new Error("not implemented")},AbstractRenderer.prototype.drawComponents=function(components,context,parameters){throw new Error("not implemented")},AbstractRenderer.prototype.drawComponent=function(component,context,parameters){if(component instanceof scope.Stroke)this.drawStroke(component,context,parameters);else{if(!(component instanceof scope.CharacterInputComponent))throw new Error("Component not implemented: "+component.getType());this.drawCharacter(component,context,parameters)}},AbstractRenderer.prototype.drawRectangle=function(rectangle,context,parameters){context&&this._setContext(context),parameters&&this.setParameters(parameters);var params=this.getParameters();this.getContext().save();try{this.getContext().fillStyle=params.getRectColor(),this.getContext().strokeStyle=params.getColor(),this.getContext().globalAlpha=params.getAlpha(),this.getContext().lineWidth=.5*params.getWidth(),this.getContext().fillRect(rectangle.getX(),rectangle.getY(),rectangle.getWidth(),rectangle.getHeight())}finally{this.getContext().restore()}},AbstractRenderer.prototype.drawCharacter=function(character,context,parameters){throw new Error("not implemented")},AbstractRenderer.prototype.drawStroke=function(stroke,context,parameters){if(context&&this._setContext(context),parameters&&this.setParameters(parameters),stroke&&stroke.getLength()>0)if(stroke instanceof scope.StrokeComponent)_renderStroke(stroke,this.getContext());else{this.drawStart(stroke.getX()[0],stroke.getY()[0]);for(var i=0;i<stroke.getLength();++i)this.drawContinue(stroke.getX()[i],stroke.getY()[i],context,parameters);this.drawEnd(stroke.getX()[stroke.getLength()-1],stroke.getY()[stroke.getLength()-1],context,parameters)}},AbstractRenderer.prototype.drawStrokes=function(strokes,context,parameters){for(var i=0;i<strokes.length;i++)this.drawStroke(strokes[i],context,parameters)},AbstractRenderer.prototype.drawStart=function(x,y,context,parameters){context&&this._setContext(context),parameters&&this.setParameters(parameters),this.points=[],this.drawing=!0,this.points.push(new scope.QuadraticPoint({x:x,y:y}))},AbstractRenderer.prototype.drawContinue=function(x,y,context,parameters){if(this.drawing){context&&this._setContext(context),parameters&&this.setParameters(parameters);var params=this.getParameters(),delta=2+params.getWidth()/4,last=this.points[this.points.length-1];if(Math.abs(last.getX()-x)>=delta||Math.abs(last.getY()-y)>=delta)if(1===this.points.length){var pA=this.points[this.points.length-1],pB=new scope.QuadraticPoint({x:x,y:y}),pAB=new scope.QuadraticPoint({x:.5*(pA.getX()+pB.getX()),y:.5*(pA.getY()+pB.getY())});_computePointParameters(pA,pAB,params.getPressureType()),_computePointParameters(pAB,pB,params.getPressureType()),_computeFirstControls(pA,pAB,params.getWidth()),_computeControls(pAB,pB,params.getWidth()),this.points.push(pAB),this.points.push(pB),_drawFirstSegment(pA,pAB,this.getContext(),params)}else{var pAB=this.points[this.points.length-2],pB=this.points[this.points.length-1],pC=new scope.QuadraticPoint({x:x,y:y}),pBC=new scope.QuadraticPoint({x:.5*(pB.getX()+pC.getX()),y:.5*(pB.getY()+pC.getY())});_computePointParameters(pB,pBC,params.getPressureType()),_computePointParameters(pBC,pC,params.getPressureType()),_computeControls(pB,pBC,params.getWidth()),_computeControls(pBC,pC,params.getWidth()),this.points.push(pBC),this.points.push(pC),_drawSegment(pAB,pB,pBC,this.getContext(),params)}}},AbstractRenderer.prototype.drawEnd=function(x,y,context,parameters){if(this.drawing){var params=this.getParameters();if(context&&this._setContext(context),parameters&&this.setParameters(parameters),1===this.points.length)_drawPoint(new scope.QuadraticPoint({x:x,y:y}),this.getContext(),params);else if(this.points.length>1){var pA=this.points[this.points.length-1],pB=new scope.QuadraticPoint({x:x,y:y}),pAB=new scope.QuadraticPoint({x:.5*(pA.getX()+pB.getX()),y:.5*(pA.getY()+pB.getY())});_computePointParameters(pA,pAB,params.getPressureType()),_computePointParameters(pAB,pB,params.getPressureType()),_computeControls(pA,pAB,params.getWidth()),_computeLastControls(pB,params.getWidth()),
this.points.push(pAB),this.points.push(pB),_drawLastSegment(pAB,pB,this.getContext(),params)}this.drawing=!1}};var _drawPoint=function(point,context,parameters){context.save();try{context.fillStyle=parameters.getColor(),context.strokeStyle=parameters.getColor(),context.globalAlpha=parameters.getAlpha(),context.lineWidth=1,context.beginPath(),context.arc(point.getX(),point.getY(),.25*parameters.getWidth(),0,2*Math.PI),context.fill()}finally{context.restore()}},_drawFirstSegment=function(pA,pB,context,parameters){context.save();try{context.fillStyle=parameters.getColor(),context.strokeStyle=parameters.getColor(),context.globalAlpha=1,context.lineWidth=1,context.beginPath(),context.moveTo(pA.getP1().getX(),pA.getP1().getY()),context.lineTo(pB.getP1().getX(),pB.getP1().getY()),context.lineTo(pB.getP2().getX(),pB.getP2().getY()),context.lineTo(pA.getP2().getX(),pA.getP2().getY()),context.closePath(),context.fill()}finally{context.restore()}},_drawSegment=function(pA,pB,pC,context,parameters){context.save();try{context.fillStyle=parameters.getColor(),context.strokeStyle=parameters.getColor(),context.globalAlpha=1,context.lineWidth=1,context.beginPath(),context.moveTo(pA.getP1().getX(),pA.getP1().getY()),context.quadraticCurveTo(pB.getP1().getX(),pB.getP1().getY(),pC.getP1().getX(),pC.getP1().getY()),context.lineTo(pC.getP2().getX(),pC.getP2().getY()),context.quadraticCurveTo(pB.getP2().getX(),pB.getP2().getY(),pA.getP2().getX(),pA.getP2().getY()),context.closePath(),context.fill()}finally{context.restore()}},_drawLastSegment=function(pA,pB,context,parameters){context.save();try{context.fillStyle=parameters.getColor(),context.strokeStyle=parameters.getColor(),context.globalAlpha=1,context.lineWidth=1,context.beginPath(),context.moveTo(pA.getP1().getX(),pA.getP1().getY()),context.lineTo(pB.getP1().getX(),pB.getP1().getY()),context.lineTo(pB.getP2().getX(),pB.getP2().getY()),context.lineTo(pA.getP2().getX(),pA.getP2().getY()),context.closePath(),context.fill()}finally{context.restore()}},_computePointParameters=function(previous,point,pressureType){var dx=point.getX()-previous.getX(),dy=point.getY()-previous.getY(),d=Math.sqrt(dx*dx+dy*dy);switch(0!==d&&(point.setDistance(d),point.setCos(dx/d),point.setSin(dy/d)),point.setLength(previous.getLength()+point.getDistance()),pressureType){case"SIMULATED":_computePressure(point);break;case"CONSTANT":point.setPressure(1);break;case"REAL":break;default:throw new Error("Unknown pressure type")}},_computePressure=function(point){var k,pressure;k=point.getDistance()<10?.2+Math.pow(.1*point.getDistance(),.4):point.getDistance()>point.getLength()-10?.2+Math.pow(.1*(point.getLength()-point.getDistance()),.4):1,pressure=k*Math.max(.1,1-.1*Math.sqrt(point.getDistance())),isNaN(parseFloat(pressure))&&(pressure=.5),point.setPressure(pressure)},_computeFirstControls=function(first,next,penWidth){var r=.5*(penWidth*first.getPressure()),nx=r*next.getSin(),ny=r*next.getCos();first.getP1().setX(first.getX()-nx),first.getP1().setY(first.getY()+ny),first.getP2().setX(first.getX()+nx),first.getP2().setY(first.getY()-ny)},_computeControls=function(point,next,penWidth){var cos=point.getCos()+next.getCos(),sin=point.getSin()+next.getSin(),u=Math.sqrt(cos*cos+sin*sin);if(0!==u){var r=.5*penWidth*point.getPressure(),nx=-r*sin/u,ny=r*cos/u;point.getP1().setX(point.getX()+nx),point.getP1().setY(point.getY()+ny),point.getP2().setX(point.getX()-nx),point.getP2().setY(point.getY()-ny)}},_computeLastControls=function(last,penWidth){var r=.5*penWidth*last.getPressure(),nx=-r*last.getSin(),ny=r*last.getCos();last.getP1().setX(last.getX()+nx),last.getP1().setY(last.getY()+ny),last.getP2().setX(last.getX()-nx),last.getP2().setY(last.getY()-ny)};scope.AbstractRenderer=AbstractRenderer}(MyScript),function(scope){function TextRenderer(context){scope.AbstractRenderer.call(this,context)}TextRenderer.prototype=new scope.AbstractRenderer,TextRenderer.prototype.constructor=TextRenderer,TextRenderer.prototype.drawRecognitionResult=function(inputUnits,recognitionResult,context,parameters){this.drawInputUnits(inputUnits,context,parameters)},TextRenderer.prototype.drawInputUnits=function(inputUnits,context,parameters){for(var i in inputUnits)this.drawComponents(inputUnits[i].getComponents(),context,parameters)},TextRenderer.prototype.drawComponents=function(components,context,parameters){for(var i in components){var component=components[i];if(component instanceof scope.AbstractTextInputComponent)this.drawTextComponent(component,context,parameters);else{if(!(component instanceof scope.AbstractComponent))throw new Error("not implemented");scope.AbstractRenderer.prototype.drawComponent.call(this,component,context,parameters)}}},TextRenderer.prototype.drawTextComponent=function(component,context,parameters){if(context&&this._setContext(context),parameters&&this.setParameters(parameters),component instanceof scope.CharInputComponent)_drawChar(component,this.getContext(),this.getParameters());else{if(!(component instanceof scope.StringInputComponent))throw new Error("Component not implemented: "+component.getType());_drawString(component,this.getContext(),this.getParameters())}};var _drawChar=function(char,context,parameters){throw new Error("not implemented")},_drawString=function(string,context,parameters){throw new Error("not implemented")};scope.TextRenderer=TextRenderer}(MyScript),function(scope){function ShapeRenderer(context){scope.AbstractRenderer.call(this,context)}ShapeRenderer.prototype=new scope.AbstractRenderer,ShapeRenderer.prototype.constructor=ShapeRenderer,ShapeRenderer.prototype.drawRecognitionResult=function(components,recognitionResult,context,parameters){this.isTypesetting()?this.drawShapes(components,recognitionResult.getSegments(),context,parameters):this.drawComponents(components,context,parameters)},ShapeRenderer.prototype.drawComponents=function(components,context,parameters){for(var i in components){var component=components[i];if(component instanceof scope.AbstractShapePrimitive)this.drawShapePrimitive(component,context,parameters);else{if(!(component instanceof scope.AbstractComponent))throw new Error("not implemented");scope.AbstractRenderer.prototype.drawComponent.call(this,component,context,parameters)}}},ShapeRenderer.prototype.drawShapes=function(components,shapes,context,parameters){for(var i in shapes)this.drawShapeSegment(components,shapes[i],context,parameters)},ShapeRenderer.prototype.drawShapeSegment=function(components,segment,context,parameters){var candidate=segment.getSelectedCandidate();if(candidate instanceof scope.ShapeRecognized)this.drawShapeRecognized(candidate,context,parameters);else{if(!(candidate instanceof scope.ShapeNotRecognized))throw new Error("not implemented");this.drawShapeNotRecognized(components,segment.getInkRanges(),context,parameters)}},ShapeRenderer.prototype.drawShapeRecognized=function(shapeRecognized,context,parameters){this.drawComponents(shapeRecognized.getPrimitives(),context,parameters)},ShapeRenderer.prototype.drawShapeNotRecognized=function(components,inkRanges,context,parameters){var notRecognized=[];for(var i in inkRanges)notRecognized.concat(this.extractStroke(components,inkRanges[i]));this.drawComponents(notRecognized,context,parameters)},ShapeRenderer.prototype.drawShapePrimitive=function(primitive,context,parameters){if(primitive instanceof scope.ShapeEllipse)this.drawShapeEllipse(primitive,context,parameters);else{if(!(primitive instanceof scope.ShapeLine))throw new Error("Primitive not implemented: "+primitive.getType());this.drawShapeLine(primitive,context,parameters)}},ShapeRenderer.prototype.drawShapeLine=function(shapeLine,context,parameters){context&&this._setContext(context),parameters&&this.setParameters(parameters),_drawLine(shapeLine.getFirstPoint(),shapeLine.getLastPoint(),this.getContext(),this.getParameters()),shapeLine.hasBeginDecoration()&&"ARROW_HEAD"===shapeLine.getBeginDecoration()&&_drawArrowHead(shapeLine.getFirstPoint(),shapeLine.getBeginTangentAngle(),12,this.getContext(),this.getParameters()),shapeLine.hasEndDecoration()&&"ARROW_HEAD"===shapeLine.getEndDecoration()&&_drawArrowHead(shapeLine.getLastPoint(),shapeLine.getEndTangentAngle(),12,this.getContext(),this.getParameters())},ShapeRenderer.prototype.drawShapeEllipse=function(shapeEllipse,context,parameters){context&&this._setContext(context),parameters&&this.setParameters(parameters);var points=_drawEllipseArc(shapeEllipse.getCenter(),shapeEllipse.getMaxRadius(),shapeEllipse.getMinRadius(),shapeEllipse.getOrientation(),shapeEllipse.getStartAngle(),shapeEllipse.getSweepAngle(),this.getContext(),this.getParameters());shapeEllipse.hasBeginDecoration()&&"ARROW_HEAD"===shapeEllipse.getBeginDecoration()&&_drawArrowHead(points[0],shapeEllipse.getBeginTangentAngle(),12,this.getContext(),this.getParameters()),shapeEllipse.hasEndDecoration()&&"ARROW_HEAD"===shapeEllipse.getEndDecoration()&&_drawArrowHead(points[1],shapeEllipse.getEndTangentAngle(),12,this.getContext(),this.getParameters())};var _drawEllipseArc=function(centerPoint,maxRadius,minRadius,orientation,startAngle,sweepAngle,context,parameters){var angleStep=.02,z1=Math.cos(orientation),z3=Math.sin(orientation),z2=z1,z4=z3;z1*=maxRadius,z2*=minRadius,z3*=maxRadius,z4*=minRadius;var n=Math.floor(Math.abs(sweepAngle)/angleStep),boundariesPoints=[];context.save();try{context.fillStyle=parameters.getColor(),context.strokeStyle=parameters.getColor(),context.globalAlpha=parameters.getAlpha(),context.lineWidth=.5*parameters.getWidth(),context.beginPath();for(var i=0;n>=i;i++){var angle=startAngle+i/n*sweepAngle,alpha=Math.atan2(Math.sin(angle)/minRadius,Math.cos(angle)/maxRadius),cosAlpha=Math.cos(alpha),sinAlpha=Math.sin(alpha),x=centerPoint.x+z1*cosAlpha-z4*sinAlpha,y=centerPoint.y+z2*sinAlpha+z3*cosAlpha;0===i?context.moveTo(x,y):context.lineTo(x,y),(0===i||i===n)&&boundariesPoints.push(new scope.Point({x:x,y:y}))}context.stroke()}finally{context.restore()}return boundariesPoints},_drawLine=function(p1,p2,context,parameters){context.save();try{context.fillStyle=parameters.getColor(),context.strokeStyle=parameters.getColor(),context.globalAlpha=parameters.getAlpha(),context.lineWidth=.5*parameters.getWidth(),context.beginPath(),context.moveTo(p1.getX(),p1.getY()),context.lineTo(p2.getX(),p2.getY()),context.stroke()}finally{context.restore()}},_phi=function(angle){return angle=(angle+Math.PI)%(2*Math.PI)-Math.PI,angle<-Math.PI&&(angle+=2*Math.PI),angle},_drawArrowHead=function(headPoint,angle,length,context,parameters){var alpha=_phi(angle+Math.PI-Math.PI/8),beta=_phi(angle-Math.PI+Math.PI/8);context.save();try{context.fillStyle=parameters.getColor(),context.strokeStyle=parameters.getColor(),context.globalAlpha=parameters.getAlpha(),context.lineWidth=.5*parameters.getWidth(),context.moveTo(headPoint.getX(),headPoint.getY()),context.beginPath(),context.lineTo(headPoint.getX()+length*Math.cos(alpha),headPoint.getY()+length*Math.sin(alpha)),context.lineTo(headPoint.getX()+length*Math.cos(beta),headPoint.getY()+length*Math.sin(beta)),context.lineTo(headPoint.getX(),headPoint.getY()),context.fill()}finally{context.restore()}};ShapeRenderer.prototype.extractStroke=function(strokes,inkRange){for(var result=[],firstPointIndex=Math.floor(inkRange.getFirstPoint()),lastPointIndex=Math.ceil(inkRange.getLastPoint()),strokeIndex=inkRange.getFirstStroke();strokeIndex<=inkRange.getLastStroke();strokeIndex++){for(var currentStroke=strokes[strokeIndex-1],currentStrokePointCount=currentStroke.getX().length,newStroke=new scope.Stroke,x=[],y=[],pointIndex=firstPointIndex;strokeIndex===inkRange.getLastStroke()&&lastPointIndex>=pointIndex&&currentStrokePointCount>pointIndex||strokeIndex!==inkRange.getLastStroke()&&currentStrokePointCount>pointIndex;pointIndex++)x.push(currentStroke.getX()[pointIndex]),y.push(currentStroke.getY()[pointIndex]);newStroke.setX(x),newStroke.setY(y),result.push(newStroke)}return result},scope.ShapeRenderer=ShapeRenderer}(MyScript),function(scope){function MathRenderer(context){scope.AbstractRenderer.call(this,context)}MathRenderer.prototype=new scope.AbstractRenderer,MathRenderer.prototype.constructor=MathRenderer,MathRenderer.prototype.drawRecognitionResult=function(components,recognitionResult,context,parameters){var notScratchOutComponents=this.removeScratchOut(components,recognitionResult.getScratchOutResults());this.drawComponents(notScratchOutComponents,context,parameters)},MathRenderer.prototype.drawComponents=function(components,context,parameters){for(var i in components){var component=components[i];if(!(component instanceof scope.AbstractComponent))throw new Error("not implemented");scope.AbstractRenderer.prototype.drawComponent.call(this,component,context,parameters)}},MathRenderer.prototype.removeScratchOut=function(components,scratchOutResults){if(!scratchOutResults||0===scratchOutResults.length)return components;var cloneComponents=components.slice(0),componentsToRemove=[];for(var k in scratchOutResults){for(var n in scratchOutResults[k].getErasedInkRanges())componentsToRemove.push(scratchOutResults[k].getErasedInkRanges()[n].getComponent());for(var p in scratchOutResults[k].getInkRanges())componentsToRemove.push(scratchOutResults[k].getInkRanges()[p].getComponent())}componentsToRemove.sort(function(a,b){return b-a});for(var z in componentsToRemove)cloneComponents.splice(componentsToRemove[z],1);return cloneComponents},scope.MathRenderer=MathRenderer}(MyScript),function(scope){function MusicRenderer(context){scope.AbstractRenderer.call(this,context)}MusicRenderer.prototype=new scope.AbstractRenderer,MusicRenderer.prototype.constructor=MusicRenderer,MusicRenderer.prototype.drawRecognitionResult=function(components,recognitionResult,context,parameters){var notScratchOutComponents=this.removeScratchOut(components,recognitionResult.getScratchOutResults());this.drawComponents(notScratchOutComponents,context,parameters)},MusicRenderer.prototype.removeScratchOut=function(components,scratchOutResults){if(!scratchOutResults||0===scratchOutResults.length)return components;var cloneComponents=components.slice(0),componentsToRemove=[];for(var k in scratchOutResults)if(scratchOutResults[k].getErasedInputRanges()){for(var n in scratchOutResults[k].getErasedInputRanges())componentsToRemove.push(scratchOutResults[k].getErasedInputRanges()[n].getComponent());for(var p in scratchOutResults[k].getInputRanges())componentsToRemove.push(scratchOutResults[k].getInputRanges()[p].getComponent())}componentsToRemove.sort(function(a,b){return b-a});for(var z in componentsToRemove)cloneComponents.splice(componentsToRemove[z],1);return cloneComponents},MusicRenderer.prototype.drawStaff=function(staff,context,parameters){context&&this._setContext(context),parameters&&this.setParameters(parameters);var staffHeight=staff.getTop()+(staff.getCount()-1)*staff.getGap(),staves=1;this.getContext().beginPath();for(var i=0;staves>i;i++)for(var offset=staffHeight*i,j=0;j<staff.getCount();j++)this.getContext().moveTo(0,staff.getTop()+offset+j*staff.getGap()),this.getContext().lineTo(this.getContext().canvas.clientWidth,staff.getTop()+offset+j*staff.getGap());this.getContext().stroke()},MusicRenderer.prototype.drawComponents=function(components,context,parameters){for(var i in components){var component=components[i];if(component instanceof scope.AbstractMusicInputComponent)this.drawMusicNode(component,context,parameters);else{if(!(component instanceof scope.AbstractComponent))throw new Error("not implemented");scope.AbstractRenderer.prototype.drawComponent.call(this,component,context,parameters)}}},MusicRenderer.prototype.drawMusicNode=function(component,context,parameters){if(context&&this._setContext(context),parameters&&this.setParameters(parameters),component instanceof scope.MusicAccidentalInputComponent)_drawAccidental(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicArpeggiateInputComponent)_drawArpeggiate(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicBarInputComponent)_drawBar(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicBeamInputComponent)_drawBeam(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicClefInputComponent)_drawClef(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicDecorationInputComponent)_drawDecoration(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicDotsInputComponent)_drawDots(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicHeadInputComponent)_drawHead(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicLedgerLineInputComponent)_drawLedgerLine(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicRestInputComponent)_drawRest(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicStemInputComponent)_drawStem(component,this.getContext(),this.getParameters());else if(component instanceof scope.MusicTieOrSlurInputComponent)_drawTieOrSlur(component,this.getContext(),this.getParameters());else{if(!(component instanceof scope.MusicTimeSignatureInputComponent))throw new Error("Node not implemented: "+component.getType());_drawTimeSignature(component,this.getContext(),this.getParameters())}};var _drawAccidental=function(accidental,context,parameters){throw new Error("not implemented")},_drawArpeggiate=function(arpeggiate,context,parameters){throw new Error("not implemented")},_drawBar=function(bar,context,parameters){throw new Error("not implemented")},_drawBeam=function(beam,context,parameters){throw new Error("not implemented")},_drawClef=function(clef,context,parameters){var src="data:image/svg+xml,";switch(clef.getValue().getSymbol()){case"F":src+='<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.0" x="0" y="0" width="18" height="20"><defs/><g transform="translate(6.600000e-3,3.125356e-3)"><g><path d="M17.3 3.1 C17.3 3.5 17.1 3.8 16.8 4.1 C16.5 4.4 15.9 4.5 15.5 4.3 C15 4.1 14.7 3.7 14.7 3.2 C14.6 2.8 14.8 2.5 15 2.2 C15.3 1.9 15.7 1.8 16 1.8 C16.4 1.8 16.8 2 17 2.3 C17.2 2.5 17.3 2.8 17.3 3.1 z"/></g><g><path d="M17.3 8.9 C17.3 9.3 17.1 9.7 16.8 9.9 C16.5 10.3 15.9 10.3 15.5 10.2 C15 10 14.7 9.5 14.7 9.1 C14.6 8.7 14.8 8.3 15 8 C15.3 7.8 15.7 7.6 16 7.6 C16.5 7.7 17 8 17.2 8.4 C17.2 8.6 17.3 8.8 17.3 8.9 z"/></g><g><path d="M13 7.2 C13 10 11.8 12.7 9.8 14.7 C7.3 17.2 4 18.8 0.7 19.8 C0.3 20.1 -0.4 19.8 0.3 19.4 C1.6 18.8 3 18.3 4.2 17.5 C7 15.8 9.3 13.1 9.8 9.9 C10.1 8 10.1 5.9 9.6 4 C9.2 2.6 8.2 1.1 6.7 0.9 C5.3 0.7 3.7 1.2 2.7 2.2 C2.5 2.4 2 3.2 2 4 C2.6 3.6 2.6 3.6 3.1 3.4 C4.2 2.9 5.7 3.6 6 4.9 C6.3 6 6.1 7.5 5 8.1 C3.8 8.7 2 8.5 1.4 7.2 C0.3 5.3 0.9 2.6 2.6 1.2 C4.4 -0.3 7.1 -0.3 9.2 0.4 C11.4 1.3 12.7 3.5 12.9 5.8 C13 6.2 13 6.7 13 7.2 z"/></g></g></svg>';break;case"C":src+='<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.0" width="18" height="25"><defs/><g><g transform="matrix(1,0,0,1.030698,-309.364,-543.8647)"><path d="M 325.9 546.8 C 325.8 548.7 324.7 550.7 322.8 551.5 C 321.1 552.1 319.1 552.2 317.6 551 C 316.6 550.2 316.2 548.4 317.3 547.5 C 318.3 546.5 320.4 547.4 320.3 548.9 C 320.7 549.9 318.5 550.5 319.7 551.3 C 321 551.6 322.3 550.5 322.6 549.3 C 323.1 547.5 323.1 545.6 322.7 543.8 C 322.4 542.9 321.9 541.5 320.7 541.9 C 319.2 542.2 318.3 543.8 317.9 545.1 C 317.6 543.2 316.4 541.5 315 540.2 C 315 544.1 315 548 315 551.9 L 314.1 551.9 C 314.1 543.9 314.1 535.7 314.1 527.7 L 315 527.7 C 315 531.5 315 535.5 315 539.4 C 316.4 538.1 317.6 536.4 317.8 534.5 C 318.3 535.9 319.3 537.5 321 537.8 C 322.2 537.8 322.5 536.3 322.8 535.4 C 323.1 533.7 323.1 531.8 322.6 530.1 C 322.2 529 320.9 528 319.6 528.3 C 318.6 529 320.6 529.6 320.3 530.6 C 320.5 532 318.8 533 317.6 532.3 C 316.3 531.6 316.4 529.7 317.4 528.8 C 318 528.1 319.3 527.7 320.3 527.7 C 321.2 527.7 321.8 527.7 322.6 528 C 324.6 528.7 325.7 530.7 325.9 532.7 C 326.2 534.9 324.9 537.3 322.8 538.2 C 321.5 538.7 319.9 538.3 318.8 537.3 C 318.7 538.3 318.2 539.2 317.7 539.9 C 318.1 540.6 318.6 541.8 318.8 542.1 C 320.1 540.9 322.5 540.8 323.8 542 C 325.2 543.1 326.1 545 325.9 546.8 z "/></g><g transform="matrix(1,0,0,1.030928,-309.364,-543.9805)"><path d="M 312.2 551.9 L 309.4 551.9 L 309.4 527.7 L 312.2 527.7 L 312.2 551.9 z "/></g></g></svg>';break;case"G":src+='<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.0" width="15" height="40"><defs/><path d="m 12 3.4 c 0.3 3.1 -2 5.6 -4.1 7.6 -0.9 0.9 -0.2 0.1 -0.6 0.6 -0.1 -0.5 -0.3 -1.7 -0.3 -2.1 0.1 -2.6 2.3 -6.5 4.2 -7.9 0.3 0.6 0.6 0.6 0.8 1.8 z m 0.7 15.9 c -1.2 -0.9 -2.8 -1.1 -4.3 -0.9 -0.2 -1.2 -0.4 -2.5 -0.6 -3.7 2.4 -2.3 4.9 -4.9 5 -8.4 0.1 -2.2 -0.3 -4.6 -1.7 -6.4 C 9.5 0.1 8.3 2.1 7.4 3.3 c -1.5 2.6 -1.1 5.8 -0.6 8.6 -0.8 0.9 -1.9 1.7 -2.7 2.7 -2.4 2.3 -4.4 5.3 -4 8.7 0.2 3.3 2.6 6.3 5.9 7.1 1.2 0.3 2.6 0.3 3.8 0.1 0.2 2.2 1 4.5 0.1 6.7 -0.7 1.6 -2.8 2.9 -4.3 2.2 -0.6 -0.3 -0.1 -0.1 -0.5 -0.2 1.1 -0.3 2 -1 2.3 -1.5 0.8 -1.4 -0.4 -3.6 -2.2 -3.3 -2.3 0 -3.2 3.1 -1.7 4.6 1.3 1.5 3.8 1.3 5.4 0.3 1.8 -1.2 2 -3.5 1.8 -5.5 -0.1 -0.7 -0.4 -2.6 -0.4 -3.3 0.7 -0.2 0.2 -0.1 1.2 -0.4 2.7 -1 4.4 -4.2 3.6 -7 -0.3 -1.4 -1 -2.9 -2.3 -3.7 z m 0.6 5.7 c 0.2 2 -1.1 4.2 -3.1 4.9 -0.1 -0.8 -0.2 -1 -0.3 -1.4 -0.5 -2.4 -0.7 -4.9 -1.1 -7.3 1.6 -0.2 3.5 0.5 4 2.1 0.2 0.6 0.3 1.2 0.4 1.8 z m -5.1 5.1 c -2.5 0.1 -5 -1.6 -5.6 -4 -0.7 -2.1 -0.5 -4.5 0.8 -6.4 1.1 -1.7 2.6 -3 4 -4.5 0.2 1.1 0.4 2.2 0.5 3.3 -3 0.8 -5 4.6 -3.2 7.3 0.5 0.8 2 2.2 2.8 1.6 -1.1 -0.7 -2 -1.8 -1.8 -3.2 -0.1 -1.3 1.4 -2.9 2.7 -3.1 0.4 2.8 0.9 6 1.4 8.8 -0.5 0.1 -1 0.1 -1.5 0.1 z"/></svg>';break;default:throw new Error("Unknown music clef symbol")}var imageObj=new Image;imageObj.onload=function(){var ratio=clef.getBoundingBox().getHeight()/this.height;clef.getBoundingBox().setWidth(this.width*ratio),context.drawImage(imageObj,clef.getBoundingBox().getX(),clef.getBoundingBox().getY(),clef.getBoundingBox().getWidth(),clef.getBoundingBox().getHeight())},imageObj.src=src},_drawDecoration=function(decoration,context,parameters){throw new Error("not implemented")},_drawDots=function(dots,context,parameters){throw new Error("not implemented")},_drawHead=function(head,context,parameters){throw new Error("not implemented")},_drawLedgerLine=function(ledgerLine,context,parameters){throw new Error("not implemented")},_drawRest=function(rest,context,parameters){throw new Error("not implemented")},_drawStem=function(stem,context,parameters){throw new Error("not implemented")},_drawTieOrSlur=function(tieOrSlur,context,parameters){throw new Error("not implemented")},_drawTimeSignature=function(timeSignature,context,parameters){throw new Error("not implemented")};scope.MusicRenderer=MusicRenderer}(MyScript),function(scope){function AnalyzerRenderer(context){scope.AbstractRenderer.call(this,context),this.shapeRenderer=new scope.ShapeRenderer(context)}AnalyzerRenderer.prototype=new scope.AbstractRenderer,AnalyzerRenderer.prototype.constructor=AnalyzerRenderer,AnalyzerRenderer.prototype.getShapeRenderer=function(){return this.shapeRenderer},AnalyzerRenderer.prototype.setShapeRenderer=function(shapeRenderer){this.shapeRenderer=shapeRenderer},AnalyzerRenderer.prototype.drawRecognitionResult=function(components,recognitionResult,context,parameters){this.isTypesetting()?(this.shapeRenderer.drawShapes(components,recognitionResult.getShapes(),context,parameters),this.drawTables(components,recognitionResult.getTables(),context,parameters),this.drawTextLines(components,recognitionResult.getTextLines(),context,parameters)):this.drawComponents(components,context,parameters)},AnalyzerRenderer.prototype.drawComponents=function(components,context,parameters){for(var i in components){var component=components[i];if(component instanceof scope.AbstractShapePrimitive)this.shapeRenderer.drawShapePrimitive(component,context,parameters);else{if(!(component instanceof scope.AbstractComponent))throw new Error("not implemented");scope.AbstractRenderer.prototype.drawComponent.call(this,component,context,parameters)}}},AnalyzerRenderer.prototype.drawTables=function(components,tables,context,parameters){context&&this._setContext(context),parameters&&this.setParameters(parameters);for(var i in tables){if(this.getShowBoundingBoxes())for(var j in tables[i].getCells())this.drawCell(tables[i].getCells()[j],context);for(var k in tables[i].getLines()){var data=tables[i].getLines()[k].getData();_drawLine(data.getP1(),data.getP2(),this.getContext(),this.getParameters())}}},AnalyzerRenderer.prototype.drawTextLines=function(components,textLines,context,parameters){for(var i in textLines){var textLine=textLines[i],data=textLine.getData();if(data){this.getShowBoundingBoxes()&&this.drawRectangle(data.getBoundingBox(),context,parameters);var text=textLine.getTextDocument().getTextSegment().getSelectedCandidate().getLabel();this.drawText(data.getBoundingBox(),text,data.getJustificationType(),data.getTextHeight(),data.getBaselinePos(),context,parameters);var underlines=textLine.getUnderlineList();for(var j in underlines)this.drawUnderline(data.getBoundingBox(),underlines[j],text,data.getTextHeight(),data.getBaselinePos()+data.getTextHeight()/10,context,parameters)}}},AnalyzerRenderer.prototype.drawText=function(boundingBox,text,justificationType,textHeight,baseline,context,parameters){context&&this._setContext(context),parameters&&this.setParameters(parameters);var params=this.getParameters();this.getContext().save();try{this.getContext().fillStyle=params.getColor(),this.getContext().strokeStyle=params.getColor(),this.getContext().globalAlpha=params.getAlpha(),this.getContext().lineWidth=.5*params.getWidth(),this.getContext().font=params.getDecoration()+textHeight+"px "+params.getFont(),this.getContext().textAlign="CENTER"===justificationType?"center":"left",this.getContext().fillText(text,boundingBox.getX(),baseline,boundingBox.getWidth())}finally{this.getContext().restore()}},AnalyzerRenderer.prototype.drawUnderline=function(boundingBox,underline,text,textHeight,baseline,context,parameters){context&&this._setContext(context),parameters&&this.setParameters(parameters);var params=this.getParameters(),topLeft=boundingBox.getTopLeftPoint(),firstCharacter=underline.getData().getFirstCharacter(),lastCharacter=underline.getData().getLastCharacter();this.getContext().font=params.getDecoration()+textHeight+"px "+params.getFont();var textMetrics=this.getContext().measureText(text.substring(0,firstCharacter)),x1=topLeft.x+textMetrics.width;textMetrics=this.getContext().measureText(text.substring(firstCharacter,lastCharacter+1));var x2=x1+textMetrics.width;_drawLine(new scope.Point({x:x1,y:baseline}),new scope.Point({x:x2,y:baseline}),this.getContext(),params)},AnalyzerRenderer.prototype.drawGroups=function(components,groups,context,parameters){throw new Error("not implemented")},AnalyzerRenderer.prototype.drawCell=function(cell,context,parameters){cell.getData()&&this.drawRectangle(cell.getData().getBoundingBox(),context,parameters)};var _drawLine=function(p1,p2,context,parameters){context.save();try{context.fillStyle=parameters.getColor(),context.strokeStyle=parameters.getColor(),context.globalAlpha=parameters.getAlpha(),context.lineWidth=.5*parameters.getWidth(),context.beginPath(),context.moveTo(p1.getX(),p1.getY()),context.lineTo(p2.getX(),p2.getY()),context.stroke()}finally{context.restore()}};scope.AnalyzerRenderer=AnalyzerRenderer}(MyScript),function(scope){function InkGrabber(context){scope.AbstractRenderer.call(this,context),this.stroke=void 0,this.writing=!1}InkGrabber.prototype=new scope.AbstractRenderer,InkGrabber.prototype.constructor=InkGrabber,InkGrabber.prototype.isWriting=function(){return this.writing},InkGrabber.prototype.getStroke=function(){return this.stroke},InkGrabber.prototype.startCapture=function(x,y,t){if(this.writing)throw new Error("StrokeComponent capture already running");this.writing=!0,this.stroke=new scope.StrokeComponent,this.stroke.setColor(this.penParameters.getColor()),this.stroke.setWidth(this.penParameters.getWidth()),this.stroke.setAlpha(this.penParameters.getAlpha()),this.stroke.addPoint(x,y,t),this.clear(),this.drawStroke(this.stroke)},InkGrabber.prototype.continueCapture=function(x,y,t){if(!this.writing)throw new Error("Missing startInkCapture");this.stroke.addPoint(x,y,t),this.clear(),this.drawStroke(this.stroke)},InkGrabber.prototype.endCapture=function(x,y,t){if(!this.writing)throw new Error("Missing startInkCapture");this.stroke.addPoint(x,y,t),this.clear(),this.drawStroke(this.stroke),this.writing=!1},scope.InkGrabber=InkGrabber}(MyScript),function(scope){function InkPaper(element,options,callback){if(this._element=element,this._instanceId=void 0,this._timerId=void 0,this._initialized=!1,this.components=[],this.redoComponents=[],this.lastNonRecoComponentIdx=0,this.callback=callback,this.options={type:"TEXT",protocol:"REST",width:400,height:300,timeout:2e3,typeset:!1,components:[],textParameters:{},mathParameters:{},shapeParameters:{},musicParameters:{},analyzerParameters:{}},this._captureCanvas=_createCanvas(element,"ms-capture-canvas"),this._inkGrabber=new scope.InkGrabber(this._captureCanvas.getContext("2d")),this._renderingCanvas=_createCanvas(element,"ms-rendering-canvas"),this._textRenderer=new scope.TextRenderer(this._renderingCanvas.getContext("2d")),this._mathRenderer=new scope.MathRenderer(this._renderingCanvas.getContext("2d")),this._shapeRenderer=new scope.ShapeRenderer(this._renderingCanvas.getContext("2d")),this._musicRenderer=new scope.MusicRenderer(this._renderingCanvas.getContext("2d")),this._analyzerRenderer=new scope.AnalyzerRenderer(this._renderingCanvas.getContext("2d")),this._textRecognizer=new scope.TextRecognizer(options?options.host:void 0),this._mathRecognizer=new scope.MathRecognizer(options?options.host:void 0),this._shapeRecognizer=new scope.ShapeRecognizer(options?options.host:void 0),this._musicRecognizer=new scope.MusicRecognizer(options?options.host:void 0),this._analyzerRecognizer=new scope.AnalyzerRecognizer(options?options.host:void 0),this._textWSRecognizer=new scope.TextWSRecognizer(this._handleMessage.bind(this),options?options.host:void 0),this._mathWSRecognizer=new scope.MathWSRecognizer(this._handleMessage.bind(this),options?options.host:void 0),this._attachListeners(element),options)for(var idx in options)void 0!==options[idx]&&(this.options[idx]=options[idx]);this._initialize(this._getOptions())}function _createCanvas(parent,id){var count=document.querySelectorAll("canvas[id^="+id+"]").length,canvas=document.createElement("canvas");return canvas.id=id+"-"+count,parent.appendChild(canvas),canvas}function _getCoordinates(e,element){var x,y;return e.pageX||e.pageY?(x=e.pageX,y=e.pageY):(x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),x-=element.offsetLeft,y-=element.offsetTop,{x:x,y:y,t:e.timeStamp}}InkPaper.prototype.setWidth=function(width){this._captureCanvas.width=width,this._renderingCanvas.width=width,this._initRenderingCanvas()},InkPaper.prototype.setHeight=function(height){this._captureCanvas.height=height,this._renderingCanvas.height=height,this._initRenderingCanvas()},InkPaper.prototype._setProtocol=function(protocol){switch(protocol){case"REST":this._selectedRecognizer=this._selectedRESTRecognizer;break;case"WebSocket":this._selectedRecognizer=this._selectedWSRecognizer,this.setTimeout(-1);break;default:throw new Error("Unknown protocol: "+protocol)}this._instanceId=void 0,this._initialized=!1,this.lastNonRecoComponentIdx=0},InkPaper.prototype.setType=function(type){switch(type){case"TEXT":this._selectedRenderer=this._textRenderer,this._selectedRESTRecognizer=this._textRecognizer,this._selectedWSRecognizer=this._textWSRecognizer;break;case"MATH":this._selectedRenderer=this._mathRenderer,this._selectedRESTRecognizer=this._mathRecognizer,
this._selectedWSRecognizer=this._mathWSRecognizer;break;case"SHAPE":this._selectedRenderer=this._shapeRenderer,this._selectedRESTRecognizer=this._shapeRecognizer;break;case"MUSIC":this._selectedRenderer=this._musicRenderer,this._selectedRESTRecognizer=this._musicRecognizer;break;case"ANALYZER":this._selectedRenderer=this._analyzerRenderer,this._selectedRESTRecognizer=this._analyzerRecognizer;break;default:throw new Error("Unknown type: "+type)}this._instanceId=void 0,this._initialized=!1,this.lastNonRecoComponentIdx=0},InkPaper.prototype.setLanguage=function(language){"TEXT"===this.options.type&&(this.isStarted=!1,this._selectedWSRecognizer.resetWSRecognition(),this._selectedWSRecognizer.getParameters().setLanguage(language))},InkPaper.prototype.setResultTypes=function(resultTypes){"MATH"===this.options.type&&(this.isStarted=!1,this._selectedWSRecognizer.resetWSRecognition(),this._selectedWSRecognizer.getParameters().setResultTypes(resultTypes.map(function(x){return x.toUpperCase()})))},InkPaper.prototype.getTimeout=function(){return this.timeout},InkPaper.prototype.setTimeout=function(timeout){this.timeout=timeout},InkPaper.prototype.getApplicationKey=function(){return this.applicationKey},InkPaper.prototype.setApplicationKey=function(applicationKey){this.applicationKey=applicationKey},InkPaper.prototype.getHmacKey=function(){return this.hmacKey},InkPaper.prototype.setHmacKey=function(hmacKey){this.hmacKey=hmacKey},InkPaper.prototype.setTextParameters=function(textParameters){if(textParameters)for(var i in textParameters)void 0!==textParameters[i]&&(this._textRecognizer.getParameters()[i]=textParameters[i],this._textWSRecognizer.getParameters()[i]=textParameters[i],this._analyzerRecognizer.getParameters().getTextParameters()[i]=textParameters[i])},InkPaper.prototype.setMathParameters=function(mathParameters){if(mathParameters)for(var i in mathParameters)void 0!==mathParameters[i]&&(this._mathRecognizer.getParameters()[i]=mathParameters[i],this._mathWSRecognizer.getParameters()[i]=mathParameters[i])},InkPaper.prototype.setShapeParameters=function(shapeParameters){if(shapeParameters)for(var i in shapeParameters)void 0!==shapeParameters[i]&&(this._shapeRecognizer.getParameters()[i]=shapeParameters[i])},InkPaper.prototype.setMusicParameters=function(musicParameters){if(musicParameters)for(var i in musicParameters)void 0!==musicParameters[i]&&(this._musicRecognizer.getParameters()[i]=musicParameters[i])},InkPaper.prototype.setAnalyzerParameters=function(analyzerParameters){if(analyzerParameters)for(var i in analyzerParameters)void 0!==analyzerParameters[i]&&(this._analyzerRecognizer.getParameters()[i]=analyzerParameters[i])},InkPaper.prototype.setTypeset=function(typeset){this._textRenderer.setTypeset(typeset),this._mathRenderer.setTypeset(typeset),this._shapeRenderer.setTypeset(typeset),this._musicRenderer.setTypeset(typeset),this._analyzerRenderer.setTypeset(typeset)},InkPaper.prototype._initialize=function(options){this._setHost(options.host),this.setTextParameters(options.textParameters),this.setMathParameters(options.mathParameters),this.setShapeParameters(options.shapeParameters),this.setMusicParameters(options.musicParameters),this.setAnalyzerParameters(options.analyzerParameters),this.setType(options.type),this._setProtocol(options.protocol),this.setTimeout(options.timeout),this.setApplicationKey(options.applicationKey),this.setHmacKey(options.hmacKey),this.setTypeset(options.typeset),this.setWidth(options.width),this.setHeight(options.height)},InkPaper.prototype._getOptions=function(){return this.options},InkPaper.prototype.getAvailableLanguages=function(){return this._selectedRecognizer.getAvailableLanguageList(this.getApplicationKey(),this._textRecognizer.getParameters().getInputMode())},InkPaper.prototype.getRenderer=function(){return this._selectedRenderer},InkPaper.prototype.getInkGrabber=function(){return this._inkGrabber},InkPaper.prototype.getRecognizer=function(){return this._selectedRecognizer},InkPaper.prototype.setCallback=function(callback){this.callback=callback},InkPaper.prototype.recognize=function(){return this._doRecognition(this.components)},InkPaper.prototype.canUndo=function(){return this.components.length>0},InkPaper.prototype.undo=function(){this.canUndo()&&(this.redoComponents.push(this.components.pop()),this._selectedRecognizer instanceof scope.ShapeRecognizer&&(this.lastNonRecoComponentIdx=0,this._selectedRecognizer.clearShapeRecognitionSession(this.getApplicationKey(),this._instanceId),this._instanceId=void 0),this._initRenderingCanvas(),this._element.dispatchEvent(new CustomEvent("changed",{detail:{canUndo:this.canUndo(),canRedo:this.canRedo()}})),this._selectedRecognizer instanceof scope.AbstractWSRecognizer?(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition()):(clearTimeout(this._timerId),this.getTimeout()>0?this._timerId=setTimeout(this.recognize.bind(this),this.getTimeout()):this.getTimeout()>-1&&this.recognize()))},InkPaper.prototype.canRedo=function(){return this.redoComponents.length>0},InkPaper.prototype.redo=function(){this.canRedo()&&(this.components.push(this.redoComponents.pop()),this._selectedRecognizer instanceof scope.ShapeRecognizer&&(this.lastNonRecoComponentIdx=0,this._selectedRecognizer.clearShapeRecognitionSession(this.getApplicationKey(),this._instanceId),this._instanceId=void 0),this._initRenderingCanvas(),this._element.dispatchEvent(new CustomEvent("changed",{detail:{canUndo:this.canUndo(),canRedo:this.canRedo()}})),this._selectedRecognizer instanceof scope.AbstractWSRecognizer?this.recognize():(clearTimeout(this._timerId),this.getTimeout()>0?this._timerId=setTimeout(this.recognize.bind(this),this.getTimeout()):this.getTimeout()>-1&&this.recognize()))},InkPaper.prototype.clear=function(){this._selectedRecognizer instanceof scope.ShapeRecognizer&&this._selectedRecognizer.clearShapeRecognitionSession(this.getApplicationKey(),this._instanceId),this.components=[],this.redoComponents=[],this.lastNonRecoComponentIdx=0,this._inkGrabber.clear(),this._instanceId=void 0,this._initRenderingCanvas(),this._element.dispatchEvent(new CustomEvent("changed",{detail:{canUndo:this.canUndo(),canRedo:this.canRedo()}})),this._selectedRecognizer instanceof scope.AbstractWSRecognizer?(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition()):(clearTimeout(this._timerId),this.getTimeout()>0?this._timerId=setTimeout(this.recognize.bind(this),this.getTimeout()):this.getTimeout()>-1&&this.recognize())},InkPaper.event={addDomListener:function(element,useCapture,myfunction){element.addEventListener(useCapture,myfunction)}},InkPaper.prototype._down=function(x,y,t){this.canRedo()&&(this.redoComponents=[],this._element.dispatchEvent(new CustomEvent("changed",{detail:{canUndo:this.canUndo(),canRedo:this.canRedo()}}))),this._inkGrabber.startCapture(x,y,t)},InkPaper.prototype._move=function(x,y,t){this._inkGrabber.continueCapture(x,y,t)},InkPaper.prototype._up=function(x,y,t){this._inkGrabber.endCapture(x,y,t);var stroke=this._inkGrabber.getStroke();this._inkGrabber.clear(),this._selectedRenderer.drawComponent(stroke),this.components.push(stroke),this._element.dispatchEvent(new CustomEvent("changed",{detail:{canUndo:this.canUndo(),canRedo:this.canRedo()}})),this._selectedRecognizer instanceof scope.AbstractWSRecognizer?this._selectedRecognizer.isOpen()||this._selectedRecognizer.isConnecting()?this.recognize():this._selectedRecognizer.open():(clearTimeout(this._timerId),this.getTimeout()>0?this._timerId=setTimeout(this.recognize.bind(this),this.getTimeout()):this.getTimeout()>-1&&this.recognize())},InkPaper.prototype._doRecognition=function(components){if(components.length>0)if(this._selectedRecognizer instanceof scope.AbstractWSRecognizer){if(this._initialized){var inputWS=[];if(this._selectedRecognizer instanceof scope.TextWSRecognizer){var inputUnitWS=new scope.TextInputUnit;inputUnitWS.setComponents(this._getOptions().components.concat(components.slice(this.lastNonRecoComponentIdx))),inputWS=[inputUnitWS]}else inputWS=components.slice(this.lastNonRecoComponentIdx);this.lastNonRecoComponentIdx=components.length,this.isStarted?this._selectedRecognizer.continueWSRecognition(inputWS,this._instanceId):(this.isStarted=!0,this._selectedRecognizer.startWSRecognition(inputWS))}}else{var input=[];if(this._selectedRecognizer instanceof scope.TextRecognizer){var inputUnit=new scope.TextInputUnit;inputUnit.setComponents(this._getOptions().components.concat(components)),input=[inputUnit]}else this._selectedRecognizer instanceof scope.ShapeRecognizer?(input=components.slice(this.lastNonRecoComponentIdx),this.lastNonRecoComponentIdx=components.length):input=input.concat(this._getOptions().components,components);this._selectedRecognizer.doSimpleRecognition(this.getApplicationKey(),this._instanceId,input,this.getHmacKey()).then(function(data){return this._parseResult(data,input)}.bind(this),function(error){return this.callback(void 0,error),this._element.dispatchEvent(new CustomEvent("failure",{detail:error})),error}.bind(this)).done()}else this.isStarted=!1,this._selectedRenderer.clear(),this._initRenderingCanvas(),this._element.dispatchEvent(new CustomEvent("success")),this.callback()},InkPaper.prototype._parseResult=function(data,input){if(this._instanceId){if(this._instanceId!==data.getInstanceId())return this.callback(data),this._element.dispatchEvent(new CustomEvent("success",{detail:data})),data}else this._instanceId=data.getInstanceId();return(data.getDocument().hasScratchOutResults()||this._selectedRenderer.isTypesetting())&&(this._selectedRenderer.clear(),this._selectedRenderer.drawRecognitionResult(input,data.getDocument())),this.callback(data),this._element.dispatchEvent(new CustomEvent("success",{detail:data})),data},InkPaper.prototype._setHost=function(host){this._textRecognizer.setHost(host),this._mathRecognizer.setHost(host),this._shapeRecognizer.setHost(host),this._musicRecognizer.setHost(host),this._analyzerRecognizer.setHost(host)},InkPaper.prototype._attachListeners=function(element){var pointerId,self=this;element.addEventListener("pointerdown",function(e){if(!pointerId){pointerId=e.pointerId,e.preventDefault();var coord=_getCoordinates(e,element);self._down(coord.x,coord.y,coord.t)}},!1),element.addEventListener("pointermove",function(e){if(pointerId===e.pointerId){e.preventDefault();var coord=_getCoordinates(e,element);self._move(coord.x,coord.y,coord.t)}},!1),element.addEventListener("pointerup",function(e){if(pointerId===e.pointerId){e.preventDefault();var coord=_getCoordinates(e,element);self._up(coord.x,coord.y,coord.t),pointerId=void 0}},!1),element.addEventListener("pointerleave",function(e){if(pointerId===e.pointerId){e.preventDefault();var coord=_getCoordinates(e,element);self._up(coord.x,coord.y,coord.t),pointerId=void 0}},!1)},InkPaper.prototype._initRenderingCanvas=function(){this._selectedRenderer.clear(),this._drawInput(this.components)},InkPaper.prototype._drawInput=function(components){if(this._selectedRecognizer instanceof scope.MusicRecognizer){if(!(this._selectedRecognizer.getParameters().getStaff()instanceof scope.MusicStaff))throw new Error("Missing music staff");this._selectedRenderer.drawStaff(this._selectedRecognizer.getParameters().getStaff())}this._selectedRenderer.drawComponents(this._getOptions().components.concat(components))},InkPaper.prototype._handleMessage=function(message,error){if(error&&(this.callback(void 0,error),this._element.dispatchEvent(new CustomEvent("failure",{detail:error}))),message)switch(message.type){case"open":this._selectedWSRecognizer.initWSRecognition(this.getApplicationKey());break;case"hmacChallenge":this._selectedWSRecognizer.takeUpHmacChallenge(this.getApplicationKey(),message.getChallenge(),this.getHmacKey());break;case"init":this._initialized=!0,this._instanceId=void 0,this.lastNonRecoComponentIdx=0,this.recognize();break;case"reset":this._instanceId=void 0,this.lastNonRecoComponentIdx=0,this.recognize();break;case"close":this._initialized=!1,this._instanceId=void 0,this.lastNonRecoComponentIdx=0;break;default:this._parseResult(message,this.components)}},scope.InkPaper=InkPaper}(MyScript);
//# sourceMappingURL=myscript.min.js.map